# é™æ€éƒ¨ç½²

## é™æ€æ‰˜ç®¡

å¦‚æœé™æ€åŒ…æ²¡åœ¨å›½å†…é™æ€åº“æ‰˜ç®¡çš„è¯ï¼Œç”¨`npm i`å‘½ä»¤å°†é™æ€åŒ…ä¸‹è½½åˆ°æœ¬åœ°ï¼Œç„¶åéƒ¨ç½²åˆ°é˜¿é‡Œäº‘/ä¸ƒç‰›äº‘ä¸Šï¼Œé¿å…ç½‘é¡µå— UNPKG å’Œ jsDelivr å±è”½å½±å“è€Œæ— æ³•æ‰“å¼€ã€‚

### NPM åŒ…

- UNPKGï¼š**æœ‰å¢™é£é™©ä¸”ä¸ç¨³å®š**ï¼Œæ”¯æŒä½¿ç”¨`@latest`æ ‡ç­¾ã€‚

  1. å°†é™æ€æ–‡ä»¶å‘å¸ƒä¸º npm åŒ…ï¼Œå‚è€ƒ [ä¸€åˆ†é’Ÿæ•™ä½ å‘å¸ƒ npm åŒ…](https://segmentfault.com/a/1190000023075167)ã€‚
  2. åŠ é€Ÿï¼šåœ¨ [npm å®˜æ–¹æº](https://www.npmjs.com/) ä¸­æœç´¢åŒ…ä½ç½®ï¼Œç„¶åä½¿ç”¨å‰ç¼€`https://unpkg.com/`ã€‚

- è‡ªå»º unpkg é•œåƒï¼Œåå‘ä»£ç† unpkg

- [NPM MIRROR](https://npmmirror.com/)ï¼šNPM å®˜æ–¹é¡¹ç›®çš„é•œåƒï¼Œä¸èƒ½åšé™æ€æ‰˜ç®¡ç”¨é€”ã€‚
  - `https://registry.npmmirror.com/é¡¹ç›®å/ç‰ˆæœ¬å·`å¯ä»¥çœ‹è§é¡¹ç›®çš„å„ç§ä¿¡æ¯ï¼Œä½†çœ‹ä¸äº†é‡Œé¢çš„æ–‡ä»¶ã€‚

- <s>jsDelivrï¼ˆå·²å¢™ï¼‰ï¼šé€Ÿåº¦æœ€å¿«ï¼ŒåŸæœ¬æ˜¯æœ€ç¨³çš„ï¼Œä½†åŸŸåæš´é›·åï¼Œç»å¸¸æ–­å¼€ï¼Œ2022.06.01 å½»åº•æ‰“ä¸å¼€ã€‚
  é…åˆ Github actionï¼Œæ›´æ–°åè‡ªåŠ¨è®¿é—® jsdelivr CDN ç¼“å­˜åˆ·æ–°é“¾æ¥ï¼Œä¿æŒé¡µé¢å¸¸æ–°ã€‚åˆ·æ–°å‘½ä»¤å‚è€ƒ`curl https://purge.jsdelivr.net/gh/username/project/file`ã€‚
- é¥¿äº†ä¹ˆ CDNï¼ˆå·²å…³ï¼‰ï¼šå›½å†…å”¯ä¸€èƒ½ç”¨çš„ npm é•œåƒï¼Œ2022.07.13 å‘ç°å¤–éƒ¨è®¿é—®è¢«æ‹’ç»ã€‚ä¹‹å‰é¥¿äº†ä¹ˆå¹¶æ²¡è¯´æ”¯æŒå¯¹å¤–ï¼Œå¯èƒ½å·²ç»å½»åº•å–æ¶ˆäº†ã€‚
  ä½¿ç”¨é¥¿äº†ä¹ˆ CDN æ—¶ï¼Œæ³¨æ„`https://npm.elemecdn.com/react@latest/`éœ€è¦æ—¶é—´æ›´æ–°ï¼Œå…·ä½“é¢‘ç‡æœªçŸ¥ï¼Œå¯å›ºå®šå¤§ç‰ˆæœ¬å·æ¥è·å–æ›´æ–°`https://npm.elemecdn.com/react@^18/`ã€‚</s>

### é™æ€èµ„æºåº“

- [å­—èŠ‚ CDN](https://cdn.bytedance.com/)ï¼šå›½å†…æµ‹é€Ÿè¡¨ç°æœ€ä½³ï¼Œç¼“å­˜è¿‡æœŸæ—¶é—´æœ€é•¿è®¾ç½®ä¸€å¹´ã€‚
- [Staticfile CDN](https://www.staticfile.org/)ï¼šCDN åŠ é€Ÿç”±ä¸ƒç‰›äº‘æä¾›ã€‚

### é™æ€é¡µé¢

- Cloudflareï¼šPages å’Œ Workers ä¸¤ç±»éƒ¨ç½²æ–¹å¼ã€‚
  - [Workers](deploy/Cloudflare?id=åå‘ä»£ç†)ï¼šå¤åˆ¶é•œåƒç½‘ç«™ï¼Œå¯ç›´æ¥è®¿é—®ï¼Œä½†åå‘ä»£ç†ç¨³å®šæ€§æˆç–‘ã€‚
  - Pagesï¼šéƒ¨ç½²ç®€å•ï¼Œå¤–ç½‘é€Ÿåº¦å¾ˆå¿«ï¼Œä½†å›½å†…é€Ÿåº¦ä¸ç¨³ï¼Œè€Œä¸” [page.dev](http://page.dev) åŸŸåæœ‰æ—¶ä¼šè¢«å¢™ï¼Œéœ€è¦è´­ä¹°ä¾¿å®œçš„ä¸€å¹´ä¸´æ—¶åŸŸåæ¥è§£å†³è¯¥é—®é¢˜ã€‚
- Netlifyï¼šå›½å†…é€Ÿåº¦æ…¢ç‚¹ï¼Œå›¾ç‰‡å®¹æ˜“å¡æ­»ï¼Œä½†è¿˜ç®—ç¨³å®šã€‚
- Vercelï¼šéœ€ç»‘å®šå›½å¤–æ‰‹æœºå·ï¼Œç»å¸¸éœ€è¦æ¢ IPã€‚
- AWS: é‚®ç®±æ³¨å†Œï¼Œä¸è¿‡éœ€è¦ä¿¡ç”¨å¡è®¤è¯ã€‚
- å›½å†…å¹³å°ï¼šGiteeã€WuliHubã€CODINGï¼Œéƒ½éœ€è¦å®åè®¤è¯ã€‚

### IPFS

IPFS æ— éœ€æœåŠ¡å™¨å°±å¯å»ºç«‹é™æ€ç½‘ç«™ï¼Œå·ç§°æ°¸ä¸å¤±æ•ˆï¼Œä½†**å›½å†…ç¨³å®šæ€§æˆç–‘é—®ï¼Œå®ç”¨æ€§ä¸€èˆ¬**ã€‚IPFS æ‰˜ç®¡åœ¨ä¸€ä¸ªç½‘å…³ä¸Šï¼Œå¹¶ä¸ä¼šè‡ªåŠ¨å¤åˆ¶åˆ°æ‰€æœ‰ç½‘å…³ã€‚

[pinata](https://pinata.cloud/) ä¸Šä¼ ç½‘ç«™æ„å»ºçš„ç›®å½•æ–‡ä»¶å¤¹ï¼Œä¸Šä¼ åï¼Œå³å¯é€šè¿‡ IPFS Hash è®¿é—®ã€‚ç½‘ç«™ç›®å½•ä¸­å¿…é¡»æœ‰ index.htmlï¼Œå¦åˆ™ç½‘é¡µä¸­å°†æ˜¾ç¤ºç½‘ç«™ç›®å½•ã€‚å³ä½¿æœ‰ index.htmlï¼Œå…¶ä»–äººåœ¨æ‹¥æœ‰ CID åï¼Œå¯ä»¥é€šè¿‡ IPFS Desktop æ¥è·å–ç½‘ç«™çš„å®Œæ•´ç›®å½•ã€‚ä¸ºç¡®ä¿ç§å¯†æ€§ï¼Œå»ºè®®åªä¸Šä¼ å•æ–‡ä»¶ã€‚ä½¿ç”¨å•æ–‡ä»¶ CID è§†ä¸ºå•ä¸€ç½‘ç«™ï¼Œä¸å¯è°ƒç”¨åŸç›®å½•ä¸­çš„æ–‡ä»¶ã€‚^[[How to Easily Host a Website on IPFS](https://medium.com/pinata/how-to-easily-host-a-website-on-ipfs-9d842b5d6a01)]

ä¸Šä¼  ipfs åˆ° pinata ä¹‹åï¼Œcloudflare ç­‰å…¶ä»–ç½‘å…³ä¸ä¸€å®šä¼šå®Œå…¨å¤åˆ¶æ–‡ä»¶ï¼Œphp æ— æ³•æŠ“å–åŠ è½½ï¼Œæ‰€ä»¥ä¸å»ºè®®ä½¿ç”¨ cloudflare ç½‘å…³ã€‚è€Œ cloudflare æ¥ç®¡ pinata ipfs åŸŸåéœ€é€šè¿‡ã€Œpinata æ‰˜ç®¡ - cloudflare DNS - cloudflare SSLã€ï¼Œä¸€æ—¦ DNS æŒ‡å‘ <http://gateway.pinata.cloud> ç­‰é cloudflare ipfs ç½‘å…³åŸŸåï¼Œcloudflare SSL è¯ä¹¦å°†å¤±æ•ˆã€‚é“¾æ¥æ”¹ä¸º httpï¼Œpinata ä¼šè§†ä¸ºæ— æ•ˆé“¾æ¥ï¼Œæ‹’ç»è®¿é—®ã€‚å¯¹äºæ–‡ä»¶è¾ƒå°‘ï¼Œç¡®è®¤è¿‡é“¾æ¥æœ‰æ•ˆæ€§çš„åŸŸåï¼Œå¯è®¿é—® [Cloudflare IPFS](https://www.cloudflare.com/zh-cn/distributed-web-gateway/) é¡µé¢ï¼ŒæŒ‰è¯´æ˜è®¾ç½® DNSï¼Œç„¶å è¾“å…¥ IPFS åŸŸåå¹¶æäº¤ï¼Œè¿‡ 30 åˆ†é’Ÿåè·å– SSL è¯ä¹¦ã€‚

1. æ·»åŠ  CNAME è®°å½•ï¼Œå°†ä½ çš„ IPFS åŸŸå (xxx.example.com) æŒ‡å‘ cloudflare-ipfs.com
2. \_dnslink.xxx.example.com çš„å€¼ä¸º dnslink=/ipfs/<your_ipfs_hash_here> çš„åŸŸ

## GitHub åŒæ­¥åˆ° VPS

æˆ‘çš„ä»£ç ã€æ–‡ç« éƒ½éƒ¨ç½²åœ¨ GitHub ä¸Šï¼Œä½†å›½å†…è®¿é—® GitHub çš„é€Ÿåº¦ä¸ç¨³å®šï¼Œéœ€è¦å¢åŠ å›½å†…è®¿é—®èŠ‚ç‚¹ã€‚

æœ€å¤šäººç”¨çš„æ–¹æ³•æ˜¯ï¼ŒGitHub Action å°†æ–°æ–‡æ¡£åŒæ­¥åˆ° Giteeï¼Œç”Ÿæˆå›½å†…é™æ€é¡µ Gitee Pagesã€‚ä½† Gitee Pages æœ‰è¯¸å¤šé™åˆ¶ï¼Œå…è´¹ç‰ˆæ— æ³•è‡ªå®šä¹‰åŸŸåï¼Œè€Œä¸”å¿…é¡»å®åéªŒè¯ã€‚

å› æ­¤ï¼Œæˆ‘é€‰æ‹©å°†æ–‡æ¡£åŒæ­¥åˆ°è‡ªå»ºçš„å›½å†…æœåŠ¡å™¨ï¼ˆåŸŸåå·²å¤‡æ¡ˆï¼‰ã€‚

!> æ³¨æ„ï¼šæ–‡ä»¶å¤¹ä¸è¦æœ‰å¤§å†™å­—æ¯ï¼Œå¦åˆ™åŒæ­¥æ—¶å®¹æ˜“å‡ºé”™ã€‚

### åŒæ­¥åˆ° ftp

å¦‚æœä½ æœ‰ ftp æœåŠ¡å™¨ï¼Œå¯ä½¿ç”¨ [FTP-Deploy-Action](https://github.com/SamKirkland/FTP-Deploy-Action) å°† github ä»£ç åŒæ­¥åˆ°æœåŠ¡å™¨ä¸Šã€‚Action ä½¿ç”¨è¯´æ˜æŸ¥çœ‹ [GitHub è¯´æ˜](GitHub.md)ã€‚

```bash
on: push
name: ğŸš€ Deploy website on push
jobs:
  web-deploy:
    name: ğŸ‰ Deploy
    runs-on: ubuntu-latest
    steps:
    - name: ğŸšš Get latest code
      uses: actions/checkout@v3

    - name: ğŸ“‚ Sync files
      uses: SamKirkland/FTP-Deploy-Action@4.3.0
      with:
        server: ${{ secrets.ftp_host }}
        username: ${{ secrets.ftp_username }}
        password: ${{ secrets.ftp_password }}
        port: ${{ secrets.ftp_port }} # å»ºè®®æ›´æ”¹é»˜è®¤çš„ 21 ç«¯å£
```

`FTPError: 530 Login authentication failed`ï¼šå¯†é’¥å¡«å†™é”™è¯¯ï¼Œéœ€å°† github secrets é‡æ–° updateï¼Œå¹¶æ£€æŸ¥å¯†ç åªæœ‰å¤§å°å†™å­—æ¯å’Œæ•°å­—ã€‚å…ˆç”¨ FileZilla æµ‹è¯•è¿æ¥ ftpï¼Œç„¶åè¿›å…¥`/www/server/pure-ftpd/etc/pureftpd.passwd`ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰è¯¥ ftp è´¦æˆ·ã€‚

å¦‚æœæ–°å»º ftpï¼Œéœ€åœ¨äº‘æœåŠ¡å•†çš„å®‰å…¨ç»„å’ŒæœåŠ¡å™¨ä¸Šå¼€æ”¾ç«¯å£ã€‚å®å¡”ç³»ç»ŸåŠ å›ºç­‰æœåŠ¡å™¨é˜²ç«å¢™ç»å¸¸ä¼šç»„ç»‡æ–°å»º ftpï¼Œå¯ä¸´æ—¶æš‚åœã€‚

### åŒæ­¥åˆ° oss

å¦‚æœæ²¡æœ‰æœåŠ¡å™¨ï¼Œå¯ä»¥æŠŠæ–‡ä»¶éƒ¨ç½²åœ¨äº‘è¿è¥å•†çš„äº‘å­˜å‚¨ä¸Šã€‚æ¯”å¦‚ç”¨ [aliyun-oss-website-action](https://github.com/marketplace/actions/aliyun-oss-website-action)ï¼Œå°† repo æ–‡ä»¶ build æˆç½‘ç«™æ–‡ä»¶ï¼Œç„¶ååŒæ­¥åˆ°é˜¿é‡Œäº‘ oss å¹¶è¿è¡Œç½‘ç«™ã€‚

```bash
name: deploy md to oss
on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    # load repo to /github/workspace
    - uses: actions/checkout@v3
    - name: Use Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '14.x'
    # æ‰“åŒ…æ–‡æ¡£å‘½ä»¤
    # - run: npm install yarn@1.22.4 -g
    # - run: yarn install
    # - run: yarn docs:build #éœ€è¦é…åˆ yarn çš„ package.json
    - name: aliyun-oss-website-action
      uses: fangbinwei/aliyun-oss-website-action@v1.3.0
      with:
          accessKeyId: ${{ secrets.ACCESS_KEY_ID }}
          accessKeySecret: ${{ secrets.ACCESS_KEY_SECRET }}
          bucket: learndata-notes
          # use your own endpoint
          endpoint: oss-cn-shanghai.aliyuncs.com
          # å…¨ç›®å½•ä¸Šä¼ 
          folder: .
          # ä¸ä¸Šä¼ çš„æ–‡ä»¶
          exclude: |
            .github/
            .gitattributes
```
