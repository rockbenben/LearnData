import{az as a,z as n,e as d,l as c,ai as h,aA as l,k as u}from"./vidstack-sKeoTFgw-BbTZsg_E.js";function f(r,t=3e3){const s=a();return setTimeout(()=>{const i=r();i&&s.reject(i)},t),s}class g{constructor(t){this.db=t,this.cb=n(""),this.referrerPolicy=null,t.setAttribute("frameBorder","0"),t.setAttribute("allow","autoplay; fullscreen; encrypted-media; picture-in-picture; accelerometer; gyroscope"),this.referrerPolicy!==null&&t.setAttribute("referrerpolicy",this.referrerPolicy)}get iframe(){return this.db}setup(t){d(this.fd.bind(this)),c(window,"message",this.Lg.bind(this)),c(this.db,"load",this.lc.bind(this))}fd(){const t=this.cb();if(!t.length){this.db.setAttribute("src","");return}const s=h(()=>this.Te());this.db.setAttribute("src",l(t,s))}gd(t,s){var i;(i=this.db.contentWindow)==null||i.postMessage(JSON.stringify(t),s??"*")}Lg(t){var o;const s=this.eb();if(t.source===((o=this.db)==null?void 0:o.contentWindow)&&(!u(s)||s===t.origin)){try{const e=JSON.parse(t.data);e&&this.hd(e,t);return}catch{}t.data&&this.hd(t.data,t)}}}export{g as E,f as t};
