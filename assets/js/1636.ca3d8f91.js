"use strict";(self.webpackChunklearn_data=self.webpackChunklearn_data||[]).push([[1636],{1636:(e,t,a)=>{a.r(t),a.d(t,{GoogleCastLoader:()=>c});var r=a(5342),o=a(3694),n=a(4232),s=a(5363);class c{constructor(){this.name="google-cast"}get cast(){return(0,n.vY)()}mediaType(){return"video"}canPlay(e){return r.G_&&!r.pz&&(0,r.jx)(e)}async prompt(e){let t,a,r;try{t=await this.Ej(e),this.f||(this.f=new cast.framework.RemotePlayer,new cast.framework.RemotePlayerController(this.f)),a=e.player.createEvent("google-cast-prompt-open",{trigger:t}),e.player.dispatchEvent(a),this.Ce(e,"connecting",a),await this.Fj((0,s.se)(e.$props.googleCast)),e.$state.remotePlaybackInfo.set({deviceName:(0,n.aQ)()?.getCastDevice().friendlyName}),(0,n.br)()&&this.Ce(e,"connected",a)}catch(o){const s=o instanceof Error?o:this.De((o+"").toUpperCase(),"Prompt failed.");throw r=e.player.createEvent("google-cast-prompt-error",{detail:s,trigger:a??t,cancelable:!0}),e.player.dispatch(r),this.Ce(e,(0,n.br)()?"connected":"disconnected",r),s}finally{e.player.dispatch("google-cast-prompt-close",{trigger:r??a??t})}}async load(e){if(!this.f)throw Error("[vidstack] google cast player was not initialized");return new((await a.e(4548).then(a.bind(a,4548))).GoogleCastProvider)(this.f,e)}async Ej(e){if((0,n.r2)())return;const t=e.player.createEvent("google-cast-load-start");e.player.dispatch(t),await(0,o.k0)((0,n.xk)()),await customElements.whenDefined("google-cast-launcher");const a=e.player.createEvent("google-cast-loaded",{trigger:t});if(e.player.dispatch(a),!(0,n.Lx)())throw this.De("CAST_NOT_AVAILABLE","Google Cast not available on this platform.");return a}async Fj(e){this.Gj(e);const t=await this.cast.requestSession();if(t)throw this.De(t.toUpperCase(),(0,n.tM)(t))}Gj(e){this.cast?.setOptions({...(0,n.fk)(),...e})}Ce(e,t,a){const r={type:"google-cast",state:t};e.delegate.c("remote-playback-change",r,a)}De(e,t){const a=Error(t);return a.code=e,a}}},4232:(e,t,a)=>{a.d(t,{Cs:()=>d,It:()=>h,Lx:()=>s,Qg:()=>g,aQ:()=>l,br:()=>c,fk:()=>p,r2:()=>n,tM:()=>u,vY:()=>i,xk:()=>o});var r=a(2463);function o(){return"https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"}function n(){return!!window.cast?.framework}function s(){return!!window.chrome?.cast?.isAvailable}function c(){return i().getCastState()===cast.framework.CastState.CONNECTED}function i(){return window.cast.framework.CastContext.getInstance()}function l(){return i().getCurrentSession()}function d(){return l()?.getSessionObj().media[0]}function g(e){const t=d()?.media.contentId;return t===e?.src}function p(){return{language:"en-US",autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,receiverApplicationId:chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,resumeSavedSession:!0,androidReceiverCompatible:!0}}function u(e){return`Google Cast Error Code: ${e}`}function h(e,t){return(0,r.KT)(i(),e,t)}}}]);