"use strict";(self.webpackChunklearn_data=self.webpackChunklearn_data||[]).push([[5390],{5181:(t,e,s)=>{function i(t){return t instanceof Error?t:Error(JSON.stringify(t))}function n(t,e){if(!t)throw Error(e||"Assertion failed.")}s.d(e,{a:()=>n,c:()=>i})},8900:(t,e,s)=>{s.d(e,{Q:()=>i});const i={Ya:Symbol(0),Za:Symbol(0)}},2186:(t,e,s)=>{s.d(e,{T:()=>n,a:()=>a,g:()=>r});var i=s(5242);class n{get length(){return this.$.length}constructor(t,e){(0,i.r)(t)?this.$=t:(0,i.i)(t)||(0,i.i)(e)?this.$=[]:this.$=[[t,e]]}start(t){return this.$[t][0]??1/0}end(t){return this.$[t][1]??1/0}}function r(t){if(!t.length)return null;let e=t.start(0);for(let s=1;s<t.length;s++){const i=t.start(s);i<e&&(e=i)}return e}function a(t){if(!t.length)return null;let e=t.end(0);for(let s=1;s<t.length;s++){const i=t.end(s);i>e&&(e=i)}return e}},555:(t,e,s)=>{s.d(e,{I:()=>o,a:()=>r,b:()=>g,c:()=>d,d:()=>c,e:()=>p,f:()=>f,h:()=>h,i:()=>m,j:()=>l,k:()=>u,l:()=>a});var i=s(5242);const n=navigator?.userAgent.toLowerCase()||"",r=/iphone|ipad|ipod|ios|crios|fxios/i.test(n),a=/(iphone|ipod)/gi.test(navigator?.platform||""),o=!!window.chrome,h=!!window.safari||r;function c(){return!(0,i.i)(window.screen.orientation)&&!(0,i.i)(window.screen.orientation.lock)&&(0,i.b)(screen.orientation.unlock)}function l(t,e){return t||(t=document.createElement("audio")),t.canPlayType(e).length>0}function u(t,e){return t||(t=document.createElement("video")),t.canPlayType(e).length>0}function d(t){return t||(t=document.createElement("video")),t.canPlayType("application/vnd.apple.mpegurl").length>0}function p(t){return!!document.pictureInPictureEnabled&&!t?.disablePictureInPicture}function f(t){return(0,i.b)(t?.webkitSupportsPresentationMode)&&(0,i.b)(t?.webkitSetPresentationMode)}async function g(){const t=document.createElement("video");return t.volume=.5,await(0,i.w)(0),.5===t.volume}function m(){const t=window?.ManagedMediaSource??window?.MediaSource??window?.WebKitMediaSource;if((0,i.i)(t))return!1;const e=t&&(0,i.b)(t.isTypeSupported)&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),s=window?.SourceBuffer??window?.WebKitSourceBuffer,n=(0,i.i)(s)||!(0,i.i)(s.prototype)&&(0,i.b)(s.prototype.appendBuffer)&&(0,i.b)(s.prototype.remove);return!!e&&!!n}},5521:(t,e,s)=>{s.d(e,{T:()=>m,a:()=>n,b:()=>c,d:()=>l,e:()=>d,g:()=>h,i:()=>y,l:()=>o,p:()=>r,w:()=>u});var i=s(5242);function n(t,e){const s=new URLSearchParams;for(const t of Object.keys(e))s.set(t,e[t]+"");return t+"?"+s.toString()}function r(t,e="preconnect"){const s=document.querySelector(`link[href="${t}"]`);if(!(0,i.U)(s))return!0;const n=document.createElement("link");return n.rel=e,n.href=t,n.crossOrigin="true",document.head.append(n),!0}const a={};function o(t){if(a[t])return a[t].promise;const e=(0,i.A)(),s=document.querySelector(`script[src="${t}"]`);if(!(0,i.U)(s))return e.resolve(),e.promise;const n=document.createElement("script");return n.src=t,n.onload=()=>{e.resolve(),delete a[t]},n.onerror=()=>{e.reject(),delete a[t]},setTimeout((()=>document.head.append(n)),0),e.promise}function h(t){return"use-credentials"===t?"include":(0,i.t)(t)?"same-origin":void 0}const c={al:Symbol(0),M:Symbol(0),Ta:Symbol(0),P:Symbol(0),Ua:Symbol(0),T:Symbol(0),te:Symbol(0)};function l(t,e){return e>=t.startTime&&e<t.endTime}function u(t,e,s){let n=null;function r(){const r=(0,i.t)(e)?[e]:e,a=t.toArray().find((t=>r.includes(t.kind)&&"showing"===t.mode));if(a!==n){if(!a)return s(null),void(n=null);2==a.readyState?s(a):(s(null),a.addEventListener("load",(()=>s(a)),{once:!0})),n=a}}return r(),(0,i.l)(t,"mode-change",r)}function d(t,e,s){u(t,e,(t=>{if(!t)return void s("");const e=()=>{const e=t?.activeCues[0];s(e?.text||"")};e(),(0,i.l)(t,"cue-change",e)}))}var p,f,g;class m extends i.R{constructor(t){super(),this.id="",this.label="",this.language="",this.default=!1,this.P=!1,this.Va=0,this.I="disabled",this.ue={},this.ac=[],this.J=[],this.Wa=[],this[p]=0,this[f]=null,this[g]=null;for(const e of Object.keys(t))this[e]=t[e];this.type||(this.type="vtt"),t.content?s.e(9701).then(s.bind(s,9701)).then((({parseText:e,VTTCue:s,VTTRegion:n})=>{(0,i.t)(t.content)&&"json"!==t.type?e(t.content,{type:t.type}).then((({cues:t,regions:e})=>{this.J=t,this.ac=e,this.M()})):(this.ve(t.content,s,n),3!==this.readyState&&this.M())})):t.src||(this[c.M]=2)}static createId(t){return`id::${t.type}-${t.kind}-${t.src??t.label}`}get metadata(){return this.ue}get regions(){return this.ac}get cues(){return this.J}get activeCues(){return this.Wa}get readyState(){return this[c.M]}get mode(){return this.I}set mode(t){this.setMode(t)}addCue(t,e){let s=0,n=this.J.length;for(s=0;s<n&&!(t.endTime<=this.J[s].startTime);s++);s===n?this.J.push(t):this.J.splice(s,0,t),"cuechange"!==e?.type&&this[c.T]?.track.addCue(t),this.dispatchEvent(new i.D("add-cue",{detail:t,trigger:e})),l(t,this.Va)&&this[c.Ta](this.Va,e)}removeCue(t,e){const s=this.J.indexOf(t);if(s>=0){const n=this.Wa.includes(t);this.J.splice(s,1),this[c.T]?.track.removeCue(t),this.dispatchEvent(new i.D("remove-cue",{detail:t,trigger:e})),n&&this[c.Ta](this.Va,e)}}setMode(t,e){this.I!==t&&(this.I=t,"disabled"===t?(this.Wa=[],this.we()):2===this.readyState?this[c.Ta](this.Va,e):this.xe(),this.dispatchEvent(new i.D("mode-change",{detail:this,trigger:e})),this[c.Ua]?.())}[(p=c.M,f=c.Ua,g=c.T,c.Ta)](t,e){if(this.Va=t,"disabled"===this.mode||!this.J.length)return;const s=[];for(let e=0,i=this.J.length;e<i;e++){const i=this.J[e];l(i,t)&&s.push(i)}let i=s.length!==this.Wa.length;if(!i)for(let t=0;t<s.length;t++)if(!this.Wa.includes(s[t])){i=!0;break}this.Wa=s,i&&this.we(e)}[c.P](){this.P=!0,"disabled"!==this.I&&this.xe()}async xe(){if(this.P&&this.src&&!(this[c.M]>0)){this[c.M]=1,this.dispatchEvent(new i.D("load-start"));try{const{parseResponse:t,VTTCue:e,VTTRegion:i}=await s.e(9701).then(s.bind(s,9701)),n=this[c.al]?.(),r=fetch(this.src,{headers:"json"===this.type?{"Content-Type":"application/json"}:void 0,credentials:h(n)});if("json"===this.type)this.ve(await(await r).text(),e,i);else{const{errors:e,metadata:s,regions:i,cues:n}=await t(r,{type:this.type,encoding:this.encoding});if(0===e[0]?.code)throw e[0];this.ue=s,this.ac=i,this.J=n}this.M()}catch(t){this.ye(t)}}}M(){if(this[c.M]=2,!this.src||"vtt"!==this.type){const t=this[c.T]?.track;if(t)for(const e of this.J)t.addCue(e)}const t=new i.D("load");this[c.Ta](this.Va,t),this.dispatchEvent(t)}ye(t){this[c.M]=3,this.dispatchEvent(new i.D("error",{detail:t}))}ve(t,e,s){try{const{regions:n,cues:r}=function(t,e,s){const n=(0,i.t)(t)?JSON.parse(t):t;let r=[],a=[];return n.regions&&s&&(r=n.regions.map((t=>Object.assign(new s,t)))),(n.cues||(0,i.r)(n))&&(a=((0,i.r)(n)?n:n.cues).filter((t=>(0,i.a)(t.startTime)&&(0,i.a)(t.endTime))).map((t=>Object.assign(new e(0,0,""),t)))),{regions:r,cues:a}}(t,e,s);this.ac=n,this.J=r}catch(t){this.ye(t)}}we(t){this.dispatchEvent(new i.D("cue-change",{trigger:t}))}}const b=/captions|subtitles/;function y(t){return b.test(t.kind)}},3493:(t,e,s)=>{s.d(e,{L:()=>i});const i={oa:Symbol(0),Yb:Symbol(0),H:Symbol(0),pa:Symbol(0),Zb:Symbol(0),Mc:Symbol(0),ne:Symbol(0),oe:Symbol(0),pe:Symbol(0)}},1801:(t,e,s)=>{s.d(e,{a:()=>d,b:()=>y,c:()=>p,d:()=>$,e:()=>w,f:()=>v,g:()=>m,h:()=>u,i:()=>c,j:()=>g,k:()=>f,l:()=>n,m:()=>a,n:()=>o,o:()=>h,r:()=>l,s:()=>r,u:()=>b});var i=s(5242);function n(t,e,s){if(t)return(0,i.l)(t,e,s)}function r(t,e,s){t.hasAttribute(e)||t.setAttribute(e,s)}function a(t,e){t.hasAttribute("aria-label")||t.hasAttribute("data-no-label")||((0,i.b)(e)?(0,i.e)((function(){(0,i.s)(t,"aria-label",e())})):(0,i.s)(t,"aria-label",e))}function o(t,e,s){for(;e;){if(e===t)return!0;if(s?.(e))break;e=e.parentElement}return!1}function h(t,e){(0,i.l)(t,"pointerup",(t=>{0===t.button&&e(t)})),(0,i.l)(t,"keydown",(t=>{(0,i.c)(t)&&e(t)}))}function c(t){return(0,i.f)(t)&&(t.touches.length>1||t.changedTouches.length>1)}function l(t){let e=(0,i.g)(),s=window.requestAnimationFrame((()=>{(0,i.h)(t,e),s=-1}));return()=>{window.cancelAnimationFrame(s)}}function u(t,e,s){let n,r=t,a=t.parentElement,o=t.content.firstElementChild,h=[];!o&&t.firstElementChild&&(t.innerHTML=t.firstElementChild.outerHTML,t.firstElementChild.remove(),o=t.content.firstElementChild);for(let t=0;t<e;t++)n=document.importNode(o,!0),s?.(n,t),a.insertBefore(n,r.nextSibling),h.push(n),r=n;return(0,i.o)((()=>{for(let t=0;t<h.length;t++)h[t].remove()})),h}function d(t){const e=document.createElement("template");return e.innerHTML=t,e.content}function p(t){return t.cloneNode(!0).firstElementChild}function f(t,e,s,{offsetVarName:n,xOffset:r,yOffset:a,...o}){if(!t)return;const h=s.replace(" ","-").replace("-center","");if((0,i.j)(t,"visibility",e?null:"hidden"),!e)return;const c=t=>s.includes("left")?`calc(-1 * ${t})`:t,l=t=>s.includes("top")?`calc(-1 * ${t})`:t;return(0,i.k)(e,t,(()=>{(0,i.m)(e,t,{placement:h,...o}).then((({x:e,y:s})=>{Object.assign(t.style,{top:`calc(${s+"px"} + ${l(a?a+"px":`var(--${n}-y-offset, 0px)`)})`,left:`calc(${e+"px"} + ${c(r?r+"px":`var(--${n}-x-offset, 0px)`)})`})}))}))}function g(t){return"none"!==getComputedStyle(t).animationName}function m(t){const e=document.createElement("slot");return e.name=t,e}function b(t){const e=(0,i.n)(!1);return(0,i.e)((()=>{const s=t();s&&((0,i.l)(s,"transitionstart",(()=>e.set(!0))),(0,i.l)(s,"transitionend",(()=>e.set(!1))))})),e}function y(t,e){(0,i.e)((function(){const s=t();if(!s)return;e();const n=new ResizeObserver((0,i.p)(e));return n.observe(s),()=>n.disconnect()}))}function v(t,e,s){y(e,(()=>{const n=t(),r=e();n&&r&&function(t,e,s){const n=e.getBoundingClientRect();for(const e of["top","left","bottom","right"])(0,i.j)(t,`--${s}-${e}`,`${n[e]}px`)}(n,r,s)}))}function $(t){const e=w(t),s=function(t){const e=(0,i.n)(!1);return(0,i.e)((()=>{const s=t();s?((0,i.l)(s,"focusin",(()=>e.set(!0))),(0,i.l)(s,"focusout",(()=>e.set(!1)))):e.set(!1)})),e}(t);return(0,i.q)((()=>e()||s()))}function w(t){const e=(0,i.n)(!1);return(0,i.e)((()=>{const s=t();s?((0,i.l)(s,"mouseenter",(()=>e.set(!0))),(0,i.l)(s,"mouseleave",(()=>e.set(!1)))):e.set(!1)})),e}},5390:(t,e,s)=>{s.d(e,{$:()=>ve,D:()=>Ot,E:()=>Rt,F:()=>gt,G:()=>Ft,I:()=>Ht,J:()=>Wt,K:()=>Kt,M:()=>Ie,N:()=>Yt,O:()=>zt,P:()=>Bt,Q:()=>Ut,R:()=>Jt,S:()=>re,T:()=>ce,U:()=>Xt,W:()=>_t,_:()=>de,a:()=>Lt,a0:()=>$e,a2:()=>we,a3:()=>ke,a4:()=>Se,a5:()=>De,a6:()=>Ne,a8:()=>He,a9:()=>ze,aa:()=>Xe,ab:()=>ts,ac:()=>ns,ad:()=>hs,ae:()=>ds,af:()=>ps,ag:()=>bs,ah:()=>ys,ai:()=>$s,aj:()=>ws,ak:()=>ks,b:()=>kt,t:()=>Mt});var i=s(5242),n=s(3493),r=s(555),a=s(2186),o=s(5521);Symbol(0);var h;class c extends i.R{constructor(){super(...arguments),this.r=[],this[h]=!1}get length(){return this.r.length}get readonly(){return this[n.L.Zb]}toArray(){return[...this.r]}[(h=n.L.Zb,Symbol.iterator)](){return this.r.values()}[n.L.oa](t,e){const s=this.r.length;""+s in this||Object.defineProperty(this,s,{get(){return this.r[s]}}),this.r.includes(t)||(this.r.push(t),this.dispatchEvent(new i.D("add",{detail:t,trigger:e})))}[n.L.Yb](t,e){const s=this.r.indexOf(t);s>=0&&(this[n.L.oe]?.(t,e),this.r.splice(s,1),this.dispatchEvent(new i.D("remove",{detail:t,trigger:e})))}[n.L.H](t){for(const e of[...this.r])this[n.L.Yb](e,t);this.r=[],this[n.L.Mc](!1,t),this[n.L.ne]?.()}[n.L.Mc](t,e){this[n.L.Zb]!==t&&(this[n.L.Zb]=t,this.dispatchEvent(new i.D("readonly-change",{detail:t,trigger:e})))}}const l=new i.S({artist:"",audioTrack:null,audioTracks:[],autoPlay:!1,autoPlayError:null,buffered:new a.T,canLoad:!1,canLoadPoster:!1,canFullscreen:!1,canOrientScreen:(0,r.d)(),canPictureInPicture:!1,canPlay:!1,clipStartTime:0,clipEndTime:0,controls:!1,controlsVisible:!1,crossOrigin:null,ended:!1,error:null,fullscreen:!1,loop:!1,logLevel:"silent",mediaType:"unknown",muted:!1,paused:!0,played:new a.T,playing:!1,playsInline:!1,pictureInPicture:!1,preload:"metadata",playbackRate:1,qualities:[],quality:null,autoQuality:!1,canSetQuality:!0,canSetPlaybackRate:!0,canSetVolume:!1,seekable:new a.T,seeking:!1,source:{src:"",type:""},sources:[],started:!1,textTracks:[],textTrack:null,get hasCaptions(){return this.textTracks.filter(o.i).length>0},volume:1,waiting:!1,realCurrentTime:0,get currentTime(){return this.clipStartTime>0?Math.max(0,Math.min(this.realCurrentTime-this.clipStartTime,this.duration)):this.realCurrentTime},providedDuration:-1,intrinsicDuration:0,get realDuration(){return this.providedDuration>0?this.providedDuration:this.intrinsicDuration},get duration(){return this.clipEndTime>0?this.clipEndTime-this.clipStartTime:Math.max(0,this.realDuration-this.clipStartTime)},get title(){return this.providedTitle||this.inferredTitle},get poster(){return this.providedPoster||this.inferredPoster},get viewType(){return"unknown"!==this.providedViewType?this.providedViewType:this.inferredViewType},get streamType(){return"unknown"!==this.providedStreamType?this.providedStreamType:this.inferredStreamType},get currentSrc(){return this.source},get bufferedStart(){const t=(0,a.g)(this.buffered)??0;return Math.max(0,t-this.clipStartTime)},get bufferedEnd(){const t=(0,a.a)(this.buffered)??0;return Math.min(this.duration,Math.max(0,t-this.clipStartTime))},get seekableStart(){const t=(0,a.g)(this.seekable)??0;return Math.max(0,t-this.clipStartTime)},get seekableEnd(){const t=this.canPlay?(0,a.a)(this.seekable)??1/0:0;return this.clipEndTime>0?Math.max(this.clipEndTime,Math.max(0,t-this.clipStartTime)):t},get seekableWindow(){return Math.max(0,this.seekableEnd-this.seekableStart)},canAirPlay:!1,canGoogleCast:!1,remotePlaybackState:"disconnected",remotePlaybackType:"none",remotePlaybackLoader:null,remotePlaybackInfo:null,get isAirPlayConnected(){return"airplay"===this.remotePlaybackType&&"connected"===this.remotePlaybackState},get isGoogleCastConnected(){return"google-cast"===this.remotePlaybackType&&"connected"===this.remotePlaybackState},pointer:"fine",orientation:"landscape",width:0,height:0,mediaWidth:0,mediaHeight:0,lastKeyboardAction:null,userBehindLiveEdge:!1,liveEdgeTolerance:10,minLiveDVRWindow:60,get canSeek(){return/unknown|on-demand|:dvr/.test(this.streamType)&&Number.isFinite(this.seekableWindow)&&(!this.live||/:dvr/.test(this.streamType)&&this.seekableWindow>=this.minLiveDVRWindow)},get live(){return this.streamType.includes("live")||!Number.isFinite(this.realDuration)},get liveEdgeStart(){return this.live&&Number.isFinite(this.seekableEnd)?Math.max(0,(this.liveSyncPosition??this.seekableEnd)-this.liveEdgeTolerance):0},get liveEdge(){return this.live&&(!this.canSeek||!this.userBehindLiveEdge&&this.currentTime>=this.liveEdgeStart)},get liveEdgeWindow(){return this.live&&Number.isFinite(this.seekableEnd)?this.seekableEnd-this.liveEdgeStart:0},autoPlaying:!1,providedTitle:"",inferredTitle:"",providedPoster:"",inferredPoster:"",inferredViewType:"unknown",providedViewType:"unknown",providedStreamType:"unknown",inferredStreamType:"unknown",liveSyncPosition:null}),u=new Set(["audioTrack","audioTracks","autoPlayError","autoPlaying","autoQuality","buffered","canPlay","ended","error","inferredPoster","inferredStreamType","inferredTitle","intrinsicDuration","liveSyncPosition","paused","played","playing","qualities","quality","realCurrentTime","seekable","seeking","started","userBehindLiveEdge","waiting"]);var d=s(1322),p=s(1801),f=s(8900),g=s(5181),m=s(9256),b=s(7203),y={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},v=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],$=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],w=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],k="undefined"!=typeof window&&void 0!==window.document?window.document:{},T="fullscreenEnabled"in k&&Object.keys(y)||v[0]in k&&v||$[0]in k&&$||w[0]in k&&w||[],x={requestFullscreen:function(t){return t[T[y.requestFullscreen]]()},requestFullscreenFunction:function(t){return t[T[y.requestFullscreen]]},get exitFullscreen(){return k[T[y.exitFullscreen]].bind(k)},get fullscreenPseudoClass(){return":"+T[y.fullscreen]},addEventListener:function(t,e,s){return k.addEventListener(T[y[t]],e,s)},removeEventListener:function(t,e,s){return k.removeEventListener(T[y[t]],e,s)},get fullscreenEnabled(){return Boolean(k[T[y.fullscreenEnabled]])},set fullscreenEnabled(t){},get fullscreenElement(){return k[T[y.fullscreenElement]]},set fullscreenElement(t){},get onfullscreenchange(){return k[("on"+T[y.fullscreenchange]).toLowerCase()]},set onfullscreenchange(t){return k[("on"+T[y.fullscreenchange]).toLowerCase()]=t},get onfullscreenerror(){return k[("on"+T[y.fullscreenerror]).toLowerCase()]},set onfullscreenerror(t){return k[("on"+T[y.fullscreenerror]).toLowerCase()]=t}};const P=x.fullscreenEnabled;class S extends i.a1{constructor(){super(...arguments),this.ub=!1,this.Nc=!1}get active(){return this.Nc}get supported(){return P}onConnect(){(0,i.l)(x,"fullscreenchange",this.Oc.bind(this)),(0,i.l)(x,"fullscreenerror",this._b.bind(this)),(0,i.o)(this.ya.bind(this))}async ya(){P&&await this.exit()}Oc(t){const e=C(this.el);e!==this.Nc&&(e||(this.ub=!1),this.Nc=e,this.dispatch("fullscreen-change",{detail:e,trigger:t}))}_b(t){this.ub&&(this.dispatch("fullscreen-error",{detail:null,trigger:t}),this.ub=!1)}async enter(){try{if(this.ub=!0,!this.el||C(this.el))return;return E(),x.requestFullscreen(this.el)}catch(t){throw this.ub=!1,t}}async exit(){if(this.el&&C(this.el))return E(),x.exitFullscreen()}}function C(t){if(x.fullscreenElement===t)return!0;try{return t.matches(x.fullscreenPseudoClass)}catch(t){return!1}}function E(){if(!P)throw Error("[vidstack] no fullscreen API")}class A extends i.a1{constructor(){super(...arguments),this.vb=(0,i.n)(this.qe()),this.Ra=(0,i.n)(!1)}get type(){return this.vb()}get locked(){return this.Ra()}get portrait(){return this.vb().startsWith("portrait")}get landscape(){return this.vb().startsWith("landscape")}static{this.supported=(0,r.d)()}get supported(){return A.supported}onConnect(){if(this.supported)(0,i.l)(screen.orientation,"change",this.re.bind(this));else{const t=window.matchMedia("(orientation: landscape)");t.onchange=this.re.bind(this),(0,i.o)((()=>t.onchange=null))}(0,i.o)(this.ya.bind(this))}async ya(){this.supported&&this.Ra()&&await this.unlock()}re(t){this.vb.set(this.qe()),this.dispatch("orientation-change",{detail:{orientation:(0,i.u)(this.vb),lock:this.$b},trigger:t})}async lock(t){(0,i.u)(this.Ra)||this.$b===t||(this.se(),await screen.orientation.lock(t),this.Ra.set(!0),this.$b=t)}async unlock(){(0,i.u)(this.Ra)&&(this.se(),this.$b=void 0,await screen.orientation.unlock(),this.Ra.set(!1))}se(){if(!this.supported)throw Error("[vidstack] no orientation API")}qe(){return this.supported?window.screen.orientation.type:window.innerWidth>=window.innerHeight?"landscape-primary":"portrait-primary"}}class j{constructor(t=void 0){this.tb=t,this.A=null,this.aa=null,this.Pc=-1}setTarget(t){this.A=t}getPlayer(t){return this.aa||(t??this.A)?.dispatchEvent(new i.D("find-media-player",{detail:t=>{this.aa=t},bubbles:!0,composed:!0})),this.aa}setPlayer(t){this.aa=t}startLoading(t){this.s("media-start-loading",t)}startLoadingPoster(t){this.s("media-poster-start-loading",t)}requestAirPlay(t){this.s("media-airplay-request",t)}requestGoogleCast(t){this.s("media-google-cast-request",t)}play(t){this.s("media-play-request",t)}pause(t){this.s("media-pause-request",t)}mute(t){this.s("media-mute-request",t)}unmute(t){this.s("media-unmute-request",t)}enterFullscreen(t,e){this.s("media-enter-fullscreen-request",e,t)}exitFullscreen(t,e){this.s("media-exit-fullscreen-request",e,t)}lockScreenOrientation(t,e){this.s("media-orientation-lock-request",e,t)}unlockScreenOrientation(t){this.s("media-orientation-unlock-request",t)}enterPictureInPicture(t){this.s("media-enter-pip-request",t)}exitPictureInPicture(t){this.s("media-exit-pip-request",t)}seeking(t,e){this.s("media-seeking-request",e,t)}seek(t,e){this.s("media-seek-request",e,t)}seekToLiveEdge(t){this.s("media-live-edge-request",t)}changeVolume(t,e){this.s("media-volume-change-request",e,Math.max(0,Math.min(1,t)))}changeAudioTrack(t,e){this.s("media-audio-track-change-request",e,t)}changeQuality(t,e){this.s("media-quality-change-request",e,t)}requestAutoQuality(t){this.changeQuality(-1,t)}changeTextTrackMode(t,e,s){this.s("media-text-track-change-request",s,{index:t,mode:e})}changePlaybackRate(t,e){this.s("media-rate-change-request",e,t)}resumeControls(t){this.s("media-resume-controls-request",t)}pauseControls(t){this.s("media-pause-controls-request",t)}togglePaused(t){const e=this.getPlayer(t?.target);e&&(e.state.paused?this.play(t):this.pause(t))}toggleControls(t){const e=this.getPlayer(t?.target);e&&(e.controls.showing?e.controls.hide(0,t):e.controls.show(0,t))}toggleMuted(t){const e=this.getPlayer(t?.target);e&&(e.state.muted?this.unmute(t):this.mute(t))}toggleFullscreen(t,e){const s=this.getPlayer(e?.target);s&&(s.state.fullscreen?this.exitFullscreen(t,e):this.enterFullscreen(t,e))}togglePictureInPicture(t){const e=this.getPlayer(t?.target);e&&(e.state.pictureInPicture?this.exitPictureInPicture(t):this.enterPictureInPicture(t))}disableCaptions(t){const e=this.getPlayer(t?.target);if(!e)return;const s=e.state.textTracks,i=e.state.textTrack;if(i){const e=s.indexOf(i);this.changeTextTrackMode(e,"disabled",t)}}toggleCaptions(t){const e=this.getPlayer(t?.target);if(!e)return;const s=e.state.textTracks,i=e.state.textTrack;if(i){const e=s.indexOf(i);this.changeTextTrackMode(e,"disabled",t),this.Pc=e}else{let e=this.Pc;s[e]&&(0,o.i)(s[e])||(e=-1),-1===e&&(e=s.findIndex((t=>(0,o.i)(t)&&t.default))),-1===e&&(e=s.findIndex((t=>(0,o.i)(t)))),e>=0&&this.changeTextTrackMode(e,"showing",t),this.Pc=-1}}s(t,e,s){const n=new i.D(t,{bubbles:!0,composed:!0,cancelable:!0,detail:s,trigger:e});let r=e?.target||null;r&&r instanceof i.C&&(r=r.el);const a=!r||r===document||r===window||r===document.body||this.aa?.el&&r instanceof Node&&!this.aa.el.contains(r);r=a?this.A??this.getPlayer()?.el:r??this.A,this.aa&&("media-play-request"!==t||this.aa.state.canLoad)?this.aa.canPlayQueue.k(t,(()=>r?.dispatchEvent(n))):r?.dispatchEvent(n)}za(t){}}class L extends i.a1{}class O extends L{constructor(){super(...arguments),this.Qc=-2,this.Xa=!1,this.ze=(0,i.n)(!1),this.Rc=(0,i.n)(!1),this.wb=null,this.defaultDelay=2e3}get hideOnMouseLeave(){const{hideControlsOnMouseLeave:t}=this.$props;return this.ze()||t()}set hideOnMouseLeave(t){this.ze.set(t)}get showing(){return this.$state.controlsVisible()}show(t=0,e){this.Sc(),this.Xa||this.bc(!0,t,e)}hide(t=this.defaultDelay,e){this.Sc(),this.Xa||this.bc(!1,t,e)}pause(t){this.Xa=!0,this.Sc(),this.bc(!0,0,t)}resume(t){this.Xa=!1,this.$state.paused()||this.bc(!1,this.defaultDelay,t)}onConnect(){(0,i.e)(this.bg.bind(this)),(0,i.e)(this.Tc.bind(this));const t=this.xb.bind(this),e=this.Aa.bind(this);this.listen("can-play",(t=>this.show(0,t))),this.listen("play",t),this.listen("pause",e),this.listen("auto-play-fail",e)}bg(){const{started:t,pointer:e,paused:s}=this.$state;if(!t()||"fine"!==e())return;const n=this.hideOnMouseLeave;n&&this.Rc()||(0,i.e)((()=>{s()||this.listen("pointermove",this.Ae.bind(this))})),n&&(this.listen("mouseenter",this.cg.bind(this)),this.listen("mouseleave",this.dg.bind(this)))}Tc(){const{paused:t,started:e,autoPlayError:s}=this.$state;if(t()||s()&&!e())return;const n=this.Ae.bind(this);(0,i.e)((()=>{const t=["coarse"===this.$state.pointer()?"touchend":"pointerup","keydown"];for(const e of t)this.listen(e,n,{passive:!1})}))}xb(t){this.show(0,t),this.hide(void 0,t)}Aa(t){this.show(0,t)}cg(t){this.Rc.set(!1),this.show(0,t),this.hide(void 0,t)}dg(t){this.Rc.set(!0),this.hide(0,t)}Sc(){window.clearTimeout(this.Qc),this.Qc=-1}Ae(t){t.MEDIA_GESTURE||this.Xa||(0,p.i)(t)||((0,i.K)(t)&&("Escape"===t.key?(this.el?.focus(),this.wb=null):this.wb&&(t.preventDefault(),requestAnimationFrame((()=>{this.wb?.focus(),this.wb=null})))),this.show(0,t),this.hide(this.defaultDelay,t))}bc(t,e,s){0!==e?this.Qc=window.setTimeout((()=>{this.scope&&this.B(t&&!this.Xa,s)}),e):this.B(t,s)}B(t,e){this.$state.controlsVisible()!==t&&(this.$state.controlsVisible.set(t),!t&&document.activeElement&&this.el?.contains(document.activeElement)&&(this.wb=document.activeElement,requestAnimationFrame((()=>this.el?.focus()))),this.dispatch("controls-change",{detail:t,trigger:e}))}}var q=function(t,e,s){var i=null,n=null,r=s&&s.leading,a=s&&s.trailing;null==r&&(r=!0),null==a&&(a=!r),1==r&&(a=!1);var o=function(){i&&(clearTimeout(i),i=null)},h=function(){var s=r&&!i,o=this,h=arguments;if(n=function(){return t.apply(o,h)},i||(i=setTimeout((function(){if(i=null,a)return n()}),e)),s)return s=!1,n()};return h.cancel=o,h.flush=function(){var t=n;o(),t&&t()},h};class M{constructor(){this.playerId="vds-player",this.mediaId=null,this.Qk={volume:null,muted:null,time:null,lang:null,captions:null,rate:null,quality:null},this.saveTime=q((()=>{if(!this.mediaId)return;const t=(this.Qk.time??0).toString();localStorage.setItem(this.mediaId,t)}),1e3)}async getVolume(){return this.Qk.volume}async setVolume(t){this.Qk.volume=t,this.save()}async getMuted(){return this.Qk.muted}async setMuted(t){this.Qk.muted=t,this.save()}async getTime(){return this.Qk.time}async setTime(t){this.Qk.time=t,this.saveTime()}async getLang(){return this.Qk.lang}async setLang(t){this.Qk.lang=t,this.save()}async getCaptions(){return this.Qk.captions}async setCaptions(t){this.Qk.captions=t,this.save()}async getPlaybackRate(){return this.Qk.rate}async setPlaybackRate(t){this.Qk.rate=t,this.save()}async getVideoQuality(){return this.Qk.quality}async setVideoQuality(t){this.Qk.quality=t,this.save()}onChange(t,e,s="vds-player"){const i=s?localStorage.getItem(s):null,n=e?localStorage.getItem(e):null;this.playerId=s,this.mediaId=e,this.Qk={volume:null,muted:null,lang:null,captions:null,rate:null,quality:null,...i?JSON.parse(i):{},time:n?+n:null}}save(){if(!this.playerId)return;const t=JSON.stringify({...this.Qk,time:void 0});localStorage.setItem(this.playerId,t)}}class D{constructor(){this.priority=0,this.Be=!0,this.m=null,this.z=null,this.yb=new Set}canRender(t,e){return!!e}attach(t){this.m=t,t&&(t.textTracks.onchange=this.B.bind(this))}addTrack(t){this.yb.add(t),this.eg(t)}removeTrack(t){t[o.b.T]?.remove?.(),t[o.b.T]=null,this.yb.delete(t)}changeTrack(t){const e=t?.[o.b.T];e&&"showing"!==e.track.mode&&(e.track.mode="showing"),this.z=t}setDisplay(t){this.Be=t,this.B()}detach(){this.m&&(this.m.textTracks.onchange=null);for(const t of this.yb)this.removeTrack(t);this.yb.clear(),this.m=null,this.z=null}eg(t){if(!this.m)return;const e=t[o.b.T]??=this.fg(t);e instanceof HTMLElement&&(this.m.append(e),e.track.mode=e.default?"showing":"hidden")}fg(t){const e=document.createElement("track"),s=t.default||"showing"===t.mode,i=t.src&&"vtt"===t.type;return e.id=t.id,e.src=i?t.src:"https://cdn.jsdelivr.net/npm/vidstack@next/empty.vtt",e.label=t.label,e.kind=t.kind,e.default=s,t.language&&(e.srclang=t.language),s&&!i&&this.Ce(t,e.track),e}Ce(t,e){if(!(t.src&&"vtt"===t.type||e.cues?.length))for(const s of t.cues)e.addCue(s)}B(t){for(const e of this.yb){const s=e[o.b.T]?.track;if(!s)continue;if(!this.Be){s.mode="disabled";continue}const i="showing"===s.mode;i&&this.Ce(e,s),e.setMode(i?"showing":"disabled",t)}}}class R{constructor(t){this.a=t,this.m=null,this.cc=[],this.De=!1,this.ba=null,this.Ba=null;const e=t.textTracks;this.Uc=e,(0,i.e)(this.Vc.bind(this)),(0,i.o)(this.Ee.bind(this)),(0,i.l)(e,"add",this.Wc.bind(this)),(0,i.l)(e,"remove",this.gg.bind(this)),(0,i.l)(e,"mode-change",this.ea.bind(this))}Vc(){const{$state:t,$iosControls:e}=this.a;this.De=t.controls()||e(),this.ea()}add(t){this.cc.push(t),this.ea()}remove(t){t.detach(),this.cc.splice(this.cc.indexOf(t),1),this.ea()}Fe(t){requestAnimationFrame((()=>{if(this.m=t,t){this.ba=new D,this.ba.attach(t);for(const t of this.Uc)this.Ge(t)}this.ea()}))}Ge(t){(0,o.i)(t)&&this.ba?.addTrack(t)}hg(t){(0,o.i)(t)&&this.ba?.removeTrack(t)}Wc(t){this.Ge(t.detail)}gg(t){this.hg(t.detail)}ea(){const t=this.Uc.selected;if(this.m&&(this.De||t?.[o.b.te]))return this.Ba?.changeTrack(null),this.ba?.setDisplay(!0),void this.ba?.changeTrack(t);if(this.ba?.setDisplay(!1),this.ba?.changeTrack(null),!t)return void this.Ba?.changeTrack(null);const e=this.cc.sort(((t,e)=>t.priority-e.priority)).find((e=>e.canRender(t,this.m)));this.Ba!==e&&(this.Ba?.detach(),e?.attach(this.m),this.Ba=e??null),e?.changeTrack(t)}Ee(){this.ba?.detach(),this.ba=null,this.Ba?.detach(),this.Ba=null}}var F=function(t,e,s){var i=null,n=null,r=function(){i&&(clearTimeout(i),n=null,i=null)},a=function(){if(!e)return t.apply(this,arguments);var a=this,o=arguments,h=s&&!i;return r(),n=function(){t.apply(a,o)},i=setTimeout((function(){if(i=null,!h){var t=n;return n=null,t()}}),e),h?n():void 0};return a.cancel=r,a.flush=function(){var t=n;r(),t&&t()},a};class I extends c{constructor(){super(),this.P=!1,this.dc={},this.Sk=null,this.Rk=null,this.un=F((async()=>{if(!this.P)return;!this.Rk&&this.Sk&&(this.Rk=await this.Sk.getLang());const t=await(this.Sk?.getCaptions()),e=[["captions","subtitles"],"chapters","descriptions","metadata"];for(const s of e){const e=this.getByKind(s);if(e.find((t=>"showing"===t.mode)))continue;const n=this.Rk?e.find((t=>t.language===this.Rk)):null,r=(0,i.r)(s)?this.dc[s.find((t=>this.dc[t]))||""]:this.dc[s],a=n??r,h=a&&(0,o.i)(a);!a||h&&!1===t||(a.mode="showing",h&&this.vn(a))}}),300),this.Je=this.ig.bind(this)}get selected(){return this.r.find((t=>"showing"===t.mode&&(0,o.i)(t)))??null}get preferredLang(){return this.Rk}set preferredLang(t){this.Rk=t,this.tn(t)}add(t,e){const s=t instanceof o.T?t:new o.T(t),i="captions"===t.kind||"subtitles"===t.kind?"captions":t.kind;return this.dc[i]&&t.default&&delete t.default,s.addEventListener("mode-change",this.Je),this[n.L.oa](s,e),s[o.b.al]=this[o.b.al],this.P&&s[o.b.P](),t.default&&(this.dc[i]=s),this.un(),this}remove(t,e){if(this.r.includes(t))return t===this.dc[t.kind]&&delete this.dc[t.kind],t.mode="disabled",t[o.b.Ua]=null,t.removeEventListener("mode-change",this.Je),this[n.L.Yb](t,e),this}clear(t){for(const e of[...this.r])this.remove(e,t);return this}getById(t){return this.r.find((e=>e.id===t))??null}getByKind(t){const e=Array.isArray(t)?t:[t];return this.r.filter((t=>e.includes(t.kind)))}[o.b.P](){if(!this.P){for(const t of this.r)t[o.b.P]();this.P=!0,this.un()}}ig(t){const e=t.detail;if(this.Sk&&(0,o.i)(e)&&"disabled"!==e.mode&&this.vn(e),"showing"===e.mode){const t=(0,o.i)(e)?["captions","subtitles"]:[e.kind];for(const s of this.r)"showing"===s.mode&&s!=e&&t.includes(s.kind)&&(s.mode="disabled")}this.dispatchEvent(new i.D("mode-change",{detail:t.detail,trigger:t}))}vn(t){this.tn(t.language),this.Sk?.setCaptions?.("showing"===t.mode)}tn(t){this.Sk?.setLang?.(this.Rk=t)}setStorage(t){this.Sk=t}}const N=Symbol(0);class V extends c{get selected(){return this.r.find((t=>t.selected))??null}get selectedIndex(){return this.r.findIndex((t=>t.selected))}[n.L.oe](t,e){this[n.L.pa](t,!1,e)}[n.L.oa](t,e){t[N]=!1,Object.defineProperty(t,"selected",{get(){return this[N]},set:e=>{this.readonly||(this[n.L.pe]?.(),this[n.L.pa](t,e))}}),super[n.L.oa](t,e)}[n.L.pa](t,e,s){if(e===t?.[N])return;const n=this.selected;t&&(t[N]=e),(e?n!==t:n===t)&&(n&&(n[N]=!1),this.dispatchEvent(new i.D("change",{detail:{prev:n,current:this.selected},trigger:s})))}}class H extends V{getById(t){return""===t?null:this.r.find((e=>e.id===t))??null}}class Q extends V{constructor(){super(...arguments),this.fc=!1,this.switch="current"}get auto(){return this.fc||this.readonly}[n.L.pe](){this[f.Q.Ya](!1)}[n.L.ne](t){this[f.Q.Ya](!1,t)}autoSelect(t){this.readonly||this.fc||!this[f.Q.Za]||(this[f.Q.Za]?.(),this[f.Q.Ya](!0,t))}[f.Q.Ya](t,e){this.fc!==t&&(this.fc=t,this.dispatchEvent(new i.D("auto-change",{detail:t,trigger:e})))}}const W=new Set(["Shift","Alt","Meta","Control"]),K='input, textarea, select, [contenteditable], [role^="menuitem"], [role="timer"]';class B extends L{constructor(t){super(),this.a=t,this._a=null}onConnect(){(0,i.e)(this.mg.bind(this))}mg(){const{keyDisabled:t,keyTarget:e}=this.$props;if(t())return;const s="player"===e()?this.el:document,n=(0,i.n)(!1);s===this.el?(this.listen("focusin",(()=>n.set(!0))),this.listen("focusout",(t=>{this.el.contains(t.target)||n.set(!1)}))):((0,i.u)(n)||n.set(document.querySelector("[data-media-player]")===this.el),(0,i.l)(document,"focusin",(t=>{const e=t.composedPath().find((t=>t instanceof Element&&"media-player"===t.localName));void 0!==e&&n.set(this.el===e)}))),(0,i.e)((()=>{n()&&((0,i.l)(s,"keyup",this.zb.bind(this)),(0,i.l)(s,"keydown",this.Ab.bind(this)),(0,i.l)(s,"keydown",this.ng.bind(this),{capture:!0}))}))}zb(t){const e=document.activeElement;if(!t.key||!this.$state.canSeek()||e?.matches(K))return;let{method:s,value:n}=this.Zc(t);if(!(0,i.t)(n)&&!(0,i.r)(n))return n?.onKeyUp?.({event:t,player:this.a.player,remote:this.a.remote}),void n?.callback?.(t,this.a.remote);if(s?.startsWith("seek")&&(t.preventDefault(),t.stopPropagation(),this._a?(this.Ne(t,"seekForward"===s),this._a=null):(this.a.remote.seek(this.gc,t),this.gc=void 0)),s?.startsWith("volume")){const e=this.el.querySelector("[data-media-volume-slider]");e?.dispatchEvent(new KeyboardEvent("keyup",{key:"volumeUp"===s?"Up":"Down",shiftKey:t.shiftKey,trigger:t}))}}Ab(t){if(!t.key||W.has(t.key))return;const e=document.activeElement;if(e?.matches(K)||(0,i.c)(t)&&e?.matches('button, [role="button"]'))return;let{method:s,value:n}=this.Zc(t),r=!t.metaKey&&/^[0-9]$/.test(t.key);if(!(0,i.t)(n)&&!(0,i.r)(n)&&!r)return n?.onKeyDown?.({event:t,player:this.a.player,remote:this.a.remote}),void n?.callback?.(t,this.a.remote);if(!s&&r)return t.preventDefault(),t.stopPropagation(),void this.a.remote.seek(this.$state.duration()/10*Number(t.key),t);if(s){switch(t.preventDefault(),t.stopPropagation(),s){case"seekForward":case"seekBackward":this.qa(t,s,"seekForward"===s);break;case"volumeUp":case"volumeDown":const e=this.el.querySelector("[data-media-volume-slider]");if(e)e.dispatchEvent(new KeyboardEvent("keydown",{key:"volumeUp"===s?"Up":"Down",shiftKey:t.shiftKey,trigger:t}));else{const e=t.shiftKey?.1:.05;this.a.remote.changeVolume(this.$state.volume()+("volumeUp"===s?+e:-e),t)}break;case"toggleFullscreen":this.a.remote.toggleFullscreen("prefer-media",t);break;case"speedUp":case"slowDown":const i=this.$state.playbackRate();this.a.remote.changePlaybackRate(Math.max(.25,Math.min(2,i+("speedUp"===s?.25:-.25))),t);break;default:this.a.remote[s]?.(t)}this.$state.lastKeyboardAction.set({action:s,event:t})}}ng(t){var e;(function(t){return t instanceof HTMLAudioElement}(e=t.target)||function(t){return t instanceof HTMLVideoElement}(e))&&this.Zc(t).method&&t.preventDefault()}Zc(t){const e={...this.$props.keyShortcuts(),...this.a.ariaKeys},s=Object.keys(e).find((s=>{const n=e[s],r=(0,i.r)(n)?n.join(" "):(0,i.t)(n)?n:n?.keys;return((0,i.r)(r)?r:r?.split(" "))?.some((e=>function(t){return t.replace(/Shift\+(\d)/g,((t,e)=>Y[e-1]))}(e).replace(/Control/g,"Ctrl").split("+").every((e=>W.has(e)?t[e.toLowerCase()+"Key"]:t.key===e.replace("Space"," ")))))}));return{method:s,value:s?e[s]:null}}og(t,e){const s=t.shiftKey?10:5;return this.gc=Math.max(0,Math.min((this.gc??this.$state.currentTime())+("seekForward"===e?+s:-s),this.$state.duration()))}Ne(t,e){this._a?.dispatchEvent(new KeyboardEvent(t.type,{key:e?"Right":"Left",shiftKey:t.shiftKey,trigger:t}))}qa(t,e,s){this.$state.canSeek()&&(this._a||(this._a=this.el.querySelector("[data-media-time-slider]")),this._a?this.Ne(t,s):this.a.remote.seeking(this.og(t,e),t))}}const Y=["!","@","#","$","%","^","&","*","(",")"];class z extends i.a1{constructor(t){super(),this._c=t}onAttach(t){const{$props:e,ariaKeys:s}=(0,d.u)(),n=t.getAttribute("aria-keyshortcuts");if(n)return s[this._c]=n,void(0,i.o)((()=>{delete s[this._c]}));const r=e.keyShortcuts()[this._c];if(r){const e=(0,i.r)(r)?r.join(" "):(0,i.t)(r)?r:r?.keys;t.setAttribute("aria-keyshortcuts",(0,i.r)(e)?e.join(" "):e)}}}class U{constructor(){this.name="audio"}canPlay(t){return!!(0,m.i)(t)&&(!(0,i.t)(t.src)||"?"===t.type||(0,r.j)(this.target,t.type))}mediaType(){return"audio"}async load(t){return new((await s.e(2337).then(s.bind(s,2337))).AudioProvider)(this.target,t)}}class J{constructor(){this.name="video"}canPlay(t){return!!(0,m.e)(t)&&(!(0,i.t)(t.src)||"?"===t.type||(0,r.k)(this.target,t.type))}mediaType(){return"video"}async load(t){return new((await s.e(9324).then(s.bind(s,9324))).VideoProvider)(this.target,t)}}class X extends J{constructor(){super(...arguments),this.name="hls"}static{this.supported=(0,r.i)()}canPlay(t){return X.supported&&(0,m.f)(t)}async load(t){return new((await s.e(1186).then(s.bind(s,1186))).HLSProvider)(this.target,t)}}class _{constructor(){this.name="vimeo"}preconnect(){const t=["https://i.vimeocdn.com","https://f.vimeocdn.com","https://fresnel.vimeocdn.com"];for(const e of t)(0,o.p)(e)}canPlay(t){return(0,i.t)(t.src)&&"video/vimeo"===t.type}mediaType(){return"video"}async load(t){return new((await s.e(1423).then(s.bind(s,1423))).VimeoProvider)(this.target,t)}async loadPoster(t,e,n){const{resolveVimeoVideoId:r,getVimeoVideoInfo:a}=await s.e(4672).then(s.bind(s,4672));if(!(0,i.t)(t.src))return null;const{videoId:o}=r(t.src);return o?a(o,n).then((t=>t?t.poster:null)):null}}class G{constructor(){this.name="youtube"}preconnect(){const t=["https://www.google.com","https://i.ytimg.com","https://googleads.g.doubleclick.net","https://static.doubleclick.net"];for(const e of t)(0,o.p)(e)}canPlay(t){return(0,i.t)(t.src)&&"video/youtube"===t.type}mediaType(){return"video"}async load(t){return new((await s.e(8126).then(s.bind(s,8126))).YouTubeProvider)(this.target,t)}async loadPoster(t,e,n){const{findYouTubePoster:r,resolveYouTubeVideoId:a}=await s.e(9627).then(s.bind(s,9627)),o=(0,i.t)(t.src)&&a(t.src);return o?r(o,n):null}}const Z=Symbol(0),tt=["autoPlay","canAirPlay","canFullscreen","canGoogleCast","canLoad","canLoadPoster","canPictureInPicture","canPlay","canSeek","ended","fullscreen","isAirPlayConnected","isGoogleCastConnected","live","liveEdge","loop","mediaType","muted","paused","pictureInPicture","playing","playsInline","remotePlaybackState","remotePlaybackType","seeking","started","streamType","viewType","waiting"],et={artist:"",autoplay:!1,autoPlay:!1,clipStartTime:0,clipEndTime:0,controls:!1,currentTime:0,crossorigin:null,crossOrigin:null,duration:-1,fullscreenOrientation:"landscape",googleCast:{},load:"visible",posterLoad:"visible",logLevel:"silent",loop:!1,muted:!1,paused:!0,playsinline:!1,playsInline:!1,playbackRate:1,poster:"",preload:"metadata",preferNativeHLS:!1,src:"",title:"",controlsDelay:2e3,hideControlsOnMouseLeave:!1,viewType:"unknown",streamType:"unknown",volume:1,liveEdgeTolerance:10,minLiveDVRWindow:60,keyDisabled:!1,keyTarget:"player",keyShortcuts:{togglePaused:"k Space",toggleMuted:"m",toggleFullscreen:"f",togglePictureInPicture:"i",toggleCaptions:"c",seekBackward:"j J ArrowLeft",seekForward:"l L ArrowRight",volumeUp:"ArrowUp",volumeDown:"ArrowDown",speedUp:">",slowDown:"<"},storage:null};class st extends L{constructor(t,e){super(),this.vb=t,this.Ca=e}async onAttach(t){const e=this.$props[this.vb]();if("eager"===e)requestAnimationFrame(this.Ca);else if("idle"===e)(0,i.a2)(this.Ca);else if("visible"===e){let e,s=new IntersectionObserver((t=>{this.scope&&t[0].isIntersecting&&(e?.(),e=void 0,this.Ca())}));s.observe(t),e=(0,i.o)((()=>s.disconnect()))}}}class it{constructor(t,e){this.X=t,this.a=e,this.c=(t,...e)=>{this.X(new i.D(t,{detail:e?.[0],trigger:e?.[1]}))}}async jc(t,e){return(0,i.O)((async()=>{this.a;const{autoPlay:s,canPlay:n,started:r,duration:a,seekable:o,buffered:h,remotePlaybackInfo:c,playsInline:l}=this.a.$state;if(n())return;const u={duration:t?.duration??a(),seekable:t?.seekable??o(),buffered:t?.buffered??h(),provider:this.a.$provider()};this.c("can-play",u,e),(0,i.T)();let d=this.a.$provider(),{storage:p,qualities:f}=this.a,{muted:g,volume:m,clipStartTime:b,playbackRate:y}=this.a.$props;const v=c()?.savedState?.currentTime,$=!1===c()?.savedState?.paused,w=v??await(p?.getTime())??b(),k=$||s();d&&(d.setVolume(await(p?.getVolume())??m()),d.setMuted(await(p?.getMuted())??g()),d.setPlaybackRate?.(await(p?.getPlaybackRate())??y()),d.setPlaysInline?.(l()),w>0&&d.setCurrentTime(w));const T=await(p?.getVideoQuality());if(T&&f.length){let t=null,e=1/0;for(const s of f){const i=Math.abs(T.width-s.width)+Math.abs(T.height-s.height)+(T.bitrate?Math.abs(T.bitrate-s.bitrate):0);i<e&&(t=s,e=i)}t&&(t.selected=!0)}n()&&k&&!r()&&await this.oh(e),c.set(null)}))}async oh(t){const{player:e,$state:{autoPlaying:s,muted:n}}=this.a;s.set(!0);const r=new i.D("auto-play-attempt",{trigger:t});try{await e.play(r)}catch(t){}}}class nt{constructor(){this.e=new Map}k(t,e){this.e.set(t,e)}td(t){const e=this.kl(t);return this.e.delete(t),e}kl(t){return this.e.get(t)}qc(t){this.e.delete(t)}pl(){this.e.clear()}}class rt{constructor(){this.Mb=!1,this.Ed=(0,i.A)(),this.e=new Map}get ph(){return this.e.size}get Rj(){return this.Mb}async Sj(){this.Mb||await this.Ed.promise}k(t,e){this.Mb?e():(this.e.delete(t),this.e.set(t,e))}td(t){this.e.get(t)?.(),this.e.delete(t)}Bb(){this.jf(),this.Mb=!0,this.e.size>0&&this.jf()}ra(){this.Mb=!1}H(){this.ra(),this.e.clear(),this.kf()}jf(){for(const t of this.e.keys())this.td(t);this.kf()}kf(){this.Ed.resolve(),this.Ed=(0,i.A)()}}class at extends L{constructor(t,e,s){super(),this.ga=t,this.f=e,this.a=s,this.vk=new rt,this.vd=!1,this.uk=s.$provider,this.Ib=new O,this.rc=new S,this.ta=new A}onAttach(){this.listen("fullscreen-change",this.Oc.bind(this))}onConnect(){const t=Object.getOwnPropertyNames(Object.getPrototypeOf(this)),e=this.qh.bind(this);for(const s of t)s.startsWith("media-")&&this.listen(s,e);this.Mk(),(0,i.e)(this.wk.bind(this)),(0,i.e)(this.rh.bind(this)),(0,i.e)(this.ll.bind(this)),(0,i.e)(this.Ll.bind(this)),(0,i.e)(this.sh.bind(this)),(0,i.e)(this.th.bind(this))}onDestroy(){this.vk.H()}Mk(){const{load:t}=this.$props,{canLoad:e}=this.$state;if("play"!==t()||e())return;const s=this.listen("media-play-request",(t=>{this.Lk(t),s()}))}wk(){const t=this.uk(),e=this.$state.canPlay();return t&&e&&this.vk.Bb(),()=>{this.vk.ra()}}qh(t){t.stopPropagation(),t.defaultPrevented||this[t.type]&&((0,i.u)(this.uk)?this[t.type](t):this.vk.k(t.type,(()=>{(0,i.u)(this.uk)&&this[t.type](t)})))}async sc(t){const{canPlay:e,paused:s,autoPlaying:n}=this.$state;if(!this.Lk(t)&&(0,i.u)(s)){t&&this.f.e.k("media-play-request",t);try{const t=(0,i.u)(this.uk);return ot(t,(0,i.u)(e)),await t.play()}catch(e){const s=this.createEvent("play-fail",{detail:(0,g.c)(e),trigger:t});throw s.autoPlay=n(),this.ga.X(s),e}}}Lk(t){const{load:e}=this.$props,{canLoad:s}=this.$state;if("play"===e()&&!s()){const e=this.createEvent("media-start-loading",{trigger:t});return this.dispatchEvent(e),this.vk.k("media-play-request",(async()=>{try{await this.sc(e)}catch(t){}})),!0}return!1}async ud(t){const{canPlay:e,paused:s}=this.$state;if(!(0,i.u)(s)){t&&this.f.e.k("media-pause-request",t);try{const t=(0,i.u)(this.uk);return ot(t,(0,i.u)(e)),await t.pause()}catch(t){throw this.f.e.qc("media-pause-request"),t}}}Ze(t){const{canPlay:e,live:s,liveEdge:n,canSeek:r,liveSyncPosition:a,seekableEnd:o,userBehindLiveEdge:h}=this.$state;if(h.set(!1),(0,i.u)((()=>!s()||n()||!r())))return;const c=(0,i.u)(this.uk);ot(c,(0,i.u)(e)),t&&this.f.e.k("media-seek-request",t);const l=o()-2;c.setCurrentTime(Math.min(l,a()??l))}async _e(t="prefer-media",e){const s=this.$e(t);if(ht(0,s),!s.active)return(0,i.u)(this.$state.pictureInPicture)&&(this.vd=!0,await this.wd(e)),e&&this.f.e.k("media-enter-fullscreen-request",e),s.enter()}async af(t="prefer-media",e){const s=this.$e(t);if(ht(0,s),s.active){e&&this.f.e.k("media-exit-fullscreen-request",e);try{const t=await s.exit();return this.vd&&(0,i.u)(this.$state.canPictureInPicture)&&await this.xd(),t}finally{this.vd=!1}}}$e(t){const e=(0,i.u)(this.uk);return"prefer-media"===t&&this.rc.supported||"media"===t?this.rc:e?.fullscreen}async xd(t){if(this.bf(),!this.$state.pictureInPicture())return t&&this.f.e.k("media-enter-pip-request",t),await this.uk().pictureInPicture.enter()}async wd(t){if(this.bf(),this.$state.pictureInPicture())return t&&this.f.e.k("media-exit-pip-request",t),await this.uk().pictureInPicture.exit()}bf(){if(!this.$state.canPictureInPicture())throw Error("[vidstack] no pip support")}rh(){this.Ib.defaultDelay=this.$props.controlsDelay()}ll(){const{canAirPlay:t}=this.$state,e=!!this.uk()?.airPlay?.supported;t.set(e)}Ll(){const{canGoogleCast:t,source:e}=this.$state,s=r.I&&!r.a&&(0,m.c)(e());t.set(s)}sh(){const{canFullscreen:t}=this.$state,e=this.rc.supported||!!this.uk()?.fullscreen?.supported;t.set(e)}th(){const{canPictureInPicture:t}=this.$state,e=!!this.uk()?.pictureInPicture?.supported;t.set(e)}async"media-airplay-request"(t){try{await this.ol(t)}catch(t){}}async ol(t){try{const e=this.uk()?.airPlay;if(!e?.supported)throw Error("No AirPlay adapter.");return t&&this.f.e.k("media-airplay-request",t),await e.prompt()}catch(t){throw this.f.e.qc("media-airplay-request"),t}}async"media-google-cast-request"(t){try{await this.ul(t)}catch(t){}}async ul(t){try{const{canGoogleCast:e}=this.$state;if(!(0,i.u)(e))throw new Error("Cast not available.");if((0,o.p)("https://www.gstatic.com"),!this.om){const t=await s.e(7547).then(s.bind(s,7547));this.om=new t.GoogleCastLoader}await this.om.prompt(this.a),t&&this.f.e.k("media-google-cast-request",t);const n="disconnected"!==(0,i.u)(this.$state.remotePlaybackState);n&&this.$state.remotePlaybackInfo.set((t=>({...t,savedState:{paused:(0,i.u)(this.$state.paused),currentTime:(0,i.u)(this.$state.currentTime)}}))),this.$state.remotePlaybackLoader.set(n?this.om:null)}catch(t){throw this.f.e.qc("media-google-cast-request"),t}}"media-audio-track-change-request"(t){const{logger:e,audioTracks:s}=this.a;if(s.readonly)return;const i=s[t.detail];if(i){const e=t.type;this.f.e.k(e,t),i.selected=!0}}async"media-enter-fullscreen-request"(t){try{await this._e(t.detail,t)}catch(e){this._b(e,t)}}async"media-exit-fullscreen-request"(t){try{await this.af(t.detail,t)}catch(e){this._b(e,t)}}async Oc(t){const e=(0,i.u)(this.$props.fullscreenOrientation),s=t.detail;if(!(0,i.i)(e)&&this.ta.supported)if(s){if(this.ta.locked)return;this.dispatch("media-orientation-lock-request",{detail:e,trigger:t})}else this.ta.locked&&this.dispatch("media-orientation-unlock-request",{trigger:t})}_b(t,e){this.ga.X(this.createEvent("fullscreen-error",{detail:(0,g.c)(t)}))}async"media-orientation-lock-request"(t){const e=t.type;try{this.f.e.k(e,t),await this.ta.lock(t.detail)}catch(t){this.f.e.qc(e)}}async"media-orientation-unlock-request"(t){const e=t.type;try{this.f.e.k(e,t),await this.ta.unlock()}catch(t){this.f.e.qc(e)}}async"media-enter-pip-request"(t){try{await this.xd(t)}catch(e){this.cf(e,t)}}async"media-exit-pip-request"(t){try{await this.wd(t)}catch(e){this.cf(e,t)}}cf(t,e){this.ga.X(this.createEvent("picture-in-picture-error",{detail:(0,g.c)(t)}))}"media-live-edge-request"(t){const{live:e,liveEdge:s,canSeek:i}=this.$state;if(e()&&!s()&&i()){this.f.e.k("media-seek-request",t);try{this.Ze()}catch(t){this.f.e.qc("media-seek-request")}}}async"media-loop-request"(t){try{this.f.Ha=!0,this.f.gb=!0,await this.sc(t)}catch(t){this.f.Ha=!1}}async"media-pause-request"(t){if(!this.$state.paused())try{await this.ud(t)}catch(t){}}async"media-play-request"(t){if(this.$state.paused())try{await this.sc(t)}catch(t){}}"media-rate-change-request"(t){const{playbackRate:e,canSetPlaybackRate:s}=this.$state;if(e()===t.detail||!s())return;const i=this.uk();i?.setPlaybackRate&&(this.f.e.k("media-rate-change-request",t),i.setPlaybackRate(t.detail))}"media-quality-change-request"(t){const{qualities:e,storage:s,logger:i}=this.a;if(e.readonly)return;this.f.e.k("media-quality-change-request",t);const n=t.detail;if(n<0)e.autoSelect(t),t.isOriginTrusted&&s?.setVideoQuality?.(null);else{const i=e[n];i&&(i.selected=!0,t.isOriginTrusted&&s?.setVideoQuality?.({id:i.id,width:i.width,height:i.height,bitrate:i.bitrate}))}}"media-pause-controls-request"(t){const e=t.type;this.f.e.k(e,t),this.Ib.pause(t)}"media-resume-controls-request"(t){const e=t.type;this.f.e.k(e,t),this.Ib.resume(t)}"media-seek-request"(t){const{seekableStart:e,seekableEnd:s,ended:i,canSeek:n,live:r,userBehindLiveEdge:a,clipStartTime:o}=this.$state;i()&&(this.f.gb=!0);const h=t.type;this.f.qa=!1,this.f.e.qc(h);const c=Math.min(Math.max(e()+.1,t.detail+o()),s()-.1);Number.isFinite(c)&&n()&&(this.f.e.k(h,t),this.uk().setCurrentTime(c),r()&&t.isOriginTrusted&&Math.abs(s()-c)>=2&&a.set(!0))}"media-seeking-request"(t){const e=t.type;this.f.e.k(e,t),this.$state.seeking.set(!0),this.f.qa=!0}"media-start-loading"(t){if(this.$state.canLoad())return;const e=t.type;this.f.e.k(e,t),this.ga.X(this.createEvent("can-load"))}"media-poster-start-loading"(t){if(this.$state.canLoadPoster())return;const e=t.type;this.f.e.k(e,t),this.ga.X(this.createEvent("can-load-poster"))}"media-text-track-change-request"(t){const{index:e,mode:s}=t.detail,i=this.a.textTracks[e];if(i){const e=t.type;this.f.e.k(e,t),i.setMode(s,t)}}"media-mute-request"(t){if(this.$state.muted())return;const e=t.type;this.f.e.k(e,t),this.uk().setMuted(!0)}"media-unmute-request"(t){const{muted:e,volume:s}=this.$state;if(!e())return;const i=t.type;this.f.e.k(i,t),this.a.$provider().setMuted(!1),0===s()&&(this.f.e.k(i,t),this.uk().setVolume(.25))}"media-volume-change-request"(t){const{muted:e,volume:s}=this.$state,i=t.detail;if(s()===i)return;const n=t.type;this.f.e.k(n,t),this.uk().setVolume(i),i>0&&e()&&(this.f.e.k(n,t),this.uk().setMuted(!1))}ql(t,e,s){}}function ot(t,e){if(!t||!e)throw Error("[vidstack] media not ready")}function ht(t,e){if(!e?.supported)throw Error("[vidstack] no fullscreen support")}class ct{constructor(){this.qa=!1,this.Ha=!1,this.gb=!1,this.e=new nt}}const lt=new Set(["auto-play","auto-play-fail","can-load","sources-change","source-change","load-start","abort","error","loaded-metadata","loaded-data","can-play","play","play-fail","pause","playing","seeking","seeked","waiting"]);class ut extends L{constructor(t,e){super(),this.f=t,this.a=e,this.p=new Map,this.Kk=!1,this.tc=!1,this.Jb=!1,this.seeking=q((t=>{const{seeking:e,realCurrentTime:s,paused:i}=this.$state;e.set(!0),s.set(t.detail),this.F("media-seeking-request",t),i()&&(this.hb=t,this.zd())}),150,{leading:!0}),this.zd=F((()=>{if(!this.hb)return;this.tc=!0;const{waiting:t,playing:e}=this.$state;t.set(!0),e.set(!1);const s=this.createEvent("waiting",{trigger:this.hb});this.p.set("waiting",s),this.dispatch(s),this.hb=void 0,this.tc=!1}),300)}onAttach(t){t.setAttribute("aria-busy","true"),this.listen("fullscreen-change",this["fullscreen-change"].bind(this)),this.listen("fullscreen-error",this["fullscreen-error"].bind(this)),this.listen("orientation-change",this["orientation-change"].bind(this))}onConnect(t){(0,i.e)(this.nm.bind(this)),this.uh(),this.vh(),this.wh(),this.xh(),(0,i.o)(this.yh.bind(this))}X(t){if(!this.scope)return;const e=t.type;this[t.type]?.(t),lt.has(e)&&this.p.set(e,t),this.dispatch(t)}xh(){this.Jb&&(requestAnimationFrame((()=>{this.scope&&this.a.remote.play(new i.D("dom-connect"))})),this.Jb=!1)}yh(){this.Jb||(this.Jb=!this.a.$state.paused(),this.a.$provider()?.pause())}ib(){this.df(),this.Kk=!1,this.f.gb=!1,this.f.Ha=!1,this.tc=!1,this.hb=void 0,this.p.clear()}F(t,e){const s=this.f.e.td(t);s&&(e.request=s,e.triggers.add(s))}uh(){this.yd(),this.ef();const t=this.a.textTracks;(0,i.l)(t,"add",this.yd.bind(this)),(0,i.l)(t,"remove",this.yd.bind(this)),(0,i.l)(t,"mode-change",this.ef.bind(this))}vh(){const t=this.a.qualities;(0,i.l)(t,"add",this.pc.bind(this)),(0,i.l)(t,"remove",this.pc.bind(this)),(0,i.l)(t,"change",this.fb.bind(this)),(0,i.l)(t,"auto-change",this.zh.bind(this)),(0,i.l)(t,"readonly-change",this.Ah.bind(this))}wh(){const t=this.a.audioTracks;(0,i.l)(t,"add",this.ff.bind(this)),(0,i.l)(t,"remove",this.ff.bind(this)),(0,i.l)(t,"change",this.Bh.bind(this))}yd(t){const{textTracks:e}=this.$state;e.set(this.a.textTracks.toArray()),this.dispatch("text-tracks-change",{detail:e(),trigger:t})}ef(t){t&&this.F("media-text-track-change-request",t);const e=this.a.textTracks.selected,{textTrack:s}=this.$state;s()!==e&&(s.set(e),this.dispatch("text-track-change",{detail:e,trigger:t}))}ff(t){const{audioTracks:e}=this.$state;e.set(this.a.audioTracks.toArray()),this.dispatch("audio-tracks-change",{detail:e(),trigger:t})}Bh(t){const{audioTrack:e}=this.$state;e.set(this.a.audioTracks.selected),t&&this.F("media-audio-track-change-request",t),this.dispatch("audio-track-change",{detail:e(),trigger:t})}pc(t){const{qualities:e}=this.$state;e.set(this.a.qualities.toArray()),this.dispatch("qualities-change",{detail:e(),trigger:t})}fb(t){const{quality:e}=this.$state;e.set(this.a.qualities.selected),t&&this.F("media-quality-change-request",t),this.dispatch("quality-change",{detail:e(),trigger:t})}zh(){this.$state.autoQuality.set(this.a.qualities.auto)}Ah(){this.$state.canSetQuality.set(!this.a.qualities.readonly)}nm(){const{canSetVolume:t,isGoogleCastConnected:e}=this.$state;e()?t.set(!1):(0,r.b)().then(t.set)}"provider-change"(t){const e=this.a.$provider(),s=t.detail;e?.type!==s?.type&&(e?.destroy?.(),e?.scope?.dispose(),this.a.$provider.set(t.detail),e&&null===t.detail&&this.gf(t))}"provider-loader-change"(t){}"auto-play"(t){this.$state.autoPlayError.set(null)}"auto-play-fail"(t){this.$state.autoPlayError.set(t.detail),this.ib()}"can-load"(t){this.$state.canLoad.set(!0),this.p.set("can-load",t),this.a.textTracks[o.b.P](),this.F("media-start-loading",t)}"can-load-poster"(t){this.$state.canLoadPoster.set(!0),this.p.set("can-load-poster",t),this.F("media-poster-start-loading",t)}"media-type-change"(t){const e=this.p.get("source-change");e&&t.triggers.add(e);const s=this.$state.viewType();this.$state.mediaType.set(t.detail);const i=this.$state.providedViewType(),n="unknown"===i?t.detail:i;s!==n&&setTimeout((()=>{requestAnimationFrame((()=>{this.scope&&(this.$state.inferredViewType.set(t.detail),this.dispatch("view-type-change",{detail:n,trigger:t}))}))}),0)}"stream-type-change"(t){const e=this.p.get("source-change");e&&t.triggers.add(e);const{streamType:s,inferredStreamType:i}=this.$state;i.set(t.detail),t.detail=s()}"rate-change"(t){const{storage:e}=this.a,{canPlay:s}=this.$state;this.$state.playbackRate.set(t.detail),this.F("media-rate-change-request",t),s()&&e?.setPlaybackRate?.(t.detail)}"remote-playback-change"(t){const{remotePlaybackState:e,remotePlaybackType:s}=this.$state,{type:i,state:n}=t.detail,r="connected"===n;s.set(i),e.set(n);const a="airplay"===i?"media-airplay-request":"media-google-cast-request";if(r)this.F(a,t);else{const e=this.f.e.kl(a);e&&(t.request=e,t.triggers.add(e))}}"sources-change"(t){this.$state.sources.set(t.detail)}"source-change"(t){const e=this.p.get("sources-change");e&&t.triggers.add(e),this.gf(t),this.p.set(t.type,t),this.$state.source.set(t.detail),this.el?.setAttribute("aria-busy","true")}gf(t){var e;this.a.audioTracks[n.L.H](t),this.a.qualities[n.L.H](t),this.ib(),e=this.a.$state,l.reset(e,(t=>u.has(t))),(0,i.T)()}abort(t){const e=this.p.get("source-change");e&&t.triggers.add(e);const s=this.p.get("can-load");s&&!t.triggers.hasType("can-load")&&t.triggers.add(s)}"load-start"(t){const e=this.p.get("source-change");e&&t.triggers.add(e)}error(t){this.$state.error.set(t.detail);const e=this.p.get("abort");e&&t.triggers.add(e)}"loaded-metadata"(t){const e=this.p.get("load-start");e&&t.triggers.add(e)}"loaded-data"(t){const e=this.p.get("load-start");e&&t.triggers.add(e)}"can-play"(t){const e=this.p.get("loaded-metadata");e&&t.triggers.add(e),this.hf(t.detail),this.el?.setAttribute("aria-busy","false")}"can-play-through"(t){this.hf(t.detail);const e=this.p.get("can-play");e&&t.triggers.add(e)}hf(t){const{seekable:e,buffered:s,intrinsicDuration:i,canPlay:n}=this.$state;n.set(!0),s.set(t.buffered),e.set(t.seekable);const r=(0,a.a)(t.seekable)??1/0;i.set(r)}"duration-change"(t){const{live:e,intrinsicDuration:s}=this.$state,i=t.detail;e()||s.set(Number.isNaN(i)?0:i)}progress(t){const{buffered:e,seekable:s,live:i,intrinsicDuration:n}=this.$state,r=t.detail;if(e.set(r.buffered),s.set(r.seekable),i()){const e=(0,a.a)(r.seekable)??1/0;n.set(e),this.dispatch("duration-change",{detail:e,trigger:t})}}play(t){const{paused:e,autoPlayError:s,ended:i,autoPlaying:n,playsInline:r,pointer:a,muted:o,viewType:h,live:c,userBehindLiveEdge:l}=this.$state;if(this.Gk(),!e())return void t.stopImmediatePropagation();t.autoPlay=n();const u=this.p.get("waiting");u&&t.triggers.add(u),this.F("media-play-request",t),this.p.set("play",t),e.set(!1),s.set(null),t.autoPlay&&(this.X(this.createEvent("auto-play",{detail:{muted:o()},trigger:t})),n.set(!1)),(i()||this.f.gb)&&(this.f.gb=!1,i.set(!1),this.X(this.createEvent("replay",{trigger:t}))),r()||"video"!==h()||"coarse"!==a()||this.a.remote.enterFullscreen("prefer-media",t),c()&&!l()&&this.a.remote.seekToLiveEdge(t)}Gk(t){if(!(0,i.u)(this.a.$provider))return;const{ended:e,seekableStart:s,clipStartTime:n,clipEndTime:r,realCurrentTime:a,duration:o}=this.$state,h=a()<n()||r()>0&&a()>=r()||Math.abs(a()-o())<.1||e();return h&&this.dispatch("media-seek-request",{detail:(n()>0?0:s())+.1,trigger:t}),h}"play-fail"(t){const{muted:e,autoPlaying:s}=this.$state,i=this.p.get("play");i&&t.triggers.add(i),this.F("media-play-request",t);const{paused:n,playing:r}=this.$state;n.set(!0),r.set(!1),this.ib(),this.p.set("play-fail",t),t.autoPlay&&(this.X(this.createEvent("auto-play-fail",{detail:{muted:e(),error:t.detail},trigger:t})),s.set(!1))}playing(t){const e=this.p.get("play"),s=this.p.get("seeked");e?t.triggers.add(e):s&&t.triggers.add(s),setTimeout((()=>this.ib()),0);const{paused:i,playing:n,live:r,liveSyncPosition:a,seekableEnd:o,started:h,currentTime:c,seeking:l,ended:u}=this.$state;if(i.set(!1),n.set(!0),l.set(!1),u.set(!1),this.f.Ha)this.f.Ha=!1;else{if(r()&&!h()&&0===c()){const t=a()??o()-2;Number.isFinite(t)&&this.a.$provider().setCurrentTime(t)}this.started(t)}}started(t){const{started:e}=this.$state;e()||(e.set(!0),this.X(this.createEvent("started",{trigger:t})))}pause(t){this.el?.isConnected||(this.Jb=!0),this.F("media-pause-request",t);const e=this.p.get("seeked");e&&t.triggers.add(e);const{paused:s,playing:i}=this.$state;s.set(!0),i.set(!1),this.Kk&&setTimeout((()=>{this.X(this.createEvent("end",{trigger:t})),this.Kk=!1}),0),this.ib()}"time-update"(t){if(this.f.Ha)return void t.stopImmediatePropagation();const{realCurrentTime:e,played:s,waiting:i,clipEndTime:n}=this.$state,r=n(),a=t.detail;e.set(a.currentTime),s.set(a.played),i.set(!1);for(const e of this.a.textTracks)e[o.b.Ta](a.currentTime,t);r>0&&a.currentTime>=r&&(this.Kk=!0,this.dispatch("media-pause-request",{trigger:t})),this.Nk()}Nk(){const{storage:t}=this.a,{canPlay:e,realCurrentTime:s}=this.$state;e()&&t?.setTime?.(s())}"volume-change"(t){const{storage:e}=this.a,{volume:s,muted:i,canPlay:n}=this.$state,r=t.detail;s.set(r.volume),i.set(r.muted||0===r.volume),this.F("media-volume-change-request",t),this.F(r.muted?"media-mute-request":"media-unmute-request",t),n()&&(e?.setVolume?.(s()),e?.setMuted?.(i()))}seeked(t){const{seeking:e,currentTime:s,realCurrentTime:i,paused:n,duration:r,ended:a}=this.$state;if(this.f.qa)e.set(!0),t.stopImmediatePropagation();else if(e()){const s=this.p.get("waiting");s&&t.triggers.add(s);const o=this.p.get("seeking");o&&!t.triggers.has(o)&&t.triggers.add(o),n()&&this.df(),e.set(!1),t.detail!==r()&&a.set(!1),i.set(t.detail),this.F("media-seek-request",t);const h=t?.originEvent;h?.isTrusted&&!/seek/.test(h.type)&&this.started(t)}Math.abs(r()-s())>=.1&&a.set(!1)}waiting(t){this.tc||this.f.qa||(t.stopImmediatePropagation(),this.hb=t,this.zd())}end(t){const{loop:e}=this.$state;e()?setTimeout((()=>{requestAnimationFrame((()=>{this.dispatch("media-loop-request",{trigger:t})}))}),10):this.Db(t)}Db(t){const{paused:e,seeking:s,ended:i,duration:n}=this.$state;e()||this.dispatch("pause",{trigger:t}),s()&&this.dispatch("seeked",{detail:n(),trigger:t}),i.set(!0),this.ib(),this.dispatch("ended",{trigger:t})}df(){this.zd.cancel(),this.$state.waiting.set(!1)}"fullscreen-change"(t){const e=t.detail;this.$state.fullscreen.set(e),this.F(e?"media-enter-fullscreen-request":"media-exit-fullscreen-request",t)}"fullscreen-error"(t){this.F("media-enter-fullscreen-request",t),this.F("media-exit-fullscreen-request",t)}"orientation-change"(t){const e=t.detail.lock;this.F(e?"media-orientation-lock-request":"media-orientation-unlock-request",t)}"picture-in-picture-change"(t){const e=t.detail;this.$state.pictureInPicture.set(e),this.F(e?"media-enter-pip-request":"media-exit-pip-request",t)}"picture-in-picture-error"(t){this.F("media-enter-pip-request",t),this.F("media-exit-pip-request",t)}"title-change"(t){t.trigger&&(t.stopImmediatePropagation(),this.$state.inferredTitle.set(t.detail))}"poster-change"(t){t.trigger&&(t.stopImmediatePropagation(),this.$state.inferredPoster.set(t.detail))}}class dt extends L{onSetup(){this.Ch(),(0,i.e)(this.Om.bind(this)),(0,i.e)(this.Fh.bind(this)),(0,i.e)(this.Ek.bind(this)),(0,i.e)(this.Vc.bind(this)),(0,i.e)(this.Hh.bind(this)),(0,i.e)(this.pn.bind(this)),(0,i.e)(this.Jh.bind(this)),(0,i.e)(this.Kh.bind(this)),(0,i.e)(this.Ih.bind(this)),(0,i.e)(this.Gh.bind(this)),(0,i.e)(this.Vm.bind(this)),(0,i.e)(this.ld.bind(this)),(0,i.e)(this.Eh.bind(this)),(0,i.e)(this.uc.bind(this))}Ch(){const t={duration:"providedDuration",poster:"providedPoster",streamType:"providedStreamType",title:"providedTitle",viewType:"providedViewType"},e=new Set(["currentTime","paused","playbackRate","volume"]);for(const s of Object.keys(this.$props))e.has(s)||this.$state[t[s]??s]?.set(this.$props[s]());this.$state.muted.set(this.$props.muted()||0===this.$props.volume())}Eh(){const{viewType:t,streamType:e,title:s,poster:i}=this.$props;this.$state.providedPoster.set(i()),this.$state.providedStreamType.set(e()),this.$state.providedViewType.set(t()),this.$state.providedTitle.set(s())}Dh(){}Om(){const{artist:t}=this.$props;this.$state.artist.set(t())}uc(){const{title:t}=this.$state;this.dispatch("title-change",{detail:t()})}Fh(){const t=this.$props.autoPlay()||this.$props.autoplay();this.$state.autoPlay.set(t),this.dispatch("auto-play-change",{detail:t})}Gh(){const t=this.$props.loop();this.$state.loop.set(t),this.dispatch("loop-change",{detail:t})}Vc(){const t=this.$props.controls();this.$state.controls.set(t)}ld(){const{poster:t}=this.$state;this.dispatch("poster-change",{detail:t()})}Hh(){const t=this.$props.crossOrigin()??this.$props.crossorigin(),e=!0===t?"":t;this.$state.crossOrigin.set(e)}pn(){const{providedDuration:t}=this.$state;t.set(this.$props.duration())}Vm(){const t=this.$props.playsInline()||this.$props.playsinline();this.$state.playsInline.set(t),this.dispatch("plays-inline-change",{detail:t})}Ek(){const{clipStartTime:t,clipEndTime:e}=this.$props;this.$state.clipStartTime.set(t()),this.$state.clipEndTime.set(e())}Jh(){this.dispatch("live-change",{detail:this.$state.live()})}Ih(){this.$state.liveEdgeTolerance.set(this.$props.liveEdgeTolerance()),this.$state.minLiveDVRWindow.set(this.$props.minLiveDVRWindow())}Kh(){this.dispatch("live-edge-change",{detail:this.$state.liveEdge()})}}class pt extends L{static{this.Nm=["play","pause","seekforward","seekbackward","seekto"]}constructor(){super()}onConnect(){(0,i.e)(this.Pm.bind(this)),(0,i.e)(this.Qm.bind(this));const t=this.Rm.bind(this);for(const e of pt.Nm)navigator.mediaSession.setActionHandler(e,t);(0,i.o)(this.ya.bind(this))}ya(){for(const t of pt.Nm)navigator.mediaSession.setActionHandler(t,null)}Pm(){const{title:t,artist:e,poster:s}=this.$state;navigator.mediaSession.metadata=new MediaMetadata({title:t(),artist:e(),artwork:[{src:s()}]})}Qm(){const{canPlay:t,paused:e}=this.$state;navigator.mediaSession.playbackState=t()?e()?"paused":"playing":"none"}Rm(t){const e=new i.D("media-session-action",{detail:t});switch(t.action){case"play":this.dispatch("media-play-request",{trigger:e});break;case"pause":this.dispatch("media-pause-request",{trigger:e});break;case"seekto":case"seekforward":case"seekbackward":this.dispatch("media-seek-request",{detail:(0,i.a)(t.seekTime)?t.seekTime:this.$state.currentTime()+(t.seekOffset??10),trigger:e})}}}let ft=(0,i.n)(!1);(0,i.l)(document,"pointerdown",(()=>{ft.set(!1)})),(0,i.l)(document,"keydown",(t=>{t.metaKey||t.altKey||t.ctrlKey||ft.set(!0)}));class gt extends i.a1{constructor(){super(...arguments),this.Kb=(0,i.n)(!1)}onConnect(t){(0,i.e)((()=>{if(!ft())return this.Kb.set(!1),mt(t,!1),this.listen("pointerenter",this.Cd.bind(this)),void this.listen("pointerleave",this.Dd.bind(this));const e=document.activeElement===t;this.Kb.set(e),mt(t,e),this.listen("focus",this.Lb.bind(this)),this.listen("blur",this.Nh.bind(this))}))}focused(){return this.Kb()}Lb(){this.Kb.set(!0),mt(this.el,!0)}Nh(){this.Kb.set(!1),mt(this.el,!1)}Cd(){bt(this.el,!0)}Dd(){bt(this.el,!1)}}function mt(t,e){(0,i.s)(t,"data-focus",e),(0,i.s)(t,"data-hocus",e)}function bt(t,e){(0,i.s)(t,"data-hocus",e),(0,i.s)(t,"data-hover",e)}var yt=Object.defineProperty,vt=Object.getOwnPropertyDescriptor,$t=(t,e,s,i)=>{for(var n,r=i>1?void 0:i?vt(e,s):e,a=t.length-1;a>=0;a--)(n=t[a])&&(r=(i?n(e,s,r):n(r))||r);return i&&r&&yt(e,s,r),r};const wt=class t extends i.C{constructor(){super(),this.canPlayQueue=new rt,this.wc=!1,new dt;const t={player:this,qualities:new Q,audioTracks:new H,storage:null,$provider:(0,i.n)(null),$providerSetup:(0,i.n)(!1),$props:this.$props,$state:this.$state};t.remote=new j(void 0),t.remote.setPlayer(this),t.$iosControls=(0,i.q)(this.Oh.bind(this)),t.textTracks=new I,t.textTracks[o.b.al]=this.$state.crossOrigin,t.textRenderers=new R(t),t.ariaKeys={},this.a=t,(0,i.W)(d.m,t),this.orientation=new A,new gt,new B(t);const e=new ct;this.ga=new ut(e,t),this.Y=new at(this.ga,e,t),t.delegate=new it(this.ga.X.bind(this.ga),t),new pt,new st("load",this.startLoading.bind(this)),new st("posterLoad",this.startLoadingPoster.bind(this))}static{this.props=et}static{this.state=l}get i(){return this.a.$provider()}get sn(){return this.$props}onSetup(){this.Ph(),(0,i.e)(this.Qh.bind(this)),(0,i.e)(this.Rh.bind(this)),(0,i.e)(this.Tc.bind(this)),(0,i.e)(this.Fd.bind(this)),(0,i.e)(this.jb.bind(this)),(0,i.e)(this.Vm.bind(this)),(0,i.e)(this.Sh.bind(this))}onAttach(t){t.setAttribute("data-media-player",""),(0,p.s)(t,"tabindex","0"),(0,p.s)(t,"role","region"),(0,i.e)(this.Tm.bind(this)),(0,i.e)(this.uc.bind(this)),(0,i.e)(this.lf.bind(this)),(0,i.l)(t,"find-media-player",this.Th.bind(this))}onConnect(t){r.l&&(0,i.s)(t,"data-iphone","");const e=window.matchMedia("(pointer: coarse)");this.mf(e),e.onchange=this.mf.bind(this);const s=new ResizeObserver((0,i.p)(this.O.bind(this)));s.observe(t),(0,i.e)(this.O.bind(this)),this.dispatch("media-player-connect",{detail:this,bubbles:!0,composed:!0}),(0,i.o)((()=>{s.disconnect(),e.onchange=null}))}onDestroy(){this.a.player=null,this.canPlayQueue.H()}uc(){const t=this.$el,{title:e,live:s,viewType:n,providedTitle:r}=this.$state,a=s(),o=(0,i._)(n()),h="Unknown"!==o?`${a?"Live ":""}${o}`:a?"Live":"Media",c=e();(0,i.s)(this.el,"aria-label",c?`${h} - ${c}`:h+" Player"),t?.hasAttribute("title")&&(this.wc=!0,t?.removeAttribute("title"))}lf(){const t=this.orientation.landscape?"landscape":"portrait";this.$state.orientation.set(t),(0,i.s)(this.el,"data-orientation",t),this.O()}Qh(){this.$state.canPlay()&&this.i?this.canPlayQueue.Bb():this.canPlayQueue.ra()}Ph(){if(t[Z])return void this.setAttributes(t[Z]);const e={"data-load":function(){return this.$props.load()},"data-captions":function(){const t=this.$state.textTrack();return!!t&&(0,o.i)(t)},"data-ios-controls":function(){return this.a.$iosControls()},"data-controls":function(){return this.controls.showing},"data-buffering":function(){const{canLoad:t,canPlay:e,waiting:s}=this.$state;return t()&&(!e()||s())},"data-error":function(){const{error:t}=this.$state;return!!t()},"data-autoplay-error":function(){const{autoPlayError:t}=this.$state;return!!t()}},s={autoPlay:"autoplay",canAirPlay:"can-airplay",canPictureInPicture:"can-pip",pictureInPicture:"pip",playsInline:"playsinline",remotePlaybackState:"remote-state",remotePlaybackType:"remote-type",isAirPlayConnected:"airplay",isGoogleCastConnected:"google-cast"};for(const t of tt)e["data-"+(s[t]??(0,i.L)(t))]=function(){return this.$state[t]()};delete e.title,t[Z]=e,this.setAttributes(e)}Th(t){t.detail(this)}O(){if(!this.el)return;const t=this.el.clientWidth,e=this.el.clientHeight;this.$state.width.set(t),this.$state.height.set(e),(0,i.j)(this.el,"--player-width",t+"px"),(0,i.j)(this.el,"--player-height",e+"px")}mf(t){const e=t.matches?"coarse":"fine";(0,i.s)(this.el,"data-pointer",e),this.$state.pointer.set(e),this.O()}Oh(){const{playsInline:t,fullscreen:e}=this.$state;return r.l&&!P&&"video"===this.$state.mediaType()&&(!t()||e())}get provider(){return this.i}get controls(){return this.Y.Ib}set controls(t){this.sn.controls.set(t)}get title(){return(0,i.u)(this.$state.providedTitle)}set title(t){this.wc?this.wc=!1:this.$state.providedTitle.set(t)}get qualities(){return this.a.qualities}get audioTracks(){return this.a.audioTracks}get textTracks(){return this.a.textTracks}get textRenderers(){return this.a.textRenderers}get duration(){return this.$state.duration()}set duration(t){this.sn.duration.set(t)}get paused(){return(0,i.u)(this.$state.paused)}set paused(t){this.nf(t)}Tc(){this.nf(this.$props.paused())}nf(t){t?this.canPlayQueue.k("paused",(()=>this.Y.ud())):this.canPlayQueue.k("paused",(()=>this.Y.sc()))}get muted(){return(0,i.u)(this.$state.muted)}set muted(t){this.sn.muted.set(t)}Rh(){this.Uh(this.$props.muted())}Uh(t){this.canPlayQueue.k("muted",(()=>{this.i&&this.i.setMuted(t)}))}get currentTime(){return(0,i.u)(this.$state.currentTime)}set currentTime(t){this.of(t)}jb(){this.of(this.$props.currentTime())}of(t){this.canPlayQueue.k("currentTime",(()=>{const{currentTime:e,clipStartTime:s,seekableStart:n,seekableEnd:r}=this.$state;t!==(0,i.u)(e)&&(0,i.u)((()=>{if(!this.i)return;const e=Math.min(Math.max(n()+.1,t+s()),r()-.1);Number.isFinite(e)&&this.i.setCurrentTime(e)}))}))}get volume(){return(0,i.u)(this.$state.volume)}set volume(t){this.sn.volume.set(t)}Fd(){this.Vh(this.$props.volume())}Vh(t){const e=(0,b.c)(0,t,1);this.canPlayQueue.k("volume",(()=>{this.i&&this.i.setVolume(e)}))}get playbackRate(){return(0,i.u)(this.$state.playbackRate)}set playbackRate(t){this.pf(t)}Sh(){this.pf(this.$props.playbackRate())}pf(t){this.canPlayQueue.k("rate",(()=>{this.i&&this.i.setPlaybackRate?.(t)}))}Vm(){this.Wm(this.$props.playsInline())}Wm(t){this.canPlayQueue.k("playsinline",(()=>{this.i&&this.i.setPlaysInline?.(t)}))}Tm(){let t=this.$props.storage(),e=(0,i.t)(t)?new M:t;if(e?.onChange){const{source:s}=this.$state,n=(0,i.t)(t)?t:this.el?.id,r=(0,i.q)(this.Um.bind(this));(0,i.e)((()=>e.onChange(s(),r(),n)))}this.a.storage=e,this.a.textTracks.setStorage(e),(0,i.o)((()=>{e?.onDestroy?.(),this.a.storage=null,this.a.textTracks.setStorage(null)}))}Um(){const{clipStartTime:t,clipEndTime:e}=this.$props,{source:s}=this.$state,i=s();return i.src?`${i.src}:${t()}:${e()}`:null}async play(t){return this.Y.sc(t)}async pause(t){return this.Y.ud(t)}async enterFullscreen(t,e){return this.Y._e(t,e)}async exitFullscreen(t,e){return this.Y.af(t,e)}enterPictureInPicture(t){return this.Y.xd(t)}exitPictureInPicture(t){return this.Y.wd(t)}seekToLiveEdge(t){this.Y.Ze(t)}startLoading(t){this.a.delegate.c("can-load",void 0,t)}startLoadingPoster(t){this.a.delegate.c("can-load-poster",void 0,t)}requestAirPlay(t){return this.Y.ol(t)}requestGoogleCast(t){return this.Y.ul(t)}destroy(){this.a.remote.setPlayer(null),this.dispatch("destroy")}};$t([i.Y],wt.prototype,"canPlayQueue",2),$t([i.Y],wt.prototype,"provider",1),$t([i.Y],wt.prototype,"controls",1),$t([i.Y],wt.prototype,"orientation",2),$t([i.Y],wt.prototype,"title",1),$t([i.Y],wt.prototype,"qualities",1),$t([i.Y],wt.prototype,"audioTracks",1),$t([i.Y],wt.prototype,"textTracks",1),$t([i.Y],wt.prototype,"textRenderers",1),$t([i.Y],wt.prototype,"duration",1),$t([i.Y],wt.prototype,"paused",1),$t([i.Y],wt.prototype,"muted",1),$t([i.Y],wt.prototype,"currentTime",1),$t([i.Y],wt.prototype,"volume",1),$t([i.Y],wt.prototype,"playbackRate",1),$t([i.a3],wt.prototype,"play",1),$t([i.a3],wt.prototype,"pause",1),$t([i.a3],wt.prototype,"enterFullscreen",1),$t([i.a3],wt.prototype,"exitFullscreen",1),$t([i.a3],wt.prototype,"enterPictureInPicture",1),$t([i.a3],wt.prototype,"exitPictureInPicture",1),$t([i.a3],wt.prototype,"seekToLiveEdge",1),$t([i.a3],wt.prototype,"startLoading",1),$t([i.a3],wt.prototype,"startLoadingPoster",1),$t([i.a3],wt.prototype,"requestAirPlay",1),$t([i.a3],wt.prototype,"requestGoogleCast",1);let kt=wt;function Tt(t,e){return fetch(t,e).then((t=>t.text())).then((s=>{const i=function(t){const e=t.match(/#EXT-X-STREAM-INF:[^\n]+(\n[^\n]+)*/g);return e?e[0].split("\n")[1].trim():null}(s);if(i)return Tt(/^https?:/.test(i)?i:new URL(i,t).href,e);const n=/EXT-X-PLAYLIST-TYPE:\s*VOD/.test(s)?"on-demand":"live";return"live"===n&&function(t){const e=t.split("\n");for(const t of e)if(t.startsWith("#EXT-X-TARGETDURATION")){const e=parseFloat(t.split(":")[1]);if(!isNaN(e))return e}return-1}(s)>=10&&(/#EXT-X-DVR-ENABLED:\s*true/.test(s)||s.includes("#EXT-X-DISCONTINUITY"))?"live:dvr":n}))}const xt=new Map;class Pt{constructor(t,e,s,n=[]){this.xc=t,this.a=e,this.ha=s,this.Gd=!1;const r=new X,a=new J,o=new U,h=[new G,new _];this.Hd=(0,i.q)((()=>{const t=e.$state.remotePlaybackLoader(),s=e.$props.preferNativeHLS()?[a,o,r,...h,...n]:[r,a,o,...h,...n];return t?[t,...s]:s}));const{$state:c}=e;c.sources.set(St(e.$props.src()));for(const t of c.sources()){const e=this.Hd().find((e=>e.canPlay(t)));if(!e)continue;const s=e.mediaType(t);this.a.$state.source.set(t),this.a.$state.mediaType.set(s),this.a.$state.inferredViewType.set(s),this.ha.set(e),this.Gd=!0}}get c(){return this.a.delegate.c}connect(){const t=this.ha();this.Gd&&(this.qf(this.a.$state.source(),t),this.rf(t),this.Gd=!1),(0,i.e)(this.Xh.bind(this)),(0,i.e)(this.Yh.bind(this)),(0,i.e)(this.Zh.bind(this)),(0,i.e)(this._h.bind(this)),(0,i.e)(this.Ok.bind(this))}Xh(){this.c("sources-change",[...St(this.a.$props.src()),...this.xc()])}Yh(){const{$state:t}=this.a,e=t.sources(),s=(0,i.u)(t.source),n=this.sf(s,e);if(e[0]?.src&&!n.src&&!n.type){const{crossOrigin:s}=t,n=(0,o.g)(s()),r=new AbortController;return Promise.all(e.map((t=>(0,i.t)(t.src)&&"?"===t.type?fetch(t.src,{method:"HEAD",credentials:n,signal:r.signal}).then((e=>(t.type=e.headers.get("content-type")||"??",xt.set(t.src,t.type),t))).catch((()=>t)):t))).then((e=>{r.signal.aborted||(this.sf((0,i.u)(t.source),e),(0,i.T)())})),()=>r.abort()}(0,i.T)()}sf(t,e){let s={src:"",type:""},n=null,r=this.Hd();for(const t of e){const e=r.find((e=>e.canPlay(t)));if(e){s=t,n=e;break}}return Ct(t,s)||this.qf(s,n),n!==(0,i.u)(this.ha)&&this.rf(n),s}qf(t,e){this.c("source-change",t),this.c("media-type-change",e?.mediaType(t)||"unknown")}rf(t){this.a.$providerSetup.set(!1),this.c("provider-change",null),t&&(0,i.u)((()=>t.preconnect?.(this.a))),this.ha.set(t),this.c("provider-loader-change",t)}Zh(){const t=this.a.$provider();if(t&&!(0,i.u)(this.a.$providerSetup))return this.a.$state.canLoad()?((0,i.h)((()=>t.setup()),t.scope),void this.a.$providerSetup.set(!0)):void(0,i.u)((()=>t.preconnect?.()))}_h(){if(!this.a.$providerSetup())return;const t=this.a.$provider(),e=this.a.$state.source(),s=(0,i.u)(this.a.$state.crossOrigin),n=(0,i.u)(this.a.$props.preferNativeHLS);if(!Ct(t?.currentSrc,e)){if(this.a.$state.canLoad()){const a=new AbortController;return(0,m.f)(e)?!n&&(0,r.i)()||Tt(e.src,{credentials:(0,o.g)(s),signal:a.signal}).then((t=>{this.c("stream-type-change",t)})).catch(i.Z):this.c("stream-type-change","on-demand"),(0,i.u)((()=>{const s=(0,i.u)(this.a.$state.preload);return t?.loadSource(e,s).catch((t=>{}))})),()=>a.abort()}try{(0,i.t)(e.src)&&(0,o.p)(new URL(e.src).origin)}catch(t){}}}Ok(){const t=this.ha(),{providedPoster:e,source:s,canLoadPoster:n}=this.a.$state;if(!t||!t.loadPoster||!s()||!n()||e())return;const r=new AbortController,a=new i.D("source-change",{detail:s});return t.loadPoster(s(),this.a,r).then((t=>{this.c("poster-change",t||"",a)})).catch((()=>{this.c("poster-change","",a)})),()=>{r.abort()}}}function St(t){return((0,i.r)(t)?t:[t&&!(0,i.t)(t)&&"src"in t?t:{src:t||""}]).map((({src:t,type:e,...s})=>({src:t,type:e??((0,i.t)(t)?xt.get(t):null)??(!(0,i.t)(t)||t.startsWith("blob:")?"video/object":t.includes("youtube")?"video/youtube":!t.includes("vimeo")||t.includes("progressive_redirect")||t.includes(".m3u8")?"?":"video/vimeo"),...s}))).sort((t=>"?"===t.type?1:-1))}function Ct(t,e){return t?.src===e?.src&&t?.type===e?.type}class Et{constructor(t,e){this.yc=t,this.a=e,this.tf=[],(0,i.e)(this.$h.bind(this))}$h(){const t=this.yc();for(const e of this.tf)if(!t.some((t=>t.id===e.id))){const t=e.id&&this.a.textTracks.getById(e.id);t&&this.a.textTracks.remove(t)}for(const e of t){const t=e.id||o.T.createId(e);this.a.textTracks.getById(t)||(e.id=t,this.a.textTracks.add(e))}this.tf=t}}var At=Object.defineProperty,jt=Object.getOwnPropertyDescriptor;class Lt extends i.C{constructor(){super(...arguments),this.xc=(0,i.n)([]),this.yc=(0,i.n)([]),this.ha=null,this.Id=-1}static{this.props={loaders:[]}}static{this.state=new i.S({loader:null})}onSetup(){this.a=(0,d.u)(),this.uf=new Pt(this.xc,this.a,this.$state.loader,this.$props.loaders())}onAttach(t){t.setAttribute("data-media-provider","")}onConnect(t){this.uf.connect(),new Et(this.yc,this.a);const e=new ResizeObserver((0,i.p)(this.O.bind(this)));e.observe(t);const s=new MutationObserver(this.vf.bind(this));s.observe(t,{attributes:!0,childList:!0}),this.O(),this.vf(),(0,i.o)((()=>{e.disconnect(),s.disconnect()}))}load(t){window.cancelAnimationFrame(this.Id),this.Id=requestAnimationFrame((()=>this.ai(t))),(0,i.o)((()=>{window.cancelAnimationFrame(this.Id)}))}ai(t){if(!this.scope)return;const e=this.$state.loader(),{$provider:s}=this.a;this.ha===e&&e?.target===t&&(0,i.u)(s)||(this.wf(),this.ha=e,e&&(e.target=t||null),e&&t&&e.load(this.a).then((t=>{this.scope&&(0,i.u)(this.$state.loader)===e&&this.a.delegate.c("provider-change",t)})))}onDestroy(){this.ha=null,this.wf()}wf(){this.a.delegate.c("provider-change",null)}O(){if(!this.el)return;const t=this.a.player,e=this.el.offsetWidth,s=this.el.offsetHeight;t&&(t.$state.mediaWidth.set(e),t.$state.mediaHeight.set(s),t.el&&((0,i.j)(t.el,"--media-width",e+"px"),(0,i.j)(t.el,"--media-height",s+"px")))}vf(){const t=[],e=[],s=this.el.children;for(const i of s)i.hasAttribute("data-vds")||(i instanceof HTMLSourceElement?t.push({src:i.src,type:i.type}):i instanceof HTMLTrackElement&&e.push({id:i.id,src:i.src,kind:i.track.kind,language:i.srclang,label:i.label,default:i.default,type:i.getAttribute("data-type")}));this.xc.set(t),this.yc.set(e),(0,i.T)()}}((t,e,s,i)=>{for(var n,r=jt(e,s),a=t.length-1;a>=0;a--)(n=t[a])&&(r=n(e,s,r)||r);r&&At(e,s,r)})([i.a3],Lt.prototype,"load");class Ot extends i.C{static{this.props={hideDelay:2e3,hideOnMouseLeave:!1}}onSetup(){this.a=(0,d.u)(),(0,i.e)(this.bi.bind(this))}onAttach(t){const{pictureInPicture:e,fullscreen:s}=this.a.$state;(0,i.j)(t,"pointer-events","none"),(0,p.s)(t,"role","group"),this.setAttributes({"data-visible":this.xf.bind(this),"data-fullscreen":s,"data-pip":e}),(0,i.e)((()=>{this.dispatch("change",{detail:this.xf()})})),(0,i.e)(this.ci.bind(this)),(0,i.e)((()=>{const e=s();for(const s of["top","right","bottom","left"])(0,i.j)(t,`padding-${s}`,e&&`env(safe-area-inset-${s})`)}))}ci(){if(!this.el)return;const{$iosControls:t}=this.a,{controls:e}=this.a.$state,s=e()||t();(0,i.s)(this.el,"aria-hidden",s?"true":null),(0,i.j)(this.el,"display",s?"none":null)}bi(){const{controls:t}=this.a.player,{hideDelay:e,hideOnMouseLeave:s}=this.$props;t.defaultDelay=2e3===e()?this.a.$props.controlsDelay():e(),t.hideOnMouseLeave=s()}xf(){const{controlsVisible:t}=this.a.$state;return t()}}class qt extends i.a1{constructor(t){super(),this.j=t,this.Ac=-1,this.Bc=-1,this.Ia=null,(0,i.e)(this.di.bind(this))}onDestroy(){this.Ia?.(),this.Ia=null}di(){const t=this.j.C();if(!t)return void this.hide();const e=this.show.bind(this),s=this.hide.bind(this);this.j.zc(t,e,s)}show(t){this.nn(),window.cancelAnimationFrame(this.Bc),this.Bc=-1,this.Ia?.(),this.Ia=null,this.Ac=window.setTimeout((()=>{this.Ac=-1;const e=this.j.u();e&&e.style.removeProperty("display"),(0,i.u)((()=>this.j.B(!0,t)))}),this.j.yf?.()??0)}hide(t){this.nn(),(0,i.u)((()=>this.j.B(!1,t))),this.Bc=requestAnimationFrame((()=>{this.nn(),this.Bc=-1;const t=this.j.u();if(t){const e=()=>{t.style.display="none",this.Ia=null};if((0,p.j)(t)){this.Ia?.();const s=(0,i.l)(t,"animationend",e,{once:!0});this.Ia=s}else e()}}))}nn(){window.clearTimeout(this.Ac),this.Ac=-1}}const Mt=(0,i.V)();let Dt=0;class Rt extends i.C{constructor(){super(),this.ca="media-tooltip-"+ ++Dt,this.C=(0,i.n)(null),this.u=(0,i.n)(null),new gt;const{showDelay:t}=this.$props;new qt({C:this.C,u:this.u,yf:t,zc(t,e,s){(0,i.l)(t,"touchstart",(t=>t.preventDefault()),{passive:!1}),(0,i.e)((()=>{ft()&&(0,i.l)(t,"focus",e),(0,i.l)(t,"blur",s)})),(0,i.l)(t,"mouseenter",e),(0,i.l)(t,"mouseleave",s)},B:this.ei.bind(this)})}static{this.props={showDelay:700}}onAttach(t){t.style.setProperty("display","contents")}onSetup(){(0,i.W)(Mt,{C:this.C,u:this.u,Jd:this.Jd.bind(this),Kd:this.Kd.bind(this),Ld:this.Ld.bind(this),Md:this.Md.bind(this)})}Jd(t){this.C.set(t);let e=t.getAttribute("data-media-tooltip");e&&this.el?.setAttribute(`data-media-${e}-tooltip`,""),(0,i.s)(t,"data-describedby",this.ca)}Kd(t){t.removeAttribute("data-describedby"),t.removeAttribute("aria-describedby"),this.C.set(null)}Ld(t){t.setAttribute("id",this.ca),t.style.display="none",(0,p.s)(t,"role","tooltip"),this.u.set(t)}Md(t){t.removeAttribute("id"),t.removeAttribute("role"),this.u.set(null)}ei(t){const e=this.C(),s=this.u();e&&(0,i.s)(e,"aria-describedby",t?this.ca:null);for(const n of[this.el,e,s])n&&(0,i.s)(n,"data-visible",t)}}class Ft extends i.C{static{this.props={placement:"top center",offset:0,alignOffset:0}}constructor(){super(),new gt;const{placement:t}=this.$props;this.setAttributes({"data-placement":t})}onAttach(t){this.Ja(t),Object.assign(t.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(t){this.Ja(t);const e=(0,i.v)(Mt);(0,i.o)((()=>e.Md(t))),(0,i.o)((0,p.r)((()=>{this.connectScope&&(0,i.e)(this.Nd.bind(this))})))}Ja(t){(0,i.v)(Mt).Ld(t)}Nd(){const{placement:t,offset:e,alignOffset:s}=this.$props;return(0,p.k)(this.el,this.fi(),t(),{offsetVarName:"media-tooltip",xOffset:s(),yOffset:e()})}fi(){return(0,i.v)(Mt).C()}}class It extends i.a1{constructor(t){super(),this.j=t,new gt,t.kb&&new z(t.kb)}static{this.props={disabled:!1}}onSetup(){const{disabled:t}=this.$props;this.setAttributes({"data-pressed":this.j.n,"aria-pressed":this.gi.bind(this),"aria-disabled":()=>t()?"true":null})}onAttach(t){(0,p.s)(t,"tabindex","0"),(0,p.s)(t,"role","button"),(0,p.s)(t,"type","button")}onConnect(t){(0,p.o)(t,this.hi.bind(this));for(const t of["click","touchstart"])this.listen(t,this.ii.bind(this))}gi(){return(0,i.a4)(this.j.n())}ji(t){(0,i.a5)(this.j.n)&&this.j.n.set((t=>!t))}hi(t){if(this.$props.disabled()||this.el.hasAttribute("data-disabled"))return t.preventDefault(),void t.stopImmediatePropagation();t.preventDefault(),(this.j.v??this.ji).call(this,t)}ii(t){this.$props.disabled()&&(t.preventDefault(),t.stopImmediatePropagation())}}var Nt=Object.defineProperty,Vt=Object.getOwnPropertyDescriptor;class Ht extends i.C{constructor(){super(),this.zf=(0,i.n)(!1),new It({n:this.zf})}static{this.props={disabled:!1,defaultPressed:!1}}get pressed(){return this.zf()}}function Qt(t){return()=>t()?"true":"false"}((t,e,s,i)=>{for(var n,r=Vt(e,s),a=t.length-1;a>=0;a--)(n=t[a])&&(r=n(e,s,r)||r);r&&Nt(e,s,r)})([i.Y],Ht.prototype,"pressed");class Wt extends i.C{static{this.props=It.props}constructor(){super(),new It({n:this.n.bind(this),v:this.v.bind(this)})}onSetup(){this.a=(0,d.u)();const{canAirPlay:t,isAirPlayConnected:e}=this.a.$state;this.setAttributes({"data-active":e,"data-supported":t,"data-state":this.ki.bind(this),"aria-hidden":Qt((()=>!t()))})}onAttach(t){t.setAttribute("data-media-tooltip","airplay"),(0,p.m)(t,this.zl.bind(this))}v(t){this.a.remote.requestAirPlay(t)}n(){const{remotePlaybackType:t,remotePlaybackState:e}=this.a.$state;return"airplay"===t()&&"disconnected"!==e()}ki(){const{remotePlaybackType:t,remotePlaybackState:e}=this.a.$state;return"airplay"===t()&&e()}zl(){const{remotePlaybackState:t}=this.a.$state;return`AirPlay ${t()}`}}class Kt extends i.C{static{this.props=It.props}constructor(){super(),new It({n:this.n.bind(this),v:this.v.bind(this)})}onSetup(){this.a=(0,d.u)();const{canGoogleCast:t,isGoogleCastConnected:e}=this.a.$state;this.setAttributes({"data-active":e,"data-supported":t,"data-state":this.ki.bind(this),"aria-hidden":Qt((()=>!t()))})}onAttach(t){t.setAttribute("data-media-tooltip","google-cast"),(0,p.m)(t,this.zl.bind(this))}v(t){this.a.remote.requestGoogleCast(t)}n(){const{remotePlaybackType:t,remotePlaybackState:e}=this.a.$state;return"google-cast"===t()&&"disconnected"!==e()}ki(){const{remotePlaybackType:t,remotePlaybackState:e}=this.a.$state;return"google-cast"===t()&&e()}zl(){const{remotePlaybackState:t}=this.a.$state;return`Google Cast ${t()}`}}class Bt extends i.C{static{this.props=It.props}constructor(){super(),new It({n:this.n.bind(this),kb:"togglePaused",v:this.v.bind(this)})}onSetup(){this.a=(0,d.u)();const{paused:t,ended:e}=this.a.$state;this.setAttributes({"data-paused":t,"data-ended":e})}onAttach(t){t.setAttribute("data-media-tooltip","play"),(0,p.m)(t,"Play")}v(t){const e=this.a.remote;this.n()?e.pause(t):e.play(t)}n(){const{paused:t}=this.a.$state;return!t()}}class Yt extends i.C{static{this.props=It.props}constructor(){super(),new It({n:this.n.bind(this),kb:"toggleCaptions",v:this.v.bind(this)})}onSetup(){this.a=(0,d.u)(),this.setAttributes({"data-active":this.n.bind(this),"data-supported":()=>!this.lb(),"aria-hidden":Qt(this.lb.bind(this))})}onAttach(t){t.setAttribute("data-media-tooltip","caption"),(0,p.m)(t,"Captions")}v(t){this.a.remote.toggleCaptions(t)}n(){const{textTrack:t}=this.a.$state,e=t();return!!e&&(0,o.i)(e)}lb(){const{hasCaptions:t}=this.a.$state;return!t()}}class zt extends i.C{static{this.props={...It.props,target:"prefer-media"}}constructor(){super(),new It({n:this.n.bind(this),kb:"toggleFullscreen",v:this.v.bind(this)})}onSetup(){this.a=(0,d.u)();const{fullscreen:t}=this.a.$state,e=this.Nb.bind(this);this.setAttributes({"data-active":t,"data-supported":e,"aria-hidden":Qt((()=>!e()))})}onAttach(t){t.setAttribute("data-media-tooltip","fullscreen"),(0,p.m)(t,"Fullscreen")}v(t){const e=this.a.remote,s=this.$props.target();this.n()?e.exitFullscreen(s,t):e.enterFullscreen(s,t)}n(){const{fullscreen:t}=this.a.$state;return t()}Nb(){const{canFullscreen:t}=this.a.$state;return t()}}class Ut extends i.C{static{this.props=It.props}constructor(){super(),new It({n:this.n.bind(this),kb:"toggleMuted",v:this.v.bind(this)})}onSetup(){this.a=(0,d.u)(),this.setAttributes({"data-muted":this.n.bind(this),"data-state":this.ki.bind(this)})}onAttach(t){t.setAttribute("data-media-mute-button",""),t.setAttribute("data-media-tooltip","mute"),(0,p.m)(t,"Mute")}v(t){const e=this.a.remote;this.n()?e.unmute(t):e.mute(t)}n(){const{muted:t,volume:e}=this.a.$state;return t()||0===e()}ki(){const{muted:t,volume:e}=this.a.$state,s=e();return t()||0===s?"muted":s>=.5?"high":s<.5?"low":void 0}}class Jt extends i.C{static{this.props=It.props}constructor(){super(),new It({n:this.n.bind(this),kb:"togglePictureInPicture",v:this.v.bind(this)})}onSetup(){this.a=(0,d.u)();const{pictureInPicture:t}=this.a.$state,e=this.Nb.bind(this);this.setAttributes({"data-active":t,"data-supported":e,"aria-hidden":Qt((()=>!e()))})}onAttach(t){t.setAttribute("data-media-tooltip","pip"),(0,p.m)(t,"PiP")}v(t){const e=this.a.remote;this.n()?e.exitPictureInPicture(t):e.enterPictureInPicture(t)}n(){const{pictureInPicture:t}=this.a.$state;return t()}Nb(){const{canPictureInPicture:t}=this.a.$state;return t()}}class Xt extends i.C{static{this.props={disabled:!1,seconds:30}}constructor(){super(),new gt}onSetup(){this.a=(0,d.u)();const{seeking:t}=this.a.$state,{seconds:e}=this.$props,s=this.Nb.bind(this);this.setAttributes({seconds:e,"data-seeking":t,"data-supported":s,"aria-hidden":Qt((()=>!s()))})}onAttach(t){(0,p.s)(t,"tabindex","0"),(0,p.s)(t,"role","button"),(0,p.s)(t,"type","button"),t.setAttribute("data-media-tooltip","seek"),(0,p.m)(t,this.zl.bind(this))}onConnect(t){(0,p.o)(t,this.v.bind(this))}Nb(){const{canSeek:t}=this.a.$state;return t()}zl(){const{seconds:t}=this.$props;return`Seek ${t()>0?"forward":"backward"} ${t()} seconds`}v(t){const{seconds:e,disabled:s}=this.$props;if(s())return;const{currentTime:i}=this.a.$state,n=i()+e();this.a.remote.seek(n,t)}}class _t extends i.C{static{this.props={disabled:!1}}constructor(){super(),new gt}onSetup(){this.a=(0,d.u)();const{disabled:t}=this.$props,{live:e,liveEdge:s}=this.a.$state,i=()=>!e();this.setAttributes({"data-edge":s,"data-hidden":i,"aria-disabled":Qt((()=>t()||s())),"aria-hidden":Qt(i)})}onAttach(t){(0,p.s)(t,"tabindex","0"),(0,p.s)(t,"role","button"),(0,p.s)(t,"type","button"),t.setAttribute("data-media-tooltip","live")}onConnect(t){(0,p.o)(t,this.v.bind(this))}v(t){const{disabled:e}=this.$props,{liveEdge:s}=this.a.$state;e()||s()||this.a.remote.seekToLiveEdge(t)}}const Gt=new i.S({min:0,max:100,value:0,pointerValue:0,focused:!1,dragging:!1,pointing:!1,get active(){return this.dragging||this.focused||this.pointing},get fillRate(){return Zt(this.min,this.max,this.value)},get fillPercent(){return 100*this.fillRate},get pointerRate(){return Zt(this.min,this.max,this.pointerValue)},get pointerPercent(){return 100*this.pointerRate}});function Zt(t,e,s){const i=e-t;return i>0?(s-t)/i:0}const te={Left:-1,ArrowLeft:-1,Up:1,ArrowUp:1,Right:1,ArrowRight:1,Down:-1,ArrowDown:-1};class ee extends i.a1{constructor(t,e){super(),this.j=t,this.a=e,this.i=null,this.ua=null,this.mb=null,this.ti=q((t=>{this.va(this.Dc(t),t)}),20,{leading:!0})}onConnect(){(0,i.e)(this.li.bind(this)),(0,i.e)(this.mi.bind(this)),this.j.ni&&(0,i.e)(this.xn.bind(this))}xn(){const{pointer:t}=this.a.$state;"coarse"===t()&&this.j.ni()?(this.i=this.a.player.el?.querySelector("media-provider,[data-media-provider]"),this.i&&((0,i.l)(this.i,"touchstart",this.oi.bind(this),{passive:!0}),(0,i.l)(this.i,"touchmove",this.pi.bind(this),{passive:!1}))):this.i=null}oi(t){this.ua=t.touches[0]}pi(t){if((0,i.U)(this.ua)||(0,p.i)(t))return;const e=t.touches[0],s=e.clientX-this.ua.clientX,n=e.clientY-this.ua.clientY,r=this.$state.dragging();!r&&Math.abs(n)>5||r||(t.preventDefault(),Math.abs(s)>20&&(this.ua=e,this.mb=this.$state.value(),this.Od(this.mb,t)))}li(){this.j.K()||(this.listen("focus",this.Lb.bind(this)),this.listen("pointerenter",this.Cd.bind(this)),this.listen("pointermove",this.qi.bind(this)),this.listen("pointerleave",this.Dd.bind(this)),this.listen("pointerdown",this.ri.bind(this)),this.listen("keydown",this.Ab.bind(this)),this.listen("keyup",this.zb.bind(this)))}mi(){!this.j.K()&&this.$state.dragging()&&((0,i.l)(document,"pointerup",this.si.bind(this)),(0,i.l)(document,"pointermove",this.ti.bind(this)),(0,i.l)(document,"touchmove",this.ui.bind(this),{passive:!1}))}Lb(){this.va(this.$state.value())}Pd(t,e){const{value:s,min:i,max:n,dragging:r}=this.$state,a=Math.max(i(),Math.min(t,n()));s.set(a);const o=this.createEvent("value-change",{detail:a,trigger:e});if(this.dispatch(o),this.j.o?.(o),r()){const t=this.createEvent("drag-value-change",{detail:a,trigger:e});this.dispatch(t),this.j.nb?.(t)}}va(t,e){const{pointerValue:s,dragging:i}=this.$state;s.set(t),this.dispatch("pointer-value-change",{detail:t,trigger:e}),i()&&this.Pd(t,e)}Dc(t){let e,s=this.el.getBoundingClientRect(),{min:n,max:r}=this.$state;if("vertical"===this.$props.orientation()){const{bottom:i,height:n}=s;e=(i-t.clientY)/n}else if(this.ua&&(0,i.a)(this.mb)){const{width:s}=this.i.getBoundingClientRect(),i=(t.clientX-this.ua.clientX)/s,a=r()-n(),o=a*Math.abs(i);e=(i<0?this.mb-o:this.mb+o)/a}else{const{left:i,width:n}=s;e=(t.clientX-i)/n}return Math.max(n(),Math.min(r(),this.j.Ob(function(t,e,s,i){return t+i*((e-t)*(0,b.c)(0,s,1)/i)}(n(),r(),e,this.j.Ka()))))}Cd(t){this.$state.pointing.set(!0)}qi(t){const{dragging:e}=this.$state;e()||this.va(this.Dc(t),t)}Dd(t){this.$state.pointing.set(!1)}ri(t){if(0!==t.button)return;const e=this.Dc(t);this.Od(e,t),this.va(e,t)}Od(t,e){const{dragging:s}=this.$state;if(s())return;s.set(!0),this.a.remote.pauseControls(e);const i=this.createEvent("drag-start",{detail:t,trigger:e});this.dispatch(i),this.j.Qd?.(i)}Af(t,e){const{dragging:s}=this.$state;if(!s())return;s.set(!1),this.a.remote.resumeControls(e);const i=this.createEvent("drag-end",{detail:t,trigger:e});this.dispatch(i),this.j.Ec?.(i),this.ua=null,this.mb=null}Ab(t){const{key:e}=t,{min:s,max:n}=this.$state;let r;if("Home"===e||"PageUp"===e?r=s():"End"===e||"PageDown"===e?r=n():!t.metaKey&&/^[0-9]$/.test(e)&&(r=(n()-s())/10*Number(e)),!(0,i.i)(r))return this.va(r,t),void this.Pd(r,t);const a=this.Bf(t);if((0,i.i)(a))return;const o=e===this.Rd;!this.$state.dragging()&&o&&this.Od(a,t),this.va(a,t),o||this.Pd(a,t),this.Rd=e}zb(t){this.Rd="";const{dragging:e,value:s}=this.$state;if(!e())return;const i=this.Bf(t)??s();this.va(i),this.Af(i,t)}Bf(t){const{key:e,shiftKey:s}=t;if(!Object.keys(te).includes(e))return;t.preventDefault(),t.stopPropagation();const{shiftKeyMultiplier:i}=this.$props,{value:n,min:r,max:a}=this.$state,o=this.j.Ka(),h=this.j.Pb(),c=(s?h*i():h)*Number(te[e]),l=(n()+c)/o;return Math.max(r(),Math.min(a(),Number((o*l).toFixed(3))))}si(t){if(0!==t.button)return;const e=this.Dc(t);this.va(e,t),this.Af(e,t)}ui(t){t.preventDefault()}}const se=(0,i.V)((()=>({}))),ie=(0,i.V)();class ne extends i.a1{constructor(t){super(),this.j=t,this.xi=(0,i.p)(((t,e)=>{this.el?.style.setProperty("--slider-fill",t+"%"),this.el?.style.setProperty("--slider-pointer",e+"%")}))}static{this.props={disabled:!1,step:1,keyStep:1,orientation:"horizontal",shiftKeyMultiplier:5}}onSetup(){this.a=(0,d.u)();const t=new gt;t.attach(this),this.$state.focused=t.focused.bind(t),(0,i.a6)(se)||(0,i.W)(se,{default:"value"}),(0,i.W)(ie,{ta:this.$props.orientation,Fc:this.j.K,Cf:(0,i.n)(null)}),(0,i.e)(this.D.bind(this)),(0,i.e)(this.Qb.bind(this)),this.vi(),new ee(this.j,this.a).attach(this)}onAttach(t){(0,p.s)(t,"role","slider"),(0,p.s)(t,"tabindex","0"),(0,p.s)(t,"autocomplete","off"),(0,i.e)(this.Df.bind(this))}D(){const{dragging:t,value:e,min:s,max:n}=this.$state;(0,i.u)(t)||e.set(function(t,e,s,i){return(0,b.c)(t,(0,b.r)(s,(0,b.g)(i)),e)}(s(),n(),e(),this.j.Ka()))}Qb(){if(!this.j.K())return;const{dragging:t,pointing:e}=this.$state;t.set(!1),e.set(!1)}wi(){return(0,i.a4)(this.j.K())}vi(){const{orientation:t}=this.$props,{dragging:e,active:s,pointing:i}=this.$state;this.setAttributes({"data-dragging":e,"data-pointing":i,"data-active":s,"aria-disabled":this.wi.bind(this),"aria-valuemin":this.$state.min,"aria-valuemax":this.$state.max,"aria-valuenow":this.j.ia,"aria-valuetext":this.j.ja,"aria-orientation":t})}Df(){const{fillPercent:t,pointerPercent:e}=this.$state;this.xi((0,b.r)(t(),3),(0,b.r)(e(),3))}}class re extends i.C{static{this.props={...ne.props,min:0,max:100,value:0}}static{this.state=Gt}constructor(){super(),new ne({Ka:this.$props.step,Pb:this.$props.keyStep,Ob:Math.round,K:this.$props.disabled,ia:this.ia.bind(this),ja:this.ja.bind(this)})}onSetup(){(0,i.e)(this.D.bind(this)),(0,i.e)(this.yi.bind(this))}ia(){const{value:t}=this.$state;return Math.round(t())}ja(){const{value:t,max:e}=this.$state;return(0,b.r)(t()/e()*100,2)+"%"}D(){const{value:t}=this.$props;this.$state.value.set(t())}yi(){const{min:t,max:e}=this.$props;this.$state.min.set(t()),this.$state.max.set(e())}}const ae=new Map,oe=new Map;class he{constructor(t,e,s){this.$src=t,this.$crossOrigin=e,this.a=s,this.$images=(0,i.n)([]),(0,i.e)(this.zi.bind(this))}static create(t,e){const s=(0,d.u)();return new he(t,e,s)}zi(){const{canLoad:t}=this.a.$state;if(!t())return;const e=this.$src(),n=new AbortController;if(e){if((0,i.t)(e)&&ae.has(e)){const t=ae.get(e);if(ae.delete(e),ae.set(e,t),ae.size>30){const t=ae.keys().next().value;ae.delete(t)}this.$images.set(ae.get(e))}else if((0,i.t)(e)){const t=this.$crossOrigin(),r=e+"::"+t;if(!oe.has(r)){const a=new Promise((async(r,a)=>{try{const h=await fetch(e,{signal:n.signal,credentials:(0,o.g)(t)});if("application/json"===h.headers.get("content-type")){const t=await h.json();if((0,i.r)(t))if(t[0]&&"text"in t[0])r(this.bl(t));else{for(let e=0;e<t.length;e++){const s=t[e];(0,g.a)((0,i.y)(s),!1),(0,g.a)("url"in s&&(0,i.t)(s.url),!1),(0,g.a)("startTime"in s&&(0,i.a)(s.startTime),!1)}r(t)}else r(this.cl(t));return}s.e(9701).then(s.bind(s,9701)).then((async({parseResponse:t})=>{try{const{cues:e}=await t(h);r(this.bl(e))}catch(t){a(t)}}))}catch(t){a(t)}})).then((t=>(n.signal.aborted||ae.set(r,t),t))).catch((t=>{n.signal.aborted||this.U(e,t)})).finally((()=>{(0,i.t)(r)&&oe.delete(r)}));oe.set(r,a)}oe.get(r)?.then((t=>{n.signal.aborted||this.$images.set(t||[])}))}else if((0,i.r)(e))try{this.$images.set(this.jl(e))}catch(t){this.U(e,t)}else try{this.$images.set(this.cl(e))}catch(t){this.U(e,t)}return()=>{n.abort(),this.$images.set([])}}}jl(t){const e=this.dl();return t.map(((t,s)=>((0,g.a)(t.url&&(0,i.t)(t.url),!1),(0,g.a)("startTime"in t&&(0,i.a)(t.startTime),!1),{...t,url:(0,i.t)(t.url)?this.gl(t.url,e):t.url})))}cl(t){(0,g.a)((0,i.t)(t.url),!1),(0,g.a)((0,i.r)(t.tiles)&&t.tiles?.length,!1);const e=new URL(t.url),s=[],n="tile_width"in t?t.tile_width:t.tileWidth,r="tile_height"in t?t.tile_height:t.tileHeight;for(const i of t.tiles)s.push({url:e,startTime:"start"in i?i.start:i.startTime,width:n,height:r,coords:{x:i.x,y:i.y}});return s}bl(t){for(let e=0;e<t.length;e++){const s=t[e];(0,g.a)("startTime"in s&&(0,i.a)(s.startTime),!1),(0,g.a)("text"in s&&(0,i.t)(s.text),!1)}const e=[],s=this.dl();for(const n of t){const[t,r]=n.text.split("#"),a=this.fl(r);e.push({url:this.gl(t,s),startTime:n.startTime,endTime:n.endTime,width:a?.w,height:a?.h,coords:a&&(0,i.a)(a.x)&&(0,i.a)(a.y)?{x:a.x,y:a.y}:void 0})}return e}dl(){let t=(0,i.u)(this.$src);return(0,i.t)(t)&&/^https?:/.test(t)?t:location.href}gl(t,e){return/^https?:/.test(t)?new URL(t):new URL(t,e)}fl(t){if(!t)return{};const[e,s]=t.split("="),i=s?.split(","),n={};if(!e||!i)return null;for(let t=0;t<e.length;t++){const s=+i[t];isNaN(s)||(n[e[t]]=s)}return n}U(t,e){}}class ce extends i.C{constructor(){super(...arguments),this.Td=[]}static{this.props={src:null,time:0,crossOrigin:null}}static{this.state=new i.S({src:"",img:null,thumbnails:[],activeThumbnail:null,crossOrigin:null,loading:!1,error:null,hidden:!1})}onSetup(){this.a=(0,d.u)(),this.ha=he.create(this.$props.src,this.$state.crossOrigin),this.Hh(),this.setAttributes({"data-loading":this.Rb.bind(this),"data-error":this.wa.bind(this),"data-hidden":this.$state.hidden,"aria-hidden":Qt(this.$state.hidden)})}onConnect(t){(0,i.e)(this.Ud.bind(this)),(0,i.e)(this.ob.bind(this)),(0,i.e)(this.Hh.bind(this)),(0,i.e)(this.Ea.bind(this)),(0,i.e)(this.il.bind(this)),(0,i.e)(this.Fi.bind(this))}Ud(){const t=this.$state.img();t&&((0,i.l)(t,"load",this.qd.bind(this)),(0,i.l)(t,"error",this.U.bind(this)))}Hh(){const{crossOrigin:t}=this.$props,{crossOrigin:e}=this.$state,{crossOrigin:s}=this.a.$state,i=null!==t()?t():s();e.set(!0===i?"anonymous":i)}Ea(){const{src:t,loading:e,error:s}=this.$state;return t()&&(e.set(!0),s.set(null)),()=>{this.Ci(),e.set(!1),s.set(null)}}qd(){const{loading:t,error:e}=this.$state;this.Fi(),t.set(!1),e.set(null)}U(t){const{loading:e,error:s}=this.$state;e.set(!1),s.set(t)}Rb(){const{loading:t,hidden:e}=this.$state;return!e()&&t()}wa(){const{error:t}=this.$state;return!(0,i.U)(t())}ob(){const{hidden:t}=this.$state,{duration:e}=this.a.$state,s=this.ha.$images();t.set(this.wa()||!Number.isFinite(e())||0===s.length)}Gf(){return this.$props.time()}il(){let t=this.ha.$images();if(!t.length)return;let e=this.Gf(),{src:s,activeThumbnail:i}=this.$state,n=-1,r=null;for(let s=t.length-1;s>=0;s--){const i=t[s];if(e>=i.startTime&&(!i.endTime||e<i.endTime)){n=s;break}}t[n]&&(r=t[n]),i.set(r),s.set(r?.url.href||"")}Fi(){if(!this.scope||this.$state.hidden())return;const t=this.el,e=this.$state.img(),s=this.$state.activeThumbnail();if(!e||!s||!t)return;let i=s.width??e.naturalWidth,n=s?.height??e.naturalHeight,{maxWidth:r,maxHeight:a,minWidth:o,minHeight:h,width:c,height:l}=getComputedStyle(this.el);"100%"===o&&(o=parseFloat(c)+""),"100%"===h&&(h=parseFloat(l)+"");let u=Math.max(parseInt(o)/i,parseInt(h)/n),d=Math.min(Math.max(parseInt(o),parseInt(r))/i,Math.max(parseInt(h),parseInt(a))/n),p=!isNaN(d)&&d<1?d:u>1?u:1;this.pb(t,"--thumbnail-width",i*p+"px"),this.pb(t,"--thumbnail-height",n*p+"px"),this.pb(e,"width",e.naturalWidth*p+"px"),this.pb(e,"height",e.naturalHeight*p+"px"),this.pb(e,"transform",s.coords?`translate(-${s.coords.x*p}px, -${s.coords.y*p}px)`:""),this.pb(e,"max-width","none")}pb(t,e,s){t.style.setProperty(e,s),this.Td.push((()=>t.style.removeProperty(e)))}Ci(){for(const t of this.Td)t();this.Td=[]}}var le=Object.defineProperty,ue=Object.getOwnPropertyDescriptor;class de extends i.C{static{this.props={src:null,crossOrigin:null}}static{this.state=new i.S({video:null,src:null,crossOrigin:null,canPlay:!1,error:null,hidden:!1})}get video(){return this.$state.video()}onSetup(){this.a=(0,d.u)(),this.Q=(0,i.B)(re.state),this.Hh(),this.setAttributes({"data-loading":this.Rb.bind(this),"data-hidden":this.$state.hidden,"data-error":this.wa.bind(this),"aria-hidden":Qt(this.$state.hidden)})}onAttach(t){(0,i.e)(this.Gi.bind(this)),(0,i.e)(this.fd.bind(this)),(0,i.e)(this.Hh.bind(this)),(0,i.e)(this.ob.bind(this)),(0,i.e)(this.Hi.bind(this)),(0,i.e)(this.Ii.bind(this))}Gi(){const t=this.$state.video();t&&(t.readyState>=2&&this.hc(),(0,i.l)(t,"canplay",this.hc.bind(this)),(0,i.l)(t,"error",this.U.bind(this)))}fd(){const{src:t}=this.$state,{canLoad:e}=this.a.$state;t.set(e()?this.$props.src():null)}Hh(){const{crossOrigin:t}=this.$props,{crossOrigin:e}=this.$state,{crossOrigin:s}=this.a.$state,i=null!==t()?t():s();e.set(!0===i?"anonymous":i)}Rb(){const{canPlay:t,hidden:e}=this.$state;return!t()&&!e()}wa(){const{error:t}=this.$state;return!(0,i.U)(t)}ob(){const{src:t,hidden:e}=this.$state,{canLoad:s,duration:i}=this.a.$state;e.set(s()&&(!t()||this.wa()||!Number.isFinite(i())))}Hi(){const{src:t,canPlay:e,error:s}=this.$state;t(),e.set(!1),s.set(null)}hc(t){const{canPlay:e,error:s}=this.$state;e.set(!0),s.set(null),this.dispatch("can-play",{trigger:t})}U(t){const{canPlay:e,error:s}=this.$state;e.set(!1),s.set(t),this.dispatch("error",{trigger:t})}Ii(){const{video:t,canPlay:e}=this.$state,{duration:s}=this.a.$state,{pointerRate:i}=this.Q,n=t();e()&&n&&Number.isFinite(s())&&Number.isFinite(i())&&(n.currentTime=i()*s())}}function pe(t,e){const s=String(t),i=s.length;return i<e?`${"0".repeat(e-i)}${t}`:s}function fe(t){return{hours:Math.trunc(t/3600),minutes:Math.trunc(t%3600/60),seconds:Math.trunc(t%60),fraction:Number((t-Math.trunc(t)).toPrecision(3))}}function ge(t,{padHrs:e=null,padMins:s=null,showHrs:n=!1,showMs:r=!1}={}){const{hours:a,minutes:o,seconds:h,fraction:c}=fe(t),l=e?pe(a,2):a,u=`${s||(0,i.U)(s)&&t>=3600?pe(o,2):o}:${pe(h,2)}${r&&c>0?`.${String(c).replace(/^0?\./,"")}`:""}`;return a>0||n?`${l}:${u}`:u}function me(t){const e=[],{hours:s,minutes:i,seconds:n}=fe(t);return s>0&&e.push(`${s} hour`),i>0&&e.push(`${i} min`),(n>0||0===e.length)&&e.push(`${n} sec`),e.join(" ")}((t,e,s,i)=>{for(var n,r=ue(e,s),a=t.length-1;a>=0;a--)(n=t[a])&&(r=n(e,s,r)||r);r&&le(e,s,r)})([i.Y],de.prototype,"video");var be=Object.defineProperty,ye=Object.getOwnPropertyDescriptor;class ve extends i.C{static{this.props={type:"pointer",format:null,showHours:!1,showMs:!1,padHours:null,padMinutes:null,decimalPlaces:2}}onSetup(){this.Q=(0,i.B)(re.state),this.Sb=(0,i.v)(se),this.Ji=(0,i.q)(this.getValueText.bind(this))}getValueText(){const{type:t,format:e,decimalPlaces:s,padHours:i,padMinutes:n,showHours:r,showMs:a}=this.$props,{value:o,pointerValue:h,min:c,max:l}=this.Q,u=e()??this.Sb.default,d="current"===t()?o():h();if("percent"===u){const t=d/(l()-c())*100;return(this.Sb.percent??b.r)(t,s())+""}return"time"===u?(this.Sb.time??ge)(d,{padHrs:i(),padMins:n(),showHrs:r(),showMs:a()}):this.Sb.value?.(d)??d.toFixed(2)}}((t,e,s,i)=>{for(var n,r=ye(e,s),a=t.length-1;a>=0;a--)(n=t[a])&&(r=n(e,s,r)||r);r&&be(e,s,r)})([i.a3],ve.prototype,"getValueText");class $e extends i.C{constructor(){super(...arguments),this.Hf=(0,i.p)((()=>{const{Fc:t,ta:e}=this.Q;if(t())return;const s=this.el,{offset:i,noClamp:n}=this.$props;!function(t,{clamp:e,offset:s,orientation:i}){const n=getComputedStyle(t),r=parseFloat(n.width),a=parseFloat(n.height),o={top:null,right:null,bottom:null,left:null};if(o["horizontal"===i?"bottom":"left"]=`calc(100% + var(--media-slider-preview-offset, ${s}px))`,"horizontal"===i){const t=r/2;if(e){const e=`max(0px, calc(var(--slider-pointer) - ${t}px))`,s=`calc(100% - ${r}px)`;o.left=`min(${e}, ${s})`}else o.left=`calc(var(--slider-pointer) - ${t}px)`}else{const t=a/2;if(e){const e=`max(${t}px, calc(var(--slider-pointer) - ${t}px))`,s=`calc(100% - ${a}px)`;o.bottom=`min(${e}, ${s})`}else o.bottom=`calc(var(--slider-pointer) - ${t}px)`}Object.assign(t.style,o)}(s,{clamp:!n(),offset:i(),orientation:e()})}))}static{this.props={offset:0,noClamp:!1}}onSetup(){this.Q=(0,i.v)(ie);const{active:t}=(0,i.B)(re.state);this.setAttributes({"data-visible":t})}onAttach(t){Object.assign(t.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(t){const{Cf:e}=this.Q;e.set(t),(0,i.o)((()=>e.set(null))),(0,i.e)(this.Hf.bind(this));const s=new ResizeObserver(this.Hf.bind(this));s.observe(t),(0,i.o)((()=>s.disconnect()))}}class we extends i.C{constructor(){super(...arguments),this.If=q(this.ab.bind(this),25)}static{this.props={...ne.props,keyStep:5,shiftKeyMultiplier:2}}static{this.state=Gt}onSetup(){this.a=(0,d.u)(),(0,i.W)(se,{default:"percent"}),new ne({Ka:this.$props.step,Pb:this.$props.keyStep,K:this.$props.disabled,Ob:Math.round,ia:this.ia.bind(this),ja:this.ja.bind(this),nb:this.nb.bind(this),o:this.o.bind(this)}).attach(this),(0,i.e)(this.Fd.bind(this))}onAttach(t){t.setAttribute("data-media-volume-slider",""),(0,p.s)(t,"aria-label","Volume");const{canSetVolume:e}=this.a.$state;this.setAttributes({"data-supported":e,"aria-hidden":Qt((()=>!e()))})}ia(){const{value:t}=this.$state;return Math.round(t())}ja(){const{value:t,max:e}=this.$state;return(0,b.r)(t()/e()*100,2)+"%"}Fd(){const{muted:t,volume:e}=this.a.$state,s=t()?0:100*e();this.$state.value.set(s),this.dispatch("value-change",{detail:s})}ab(t){if(!t.trigger)return;const e=(0,b.r)(t.detail/100,3);this.a.remote.changeVolume(e,t)}o(t){this.If(t)}nb(t){this.If(t)}}class ke extends i.C{constructor(){super(),this.Jf=(0,i.n)(null),this.Wd=!1;const{noSwipeGesture:t}=this.$props;new ne({ni:()=>!t(),Ka:this.Ka.bind(this),Pb:this.Pb.bind(this),K:this.K.bind(this),Ob:this.Ob,ia:this.ia.bind(this),ja:this.ja.bind(this),Qd:this.Qd.bind(this),nb:this.nb.bind(this),Ec:this.Ec.bind(this),o:this.o.bind(this)})}static{this.props={...ne.props,step:.1,keyStep:5,shiftKeyMultiplier:2,pauseWhileDragging:!1,noSwipeGesture:!1,seekingRequestThrottle:100}}static{this.state=Gt}onSetup(){this.a=(0,d.u)(),(0,i.W)(se,{default:"time",value:this.Ki.bind(this),time:this.Li.bind(this)}),this.setAttributes({"data-chapters":this.Mi.bind(this)}),this.setStyles({"--slider-progress":this.Ni.bind(this)}),(0,i.e)(this.jb.bind(this)),(0,i.e)(this.Oi.bind(this))}onAttach(t){t.setAttribute("data-media-time-slider",""),(0,p.s)(t,"aria-label","Seek")}onConnect(t){(0,i.e)(this.Pi.bind(this)),(0,o.w)(this.a.textTracks,"chapters",this.Jf.set)}Ni(){const{bufferedEnd:t,duration:e}=this.a.$state;return(0,b.r)(100*Math.min(t()/Math.max(e(),1),1),3)+"%"}Mi(){const{duration:t}=this.a.$state;return this.Jf()?.cues.length&&Number.isFinite(t())&&t()>0}Oi(){this.Vd=q(this.qa.bind(this),this.$props.seekingRequestThrottle())}jb(){const{currentTime:t}=this.a.$state,{value:e,dragging:s}=this.$state,n=this.Qi(t());(0,i.u)(s)||(e.set(n),this.dispatch("value-change",{detail:n}))}Pi(){const t=this.a.player.el,{Cf:e}=(0,i.v)(ie);t&&e()&&(0,i.s)(t,"data-preview",this.$state.active())}qa(t,e){this.a.remote.seeking(t,e)}Ri(t,e,s){this.Vd.cancel();const{live:i}=this.a.$state;i()&&e>=99?this.a.remote.seekToLiveEdge(s):this.a.remote.seek(t,s)}Qd(t){const{pauseWhileDragging:e}=this.$props;if(e()){const{paused:e}=this.a.$state;this.Wd=!e(),this.a.remote.pause(t)}}nb(t){this.Vd(this.Tb(t.detail),t)}Ec(t){const e=t.detail;this.Ri(this.Tb(e),e,t);const{pauseWhileDragging:s}=this.$props;s()&&this.Wd&&(this.a.remote.play(t),this.Wd=!1)}o(t){const{dragging:e}=this.$state;!e()&&t.trigger&&this.Ec(t)}Ka(){const t=this.$props.step()/this.a.$state.duration()*100;return Number.isFinite(t)?t:1}Pb(){const t=this.$props.keyStep()/this.a.$state.duration()*100;return Number.isFinite(t)?t:1}Ob(t){return(0,b.r)(t,3)}K(){const{canSeek:t}=this.a.$state;return this.$props.disabled()||!t()}ia(){const{value:t}=this.$state;return Math.round(t())}ja(){const t=this.Tb(this.$state.value()),{duration:e}=this.a.$state;return Number.isFinite(t)?`${me(t)} out of ${me(e())}`:"live"}Tb(t){const{duration:e}=this.a.$state;return(0,b.r)(t/100*e(),5)}Qi(t){const{liveEdge:e,duration:s}=this.a.$state,i=Math.max(0,Math.min(1,e()?1:Math.min(t,s())/s()));return Number.isNaN(i)?0:Number.isFinite(i)?100*i:100}Ki(t){const e=this.Tb(t),{live:s,duration:i}=this.a.$state;return Number.isFinite(e)?(s()?e-i():e).toFixed(0):"LIVE"}Li(t,e){const s=this.Tb(t),{live:i,duration:n}=this.a.$state,r=i()?s-n():s;return Number.isFinite(s)?`${r<0?"-":""}${ge(Math.abs(r),e)}`:"LIVE"}}var Te=Object.defineProperty,xe=Object.getOwnPropertyDescriptor,Pe=(t,e,s,i)=>{for(var n,r=i>1?void 0:i?xe(e,s):e,a=t.length-1;a>=0;a--)(n=t[a])&&(r=(i?n(e,s,r):n(r))||r);return i&&r&&Te(e,s,r),r};class Se extends i.C{constructor(){super(...arguments),this.La=null,this.R=[],this.Gc=(0,i.n)(null),this._=(0,i.n)([]),this.Ub=(0,i.n)(-1),this.Hc=(0,i.n)(-1),this.Zd=0,this.Xi=(0,i.p)((t=>{let e,s=this._(),{clipStartTime:i}=this.a.$state,n=i(),r=this.Hk(s);for(let i=this.Zd;i<this.R.length;i++)if(e=this.ae(s[i],t,n,r),this.R[i]?.style.setProperty("--chapter-progress",e+"%"),e<100){this.Zd=i;break}})),this.Yi=(0,i.q)(this.Zi.bind(this)),this.$i=F((()=>{const t=(0,i.u)(this.Gc);this.scope&&t&&t.cues.length&&(this._.set(this._i(t.cues)),this.Ub.set(0),this.Zd=0)}),150,!0)}static{this.props={disabled:!1}}get cues(){return this._()}get activeCue(){return this._()[this.Ub()]||null}get activePointerCue(){return this._()[this.Hc()]||null}onSetup(){this.a=(0,d.u)(),this.Xd=(0,i.B)(ke.state)}onAttach(t){(0,o.w)(this.a.textTracks,"chapters",this.Kf.bind(this)),(0,i.e)(this._d.bind(this))}onConnect(){(0,i.o)((()=>this.H.bind(this)))}onDestroy(){this.Kf(null)}setRefs(t){if(this.R=t,this.Yd?.dispose(),1===this.R.length){const t=this.R[0];t.style.width="100%",t.style.setProperty("--chapter-fill","var(--slider-fill)"),t.style.setProperty("--chapter-progress","var(--slider-progress)")}else this.R.length>0&&(0,i.h)((()=>this.Si()),this.Yd=(0,i.x)())}Kf(t){(0,i.u)(this.Gc)!==t&&(this.H(),this.Gc.set(t))}H(){this.R=[],this._.set([]),this.Ub.set(-1),this.Hc.set(-1),this.Zd=0,this.Yd?.dispose()}Si(){this.R.length&&((0,i.e)(this.Ti.bind(this)),(0,i.e)(this.Ui.bind(this)),(0,i.e)(this.Vi.bind(this)),(0,i.e)(this.Wi.bind(this)))}Ti(){const t=this._();if(!t.length)return;let e,{clipStartTime:s,clipEndTime:i}=this.a.$state,n=s(),r=(i()||t[t.length-1].endTime)-n,a=100;for(let s=0;s<t.length;s++)if(e=t[s],this.R[s]){const i=s===t.length-1?a:(0,b.r)((e.endTime-Math.max(n,e.startTime))/r*100,3);this.R[s].style.width=i+"%",a-=i}}Ui(){let{liveEdge:t,clipStartTime:e,duration:s}=this.a.$state,{fillPercent:n,value:r}=this.Xd,a=this._(),o=t(),h=(0,i.u)(this.Ub),c=a[h],l=o?this._.length-1:this.Lf(c&&c.startTime/s()*100<=(0,i.u)(r)?h:0,n());o||!c?this.$d(0,a.length,"100%"):l>h?this.$d(h,l,"100%"):l<h&&this.$d(l+1,h+1,"0%");const u=o?"100%":this.ae(a[l],n(),e(),this.Hk(a))+"%";this.Mf(this.R[l],u),this.Ub.set(l)}Vi(){let{pointing:t,pointerPercent:e}=this.Xd;if(!t())return void this.Hc.set(-1);const s=this.Lf(0,e());this.Hc.set(s)}$d(t,e,s){for(let i=t;i<e;i++)this.Mf(this.R[i],s)}Mf(t,e){t&&t.style.setProperty("--chapter-fill",e)}Lf(t,e){let s=0,i=this._();if(0===e)return 0;if(100===e)return i.length-1;let{clipStartTime:n}=this.a.$state,r=n(),a=this.Hk(i);for(let n=t;n<i.length;n++)if(s=this.ae(i[n],e,r,a),s>=0&&s<100)return n;return 0}Wi(){this.Xi(this.Yi())}Zi(){const{bufferedEnd:t,duration:e}=this.a.$state;return 100*(0,b.r)(Math.min(t()/Math.max(e(),1),1),3)}Hk(t){const{clipEndTime:e}=this.a.$state,s=e();return s>0?s:t[t.length-1]?.endTime||0}ae(t,e,s,i){if(0===this._().length)return 0;const n=i-s,r=Math.max(0,t.startTime-s),a=Math.min(i,t.endTime)-s,o=r/n,h=100*o,c=100*Math.min(1,o+(a-r)/n);return Math.max(0,(0,b.r)(e>=c?100:(e-h)/(c-h)*100,3))}_i(t){let e=[],{clipStartTime:s,clipEndTime:i,duration:n}=this.a.$state,r=s(),a=i()||1/0;const o=(t=t.filter((t=>t.startTime<=a&&t.endTime>=r)))[0];o&&o.startTime>r&&e.push(new window.VTTCue(r,o.startTime,""));for(let s=0;s<t.length-1;s++){const i=t[s],n=t[s+1];if(e.push(i),n){const t=n.startTime-i.endTime;t>0&&e.push(new window.VTTCue(i.endTime,i.endTime+t,""))}}const h=t[t.length-1];if(h){e.push(h);const t=n();t>=0&&t-h.endTime>1&&e.push(new window.VTTCue(h.endTime,n(),""))}return e}_d(){if(!this.scope)return;const{disabled:t}=this.$props;if(t())return this._.set([]),this.Ub.set(0),void(this.Zd=0);const e=this.Gc();if(e){const t=this.$i.bind(this);t(),(0,i.o)((0,i.l)(e,"add-cue",t)),(0,i.o)((0,i.l)(e,"remove-cue",t)),(0,i.e)(this.Fk.bind(this))}return this.La=this.aj(),this.La&&(0,i.e)(this.bj.bind(this)),()=>{this.La&&(this.La.textContent="",this.La=null)}}Fk(){this.a.$state.duration(),this.$i()}bj(){const t=this.activePointerCue||this.activeCue;this.La&&(this.La.textContent=t?.text||"")}cj(){let t=this.el;for(;t&&"slider"!==t.getAttribute("role");)t=t.parentElement;return t}aj(){const t=this.cj();return t?t.querySelector('[data-part="chapter-title"]'):null}}Pe([i.Y],Se.prototype,"cues",1),Pe([i.Y],Se.prototype,"activeCue",1),Pe([i.Y],Se.prototype,"activePointerCue",1),Pe([i.a3],Se.prototype,"setRefs",1);const Ce=(0,i.V)(),Ee=["a[href]","[tabindex]","input","select","button"].map((t=>`${t}:not([aria-hidden='true'])`)).join(","),Ae=new Set(["Escape","Tab","ArrowUp","ArrowDown","Home","PageUp","End","PageDown","Enter"," "]);class je{constructor(t){this.j=t,this.ka=0,this.xa=null,this.da=[]}get r(){return this.da}Nf(t){return(0,i.l)(t,"focus",this.Lb.bind(this)),this.xa=t,(0,i.o)((()=>{this.xa=null})),this}zc(){this.xa&&(this.ea(),(0,i.l)(this.xa,"keyup",this.zb.bind(this)),(0,i.l)(this.xa,"keydown",this.Ab.bind(this)),(0,i.o)((()=>{this.ka=0,this.da=[]})))}ea(){this.ka=0,this.da=this.dj()}Of(t=this.Pf()){const e=this.da[t],s=this.j.ej();e&&s&&requestAnimationFrame((()=>{s.scrollTop=e.offsetTop-s.offsetHeight/2+e.offsetHeight/2}))}qb(t){this.ka=t,this.da[t]?.focus(),this.Of(t)}Pf(){return this.da.findIndex((t=>"true"===t.getAttribute("aria-checked")))}Lb(){this.ea(),setTimeout((()=>{const t=this.Pf();this.qb(t>=0?t:0)}),100)}zb(t){Ae.has(t.key)&&(t.stopPropagation(),t.preventDefault())}Ab(t){if(Ae.has(t.key))switch(t.stopPropagation(),t.preventDefault(),t.key){case"Escape":this.j.fj(t);break;case"Tab":this.qb(this.be(t.shiftKey?-1:1));break;case"ArrowUp":this.qb(this.be(-1));break;case"ArrowDown":this.qb(this.be(1));break;case"Home":case"PageUp":this.qb(0);break;case"End":case"PageDown":this.qb(this.da.length-1)}}be(t){let e=this.ka;do{e=(e+t+this.da.length)%this.da.length}while(null===this.da[e]?.offsetParent);return e}dj(){if(!this.xa)return[];const t=this.xa.querySelectorAll(Ee),e=[],s=t=>"menu"===t.getAttribute("role");for(const i of t)i instanceof HTMLElement&&null!==i.offsetParent&&(0,p.n)(this.xa,i,s)&&e.push(i);return e}}var Le=Object.defineProperty,Oe=Object.getOwnPropertyDescriptor,qe=(t,e,s,i)=>{for(var n,r=i>1?void 0:i?Oe(e,s):e,a=t.length-1;a>=0;a--)(n=t[a])&&(r=(i?n(e,s,r):n(r))||r);return i&&r&&Le(e,s,r),r};let Me=0;class De extends i.C{constructor(){super(),this.L=(0,i.n)(!1),this.Fc=(0,i.n)(!1),this.C=(0,i.n)(null),this.u=(0,i.n)(null),this.Qf=(0,i.n)(!1),this.Vb=new Set,this.Ic=null,this.rj=this.sj.bind(this),this.pj=this.tj.bind(this),this.qj=this.uj.bind(this),this.O=(0,i.p)((()=>{const t=(0,i.u)(this.u);if(!t)return;let e=0,s=getComputedStyle(t),n=[...t.children];for(const t of["paddingTop","paddingBottom","borderTopWidth","borderBottomWidth"])e+=parseFloat(s[t])||0;for(const t of n)if(t instanceof HTMLElement&&"contents"===t.style.display)n.push(...t.children);else if(3===t.nodeType)e+=parseFloat(getComputedStyle(t).fontSize);else if(t instanceof HTMLElement){const s=getComputedStyle(t);if("none"===s.display)continue;e+=t.offsetHeight+(parseFloat(s.marginTop)||0)+(parseFloat(s.marginBottom)||0)}(0,i.j)(t,"--menu-height",e+"px")}));const{showDelay:t}=this.$props;this.Jc=new qt({C:this.C,u:this.u,yf:t,zc:(t,e,s)=>{(0,p.o)(t,(t=>{this.L()?s(t):e(t)}));const i=this.gj();i&&(0,p.o)(i,(t=>{t.stopPropagation(),s(t)}))},B:this.hj.bind(this)})}static{this.props={showDelay:0}}get triggerElement(){return this.C()}get contentElement(){return this.u()}get isSubmenu(){return!!this.ee}onSetup(){this.a=(0,d.u)();const t=++Me;this.ce=`media-menu-${t}`,this.de=`media-menu-button-${t}`,this.rb=new je({ej:this.ij.bind(this),fj:this.close.bind(this)}),(0,i.a6)(Ce)&&(this.ee=(0,i.v)(Ce)),this.setAttributes({"data-open":this.L,"data-submenu":this.isSubmenu,"data-disabled":this.K.bind(this)}),(0,i.W)(Ce,{jj:this.C,L:this.L,Wb:(0,i.n)(""),Ma:this.Ma.bind(this),fe:this.fe.bind(this),ge:this.ge.bind(this),he:this.he.bind(this),ie:this.ie.bind(this),je:this.je.bind(this)})}onAttach(t){t.style.setProperty("display","contents"),this.rb.Nf(t)}onConnect(t){(0,i.e)(this.kj.bind(this)),this.isSubmenu&&this.ee?.je(this)}onDestroy(){this.C.set(null),this.u.set(null),this.Ic=null}kj(){const t=this.lj();this.isSubmenu||this.O(),this.Rf(t),t&&((0,i.e)((()=>{const{height:t}=this.a.$state,e=this.u();e&&(0,i.j)(e,"--player-height",t()+"px")})),this.rb.zc(),this.listen("pointerup",this.mj.bind(this)),(0,i.l)(window,"pointerup",this.nj.bind(this)))}fe(t){const e=t.el,s=this.isSubmenu,n=Qt(this.K.bind(this));(0,p.s)(e,"tabindex",s?"-1":"0"),(0,p.s)(e,"role",s?"menuitem":"button"),(0,i.s)(e,"id",this.de),(0,i.s)(e,"aria-haspopup","menu"),(0,i.s)(e,"aria-expanded","false"),(0,i.s)(e,"data-submenu",this.isSubmenu),this.isSubmenu||this.Sf(e),(0,i.e)((()=>{(0,i.s)(e,"data-open",this.L()),(0,i.s)(e,"aria-disabled",n())})),this.C.set(e),(0,i.o)((()=>{this.C.set(null)}))}ge(t){const e=t.el;if(e.style.setProperty("display","none"),(0,i.s)(e,"id",this.ce),(0,p.s)(e,"role","menu"),(0,p.s)(e,"tabindex","-1"),(0,i.s)(e,"data-submenu",this.isSubmenu),this.u.set(e),(0,i.o)((()=>this.u.set(null))),(0,i.e)((()=>(0,i.s)(e,"data-open",this.L()))),this.rb.Nf(e),this.Rf(!1),!this.isSubmenu){const e=this.Xm.bind(this);t.listen("transitionstart",e),t.listen("transitionend",e),t.listen("animationend",this.O),t.listen("vds-menu-resize",this.O)}}he(t){this.Ic=t}Sf(t){(0,i.l)(t,"click",(t=>t.stopPropagation())),(0,i.l)(t,"pointerup",(t=>t.stopPropagation()))}Rf(t){const e=(0,i.u)(this.u);e&&(0,i.s)(e,"aria-hidden",(0,i.a4)(!t))}ie(t){this.Qf.set(t)}hj(t,e){if(e?.stopPropagation(),this.L()===t)return;if(this.K())return void(t&&this.Jc.hide(e));this.el?.dispatchEvent(new Event("vds-menu-resize",{bubbles:!0,composed:!0}));const s=this.C(),n=this.u();if(s&&((0,i.s)(s,"aria-controls",t&&this.ce),(0,i.s)(s,"aria-expanded",(0,i.a4)(t))),n&&(0,i.s)(n,"aria-labelledby",t&&this.de),this.L.set(t),this.oj(e),(0,i.T)(),(0,i.K)(e)){t?n?.focus():s?.focus();for(const t of[this.el,n])t&&t.setAttribute("data-keyboard","")}else for(const t of[this.el,n])t&&t.removeAttribute("data-keyboard");this.dispatch(t?"open":"close",{trigger:e}),t?(this.isSubmenu||this.a.activeMenu===this||(this.a.activeMenu?.close(e),this.a.activeMenu=this),this.Ic?.ke?.(e)):(this.isSubmenu?setTimeout((()=>{for(const t of this.Vb)t.close(e)}),300):this.a.activeMenu=null,this.Ic?.Tj?.(e)),t&&!(0,i.K)(e)&&requestAnimationFrame((()=>{this.rb.ea(),setTimeout((()=>{this.rb.Of()}),100)}))}lj(){return!this.K()&&this.L()}K(){return this.Fc()||this.Qf()}Ma(t){this.Fc.set(t)}mj(t){t.stopPropagation()}nj(t){if(t.target instanceof Node&&!this.u()?.contains(t.target))return this.isSubmenu?setTimeout(this.close.bind(this,t),800):void this.close(t)}gj(){const t=this.el?.querySelector('[data-part="close-target"]');return this.el&&t&&(0,p.n)(this.el,t,(t=>"menu"===t.getAttribute("role")))?t:null}ij(){if(this.isSubmenu){let t=this.el;for(;t&&"media-menu"!==t.tagName&&t.hasAttribute("data-submenu");)t=t.parentNode;return t}return(0,i.u)(this.u)||null}oj(t){this.isSubmenu||(this.L()?this.a.remote.pauseControls(t):this.a.remote.resumeControls(t))}je(t){this.Vb.add(t),(0,i.l)(t,"open",this.pj),(0,i.l)(t,"close",this.qj),(0,i.o)(this.rj)}sj(t){this.Vb.delete(t)}tj(t){this.isSubmenu&&this.triggerElement?.setAttribute("aria-hidden","true");for(const e of this.Vb)if(e!==t.target)for(const t of[e.el,e.triggerElement])t?.setAttribute("aria-hidden","true")}uj(){this.isSubmenu&&this.triggerElement?.setAttribute("aria-hidden","false");for(const t of this.Vb)for(const e of[t.el,t.triggerElement])e?.setAttribute("aria-hidden","false")}Xm(t){const e=this.u();if(e&&"height"===t.propertyName){const s="transitionstart"===t.type;(0,i.s)(e,"data-resizing",s)}}open(t){(0,i.u)(this.L)||(this.Jc.show(t),(0,i.T)())}close(t){(0,i.u)(this.L)&&(this.Jc.hide(t),(0,i.T)())}}qe([i.Y],De.prototype,"triggerElement",1),qe([i.Y],De.prototype,"contentElement",1),qe([i.Y],De.prototype,"isSubmenu",1),qe([i.a3],De.prototype,"open",1),qe([i.a3],De.prototype,"close",1);var Re=Object.defineProperty,Fe=Object.getOwnPropertyDescriptor;class Ie extends i.C{constructor(){super(),this.zn=(0,i.n)(null),new gt}static{this.props={disabled:!1}}get expanded(){return this.l?.L()??!1}onSetup(){this.l=(0,i.v)(Ce)}onAttach(t){this.l.fe(this),(0,i.e)(this.Qb.bind(this)),(0,p.s)(t,"type","button")}onConnect(t){(0,i.e)(this.An.bind(this)),this.vf();const e=new MutationObserver(this.vf.bind(this));e.observe(t,{attributeFilter:["data-part"],childList:!0,subtree:!0}),(0,i.o)((()=>e.disconnect())),(0,p.o)(t,(t=>{this.dispatch("select",{trigger:t})}))}Qb(){this.l.ie(this.$props.disabled())}An(){const t=this.zn();t&&(0,i.e)((()=>{const e=this.l.Wb();e&&(t.textContent=e)}))}vf(){const t=this.el?.querySelector('[data-part="hint"]');this.zn.set(t??null)}}((t,e,s,i)=>{for(var n,r=Fe(e,s),a=t.length-1;a>=0;a--)(n=t[a])&&(r=n(e,s,r)||r);r&&Re(e,s,r)})([i.Y],Ie.prototype,"expanded");class Ne extends i.C{constructor(){super(...arguments),this.A=null}static{this.props={container:null,disabled:!1}}onSetup(){this.a=(0,d.u)(),(0,i.W)(Ve,{Ja:this.vj.bind(this)})}onAttach(t){t.style.setProperty("display","contents")}onConnect(t){}onDestroy(){this.A?.remove(),this.A=null}vj(t){this.Tf(!1),this.A=t,(0,p.r)((()=>{(0,p.r)((()=>{this.connectScope&&(0,i.e)(this.Qb.bind(this))}))}))}Qb(){const{fullscreen:t}=this.a.$state,{disabled:e}=this.$props,s=e();this.Tf("fullscreen"===s?!t():!s)}Tf(t){if(!this.A)return;let e=this.wj(this.$props.container());if(!e)return;const s=this.A.parentElement===e;(0,i.s)(this.A,"data-portal",t),t?s||(this.A.remove(),e.append(this.A)):s&&this.A.parentElement===e&&(this.A.remove(),this.el?.append(this.A))}wj(t){return t instanceof HTMLElement?t:t?document.querySelector(t):document.body}}const Ve=(0,i.V)();class He extends i.C{static{this.props={placement:null,offset:0,alignOffset:0}}constructor(){super(),new gt;const{placement:t}=this.$props;this.setAttributes({"data-placement":t})}onAttach(t){if(this.l=(0,i.v)(Ce),this.l.ge(this),(0,i.a6)(Ve)){const e=(0,i.v)(Ve);e&&((0,i.W)(Ve,null),e.Ja(t),(0,i.o)((()=>e.Ja(null))))}}onConnect(t){(0,i.e)(this.Nd.bind(this))}Nd(){if(!this.el)return;const t=this.$props.placement();if(t){Object.assign(this.el.style,{position:"absolute",top:0,left:0,width:"max-content"});const{offset:e,alignOffset:s}=this.$props;return(0,p.k)(this.el,this.Cc(),t,{offsetVarName:"media-menu",xOffset:s(),yOffset:e()})}this.el.removeAttribute("style"),this.el.style.display="none"}Cc(){return this.l.jj()}}const Qe=(0,i.V)();class We extends i.a1{constructor(){super(...arguments),this.sb=new Set,this.la=(0,i.n)(""),this.d=null,this.Aj=this.B.bind(this)}get xj(){return Array.from(this.sb).map((t=>t.la()))}get value(){return this.la()}set value(t){this.B(t)}onSetup(){(0,i.W)(Qe,{add:this.yj.bind(this),remove:this.zj.bind(this)})}onAttach(t){(0,i.a6)(Ce)||(0,p.s)(t,"role","radiogroup"),this.setAttributes({value:this.la})}onDestroy(){this.sb.clear()}yj(t){this.sb.has(t)||(this.sb.add(t),t.Kc=this.Aj,t.Xb(t.la()===this.la()))}zj(t){t.Kc=null,this.sb.delete(t)}B(t,e){const s=(0,i.u)(this.la);if(!t||t===s)return;const n=this.Uf(s),r=this.Uf(t);n?.Xb(!1,e),r?.Xb(!0,e),this.la.set(t),this.o?.(t,e)}Uf(t){for(const e of this.sb)if(t===(0,i.u)(e.la))return e;return null}}var Ke=Object.defineProperty,Be=Object.getOwnPropertyDescriptor,Ye=(t,e,s,i)=>{for(var n,r=i>1?void 0:i?Be(e,s):e,a=t.length-1;a>=0;a--)(n=t[a])&&(r=(i?n(e,s,r):n(r))||r);return i&&r&&Ke(e,s,r),r};class ze extends i.C{static{this.props={value:""}}get values(){return this.d.xj}get value(){return this.d.value}set value(t){this.d.value=t}constructor(){super(),this.d=new We,this.d.o=this.o.bind(this)}onSetup(){(0,i.e)(this.D.bind(this))}D(){this.d.value=this.$props.value()}o(t,e){const s=this.createEvent("change",{detail:t,trigger:e});this.dispatch(s)}}Ye([i.Y],ze.prototype,"values",1),Ye([i.Y],ze.prototype,"value",1);var Ue=Object.defineProperty,Je=Object.getOwnPropertyDescriptor;class Xe extends i.C{constructor(){super(),this.Na=(0,i.n)(!1),this.d={la:this.$props.value,Xb:this.Xb.bind(this),Kc:null},new gt}static{this.props={value:""}}get checked(){return this.Na()}onSetup(){this.setAttributes({value:this.$props.value,"data-checked":this.Na,"aria-checked":Qt(this.Na)})}onAttach(t){const e=(0,i.a6)(Ce);(0,p.s)(t,"tabindex",e?"-1":"0"),(0,p.s)(t,"role",e?"menuitemradio":"radio"),(0,i.e)(this.D.bind(this))}onConnect(t){this.Bj(),(0,p.o)(t,this.v.bind(this)),(0,i.o)(this.ya.bind(this))}ya(){(0,i.h)((()=>{(0,i.v)(Qe).remove(this.d)}),this.connectScope)}Bj(){(0,i.v)(Qe).add(this.d)}D(){const{value:t}=this.$props,e=t();(0,i.u)(this.Na)&&this.d.Kc?.(e)}v(t){(0,i.u)(this.Na)||(this.B(!0,t),this.Cj(t),this.d.Kc?.((0,i.u)(this.$props.value),t))}Xb(t,e){(0,i.u)(this.Na)!==t&&this.B(t,e)}B(t,e){this.Na.set(t),this.dispatch("change",{detail:t,trigger:e})}Cj(t){this.dispatch("select",{trigger:t})}}((t,e,s,i)=>{for(var n,r=Je(e,s),a=t.length-1;a>=0;a--)(n=t[a])&&(r=n(e,s,r)||r);r&&Ue(e,s,r)})([i.Y],Xe.prototype,"checked");var _e=Object.defineProperty,Ge=Object.getOwnPropertyDescriptor,Ze=(t,e,s,i)=>{for(var n,r=i>1?void 0:i?Ge(e,s):e,a=t.length-1;a>=0;a--)(n=t[a])&&(r=(i?n(e,s,r):n(r))||r);return i&&r&&_e(e,s,r),r};class ts extends i.C{constructor(){super(),this.ka=(0,i.n)(0),this.z=(0,i.n)(null),this.J=(0,i.n)([]),this.d=new We,this.d.o=this.o.bind(this)}static{this.props={thumbnails:null}}get value(){return this.d.value}get disabled(){return!this.J()?.length}onSetup(){this.a=(0,d.u)(),(0,i.a6)(Ce)&&(this.l=(0,i.v)(Ce));const{thumbnails:t}=this.$props;this.setAttributes({"data-thumbnails":()=>!!t()})}onAttach(t){this.l?.he({ke:this.ke.bind(this)})}getOptions(){const{clipStartTime:t,clipEndTime:e}=this.a.$state,s=t(),i=e()||1/0;return this.J().map(((t,e)=>({cue:t,value:e.toString(),label:t.text,startTime:ge(Math.max(0,t.startTime-s)),duration:me(Math.min(i,t.endTime)-Math.max(s,t.startTime))})))}ke(){(0,i.u)((()=>this.jb()))}onConnect(t){(0,i.e)(this.D.bind(this)),(0,i.e)(this.jb.bind(this)),(0,i.e)(this.ma.bind(this)),(0,i.e)(this.tk.bind(this)),(0,o.w)(this.a.textTracks,"chapters",this.z.set)}tk(){const t=this.z();if(!t)return;const e=this.$i.bind(this,t);return e(),(0,i.l)(t,"add-cue",e),(0,i.l)(t,"remove-cue",e),()=>{this.J.set([])}}$i(t){const{clipStartTime:e,clipEndTime:s}=this.a.$state,i=e(),n=s()||1/0;this.J.set([...t.cues].filter((t=>t.startTime<=n&&t.endTime>=i)))}D(){this.d.value=this.na()}jb(){if(!this.l?.L())return;if(!this.z())return void this.ka.set(-1);const{realCurrentTime:t,clipStartTime:e,clipEndTime:s}=this.a.$state,n=e(),r=s()||1/0,a=t(),h=this.J().findIndex((t=>(0,o.d)(t,a)));if(this.ka.set(h),h>=0){const t=this.J()[h],e=this.el.querySelector("[aria-checked='true']"),s=Math.max(n,t.startTime),o=Math.min(r,t.endTime)-s,c=Math.max(0,a-s)/o*100;e&&(0,i.j)(e,"--progress",(0,b.r)(c,3)+"%")}}ma(){this.l?.Ma(this.disabled)}na(){return this.ka().toString()}o(t,e){if(this.disabled||!e)return;const s=+t,n=this.J(),{clipStartTime:r}=this.a.$state;(0,i.a)(s)&&n?.[s]&&(this.ka.set(s),this.a.remote.seek(n[s].startTime-r(),e),this.dispatch("change",{detail:n[s],trigger:e}))}}Ze([i.Y],ts.prototype,"value",1),Ze([i.Y],ts.prototype,"disabled",1),Ze([i.a3],ts.prototype,"getOptions",1);var es=Object.defineProperty,ss=Object.getOwnPropertyDescriptor,is=(t,e,s,i)=>{for(var n,r=i>1?void 0:i?ss(e,s):e,a=t.length-1;a>=0;a--)(n=t[a])&&(r=(i?n(e,s,r):n(r))||r);return i&&r&&es(e,s,r),r};class ns extends i.C{static{this.props={emptyLabel:"Default"}}get value(){return this.d.value}get disabled(){const{audioTracks:t}=this.a.$state;return t().length<=1}constructor(){super(),this.d=new We,this.d.o=this.o.bind(this)}onSetup(){this.a=(0,d.u)(),(0,i.a6)(Ce)&&(this.l=(0,i.v)(Ce))}onConnect(t){(0,i.e)(this.D.bind(this)),(0,i.e)(this.ma.bind(this)),(0,i.e)(this.Oa.bind(this))}getOptions(){const{audioTracks:t}=this.a.$state;return t().map((t=>({track:t,label:t.label,value:t.label.toLowerCase()})))}D(){this.d.value=this.na()}Oa(){const{emptyLabel:t}=this.$props,{audioTrack:e}=this.a.$state,s=e();this.l?.Wb.set(s?.label??t())}ma(){this.l?.Ma(this.disabled)}na(){const{audioTrack:t}=this.a.$state,e=t();return e?e.label.toLowerCase():""}o(t,e){if(this.disabled)return;const s=this.a.audioTracks.toArray().findIndex((e=>e.label.toLowerCase()===t));if(s>=0){const t=this.a.audioTracks[s];this.a.remote.changeAudioTrack(s,e),this.dispatch("change",{detail:t,trigger:e})}}}is([i.Y],ns.prototype,"value",1),is([i.Y],ns.prototype,"disabled",1),is([i.a3],ns.prototype,"getOptions",1);var rs=Object.defineProperty,as=Object.getOwnPropertyDescriptor,os=(t,e,s,i)=>{for(var n,r=i>1?void 0:i?as(e,s):e,a=t.length-1;a>=0;a--)(n=t[a])&&(r=(i?n(e,s,r):n(r))||r);return i&&r&&rs(e,s,r),r};class hs extends i.C{static{this.props={offLabel:"Off"}}get value(){return this.d.value}get disabled(){const{hasCaptions:t}=this.a.$state;return!t()}constructor(){super(),this.d=new We,this.d.o=this.o.bind(this)}onSetup(){this.a=(0,d.u)(),(0,i.a6)(Ce)&&(this.l=(0,i.v)(Ce))}onConnect(t){super.onConnect?.(t),(0,i.e)(this.D.bind(this)),(0,i.e)(this.ma.bind(this)),(0,i.e)(this.Oa.bind(this))}getOptions(){const{offLabel:t}=this.$props,{textTracks:e}=this.a.$state;return[{value:"off",label:t},...e().filter(o.i).map((t=>({track:t,label:t.label,value:this.xk(t)})))]}D(){this.d.value=this.na()}Oa(){const{offLabel:t}=this.$props,{textTrack:e}=this.a.$state,s=e();this.l?.Wb.set(s&&(0,o.i)(s)&&"showing"===s.mode?s.label:t())}ma(){this.l?.Ma(this.disabled)}na(){const{textTrack:t}=this.a.$state,e=t();return e&&(0,o.i)(e)&&"showing"===e.mode?this.xk(e):"off"}o(t,e){if(this.disabled)return;if("off"===t){const t=this.a.textTracks.selected;if(t){const s=this.a.textTracks.toArray().indexOf(t);this.a.remote.changeTextTrackMode(s,"disabled",e),this.dispatch("change",{detail:null,trigger:e})}return}const s=this.a.textTracks.toArray().findIndex((e=>this.xk(e)===t));if(s>=0){const t=this.a.textTracks[s];this.a.remote.changeTextTrackMode(s,"showing",e),this.dispatch("change",{detail:t,trigger:e})}}xk(t){return t.id+":"+t.kind+"-"+t.label.toLowerCase()}}os([i.Y],hs.prototype,"value",1),os([i.Y],hs.prototype,"disabled",1),os([i.a3],hs.prototype,"getOptions",1);var cs=Object.defineProperty,ls=Object.getOwnPropertyDescriptor,us=(t,e,s,i)=>{for(var n,r=i>1?void 0:i?ls(e,s):e,a=t.length-1;a>=0;a--)(n=t[a])&&(r=(i?n(e,s,r):n(r))||r);return i&&r&&cs(e,s,r),r};const ds=[.25,.5,.75,1,1.25,1.5,1.75,2];class ps extends i.C{static{this.props={normalLabel:"Normal",rates:ds}}get value(){return this.d.value}get disabled(){const{rates:t}=this.$props,{canSetPlaybackRate:e}=this.a.$state;return!e()||0===t().length}constructor(){super(),this.d=new We,this.d.o=this.o.bind(this)}onSetup(){this.a=(0,d.u)(),(0,i.a6)(Ce)&&(this.l=(0,i.v)(Ce))}onConnect(t){(0,i.e)(this.D.bind(this)),(0,i.e)(this.Oa.bind(this)),(0,i.e)(this.ma.bind(this))}getOptions(){const{rates:t,normalLabel:e}=this.$props;return t().map((t=>({label:1===t?e:t+"",value:t.toString()})))}D(){this.d.value=this.na()}Oa(){const{normalLabel:t}=this.$props,{playbackRate:e}=this.a.$state,s=e();this.l?.Wb.set(1===s?t():s+"")}ma(){this.l?.Ma(this.disabled)}na(){const{playbackRate:t}=this.a.$state;return t().toString()}o(t,e){if(this.disabled)return;const s=+t;this.a.remote.changePlaybackRate(s,e),this.dispatch("change",{detail:s,trigger:e})}}us([i.Y],ps.prototype,"value",1),us([i.Y],ps.prototype,"disabled",1),us([i.a3],ps.prototype,"getOptions",1);var fs=Object.defineProperty,gs=Object.getOwnPropertyDescriptor,ms=(t,e,s,i)=>{for(var n,r=i>1?void 0:i?gs(e,s):e,a=t.length-1;a>=0;a--)(n=t[a])&&(r=(i?n(e,s,r):n(r))||r);return i&&r&&fs(e,s,r),r};class bs extends i.C{constructor(){super(),this.Dj=(0,i.q)((()=>{const{qualities:t}=this.a.$state;return[...t()].sort(((t,e)=>e.height===t.height?e.bitrate-t.bitrate:e.height-t.height))})),this.d=new We,this.d.o=this.o.bind(this)}static{this.props={autoLabel:"Auto",hideBitrate:!1}}get value(){return this.d.value}get disabled(){const{canSetQuality:t,qualities:e}=this.a.$state;return!t()||0===e().length}onSetup(){this.a=(0,d.u)(),(0,i.a6)(Ce)&&(this.l=(0,i.v)(Ce))}onConnect(t){(0,i.e)(this.D.bind(this)),(0,i.e)(this.ma.bind(this)),(0,i.e)(this.Oa.bind(this))}getOptions(){const{autoLabel:t,hideBitrate:e}=this.$props;return[{value:"auto",label:t},...this.Dj().map((t=>{const s=t.bitrate>=0?`${(0,b.r)(t.bitrate/1e6,2)} Mbps`:null;return{quality:t,label:t.height+"p",value:this.le(t),bitrate:()=>e()?null:s}}))]}D(){this.d.value=this.na()}Oa(){const{autoLabel:t}=this.$props,{autoQuality:e,quality:s}=this.a.$state,i=s()?s().height+"p":"";this.l?.Wb.set(e()?t()+(i?` (${i})`:""):i)}ma(){this.l?.Ma(this.disabled)}o(t,e){if(this.disabled)return;if("auto"===t)return this.a.remote.changeQuality(-1,e),void this.dispatch("change",{detail:"auto",trigger:e});const{qualities:s}=this.a.$state,n=(0,i.u)(s).findIndex((e=>this.le(e)===t));if(n>=0){const t=(0,i.u)(s)[n];this.a.remote.changeQuality(n,e),this.dispatch("change",{detail:t,trigger:e})}}na(){const{quality:t,autoQuality:e}=this.a.$state;if(e())return"auto";const s=t();return s?this.le(s):"auto"}le(t){return t.height+"_"+t.bitrate}}ms([i.Y],bs.prototype,"value",1),ms([i.Y],bs.prototype,"disabled",1),ms([i.a3],bs.prototype,"getOptions",1);class ys extends i.C{constructor(){super(...arguments),this.i=null,this.Pa=0,this.Vf=-1}static{this.props={disabled:!1,event:void 0,action:void 0}}onSetup(){this.a=(0,d.u)();const{event:t,action:e}=this.$props;this.setAttributes({event:t,action:e})}onAttach(t){t.setAttribute("data-media-gesture",""),t.style.setProperty("pointer-events","none")}onConnect(t){this.i=this.a.player.el?.querySelector("[data-media-provider]"),(0,i.e)(this.Ej.bind(this))}Ej(){let t=this.$props.event(),e=this.$props.disabled();this.i&&t&&!e&&(/^dbl/.test(t)&&(t=t.split(/^dbl/)[1]),("pointerup"===t||"pointerdown"===t)&&"coarse"===this.a.$state.pointer()&&(t="pointerup"===t?"touchend":"touchstart"),(0,i.l)(this.i,t,this.Fj.bind(this),{passive:!1}))}Fj(t){if(this.$props.disabled()||(0,i.J)(t)&&(0!==t.button||this.a.activeMenu)||(0,i.f)(t)&&this.a.activeMenu||(0,p.i)(t)||!this.Gj(t))return;t.MEDIA_GESTURE=!0,t.preventDefault();const e=(0,i.u)(this.$props.event),s=e?.startsWith("dbl");if(s){if(1===this.Pa)return queueMicrotask((()=>this.Wf(t))),clearTimeout(this.Vf),void(this.Pa=0)}else 0===this.Pa&&setTimeout((()=>{1===this.Pa&&this.Wf(t)}),250);0===this.Pa&&(this.Vf=window.setTimeout((()=>{this.Pa=0}),275)),this.Pa++}Wf(t){this.el.setAttribute("data-triggered",""),requestAnimationFrame((()=>{this.Hj()&&this.Ij((0,i.u)(this.$props.action),t),requestAnimationFrame((()=>{this.el.removeAttribute("data-triggered")}))}))}Gj(t){if(!this.el)return!1;if((0,i.J)(t)||(0,i.a7)(t)||(0,i.f)(t)){const e=(0,i.f)(t)?t.changedTouches[0]??t.touches[0]:void 0,s=e?.clientX??t.clientX,n=e?.clientY??t.clientY,r=this.el.getBoundingClientRect(),a=n>=r.top&&n<=r.bottom&&s>=r.left&&s<=r.right;return t.type.includes("leave")?!a:a}return!0}Hj(){const t=this.a.player.el.querySelectorAll("[data-media-gesture][data-triggered]");return Array.from(t).sort(((t,e)=>+getComputedStyle(e).zIndex-+getComputedStyle(t).zIndex))[0]===this.el}Ij(t,e){if(!t)return;const s=new i.D("will-trigger",{detail:t,cancelable:!0,trigger:e});if(this.dispatchEvent(s),s.defaultPrevented)return;const[n,r]=t.replace(/:([a-z])/,"-$1").split(":");t.includes(":fullscreen")?this.a.remote.toggleFullscreen("prefer-media",e):t.includes("seek:")?this.a.remote.seek((0,i.u)(this.a.$state.currentTime)+(+r||0),e):this.a.remote[(0,i.a8)(n)](e),this.dispatch("trigger",{detail:t,trigger:e})}}class vs{constructor(t){this.S=t,this.priority=10,this.z=null,this.sa=(0,i.X)()}attach(){}canRender(){return!0}detach(){this.sa.empty(),this.S.reset(),this.z=null}changeTrack(t){t&&this.z!==t&&(this.sa.empty(),t.readyState<2?(this.S.reset(),this.sa.add((0,i.l)(t,"load",(()=>this.Xf(t)),{once:!0}))):this.Xf(t),this.sa.add((0,i.l)(t,"add-cue",(t=>{this.S.addCue(t.detail)})),(0,i.l)(t,"remove-cue",(t=>{this.S.removeCue(t.detail)}))),this.z=t)}Xf(t){this.S.changeTrack({cues:[...t.cues],regions:[...t.regions]})}}class $s extends i.C{static{this.props={textDir:"ltr"}}onSetup(){this.a=(0,d.u)(),this.setAttributes({"aria-hidden":Qt(this.lb.bind(this))})}onAttach(t){t.style.setProperty("pointer-events","none")}onConnect(t){this.S?(0,i.e)(this.Yf.bind(this)):s.e(9701).then(s.bind(s,9701)).then((e=>{this.connectScope&&(0,i.h)((()=>{this.W=e;const{CaptionsRenderer:s}=this.W;this.S=new s(t),this.Qa=new vs(this.S),(0,i.e)(this.Yf.bind(this))}),this.connectScope)}))}onDestroy(){this.Qa&&(this.Qa.detach(),this.a.textRenderers.remove(this.Qa)),this.S?.destroy()}lb(){const{textTrack:t,remotePlaybackState:e}=this.a.$state,s=t();return this.a.$iosControls()||"connected"===e()||!s||!(0,o.i)(s)}Yf(){const{viewType:t}=this.a.$state;return"audio"===t()?this.Jj():this.Kj()}Jj(){return(0,i.e)(this._d.bind(this)),()=>{this.el.textContent=""}}_d(){if(this.lb())return;const{textTrack:t}=this.a.$state;this.Zf(),(0,i.l)(t(),"cue-change",this.Zf.bind(this)),(0,i.e)(this.Lj.bind(this))}Zf(){this.el.textContent="";const{realCurrentTime:t,textTrack:e}=this.a.$state,s=(0,i.u)(t),n=(0,i.u)(e).activeCues,{renderVTTCueString:r}=this.W;for(const t of n){const e=document.createElement("div");e.setAttribute("data-part","cue"),e.innerHTML=r(t,s),this.el.append(e)}}Lj(){const{realCurrentTime:t}=this.a.$state,{updateTimedVTTCueNodes:e}=this.W;e(this.el,t())}Kj(){return(0,i.e)(this.Mj.bind(this)),(0,i.e)(this.Nj.bind(this)),this.a.textRenderers.add(this.Qa),()=>{this.el.textContent="",this.Qa.detach(),this.a.textRenderers.remove(this.Qa)}}Mj(){this.S.dir=this.$props.textDir()}Nj(){if(this.lb())return;const{realCurrentTime:t}=this.a.$state;this.S.currentTime=t()}}class ws extends i.C{constructor(){super(...arguments),this.wn=""}static{this.props={src:null,alt:null,crossOrigin:null}}static{this.state=new i.S({img:null,src:null,alt:null,crossOrigin:null,loading:!0,error:null,hidden:!1})}onSetup(){this.a=(0,d.u)(),this.fd(),this.$k(),this.Hh(),this.ob()}onAttach(t){t.style.setProperty("pointer-events","none"),(0,i.e)(this.Ud.bind(this)),(0,i.e)(this.fd.bind(this)),(0,i.e)(this.$k.bind(this)),(0,i.e)(this.Hh.bind(this)),(0,i.e)(this.ob.bind(this));const{started:e}=this.a.$state;this.setAttributes({"data-visible":()=>!e()&&!this.$state.hidden(),"data-loading":this.Rb.bind(this),"data-error":this.wa.bind(this),"data-hidden":this.$state.hidden})}onConnect(t){(0,i.e)(this.Pk.bind(this)),(0,i.e)(this.Ea.bind(this))}wa(){const{error:t}=this.$state;return!(0,i.U)(t())}Pk(){const{canLoadPoster:t,poster:e}=this.a.$state;!t()&&e()&&(0,o.p)(e(),"preconnect")}ob(){const{src:t}=this.$props,{$iosControls:e}=this.a,{poster:s}=this.a.$state;this.el&&(0,i.s)(this.el,"display",e()?"none":null),this.$state.hidden.set(this.wa()||!(t()||s())||e())}Rb(){const{loading:t,hidden:e}=this.$state;return!e()&&t()}Ud(){const t=this.$state.img();t&&((0,i.l)(t,"load",this.lc.bind(this)),(0,i.l)(t,"error",this.U.bind(this)))}fd(){const{poster:t}=this.a.$props,{canLoadPoster:e,providedPoster:s,inferredPoster:i}=this.a.$state,n=this.$props.src()||"",r=n||t()||i();this.wn===s()&&s.set(n),this.$state.src.set(e()&&r.length?r:null),this.wn=n}$k(){const{src:t}=this.$props,{alt:e}=this.$state,{poster:s}=this.a.$state;e.set(t()||s()?this.$props.alt():null)}Hh(){const{crossOrigin:t}=this.$props,{crossOrigin:e}=this.$state,{crossOrigin:s,poster:i}=this.a.$state,n=null!==t()?t():s();e.set(/ytimg\.com|vimeo/.test(i()||"")?null:!0===n?"anonymous":n)}Ea(){const{loading:t,error:e}=this.$state,{canLoadPoster:s,poster:i}=this.a.$state;t.set(s()&&!!i()),e.set(null)}lc(){const{loading:t,error:e}=this.$state;t.set(!1),e.set(null)}U(t){const{loading:e,error:s}=this.$state;e.set(!1),s.set(t)}}class ks extends i.C{constructor(){super(...arguments),this.cn=(0,i.n)(null)}static{this.props={type:"current",showHours:!1,padHours:null,padMinutes:null,remainder:!1,toggle:!1}}static{this.state=new i.S({timeText:""})}onSetup(){this.a=(0,d.u)(),this.ag();const{type:t}=this.$props;this.setAttributes({"data-type":t,"data-remainder":this.fn.bind(this)})}onAttach(t){t.hasAttribute("role")||(0,i.e)(this.hn.bind(this)),(0,i.e)(this.ag.bind(this))}onConnect(t){(0,i.e)((()=>{this.$props.toggle()?(0,p.o)(t,this.gn.bind(this)):this.cn.set(null)}))}ag(){const{type:t,padHours:e,padMinutes:s,showHours:i}=this.$props,n=this.Oj(t()),r=this.a.$state.duration(),a=this.fn();if(!Number.isFinite(n+r))return void this.$state.timeText.set("LIVE");const o=ge(a?Math.max(0,r-n):n,{padHrs:e(),padMins:s(),showHrs:i()});this.$state.timeText.set((a?"-":"")+o)}hn(){if(!this.el)return;const{toggle:t}=this.$props;(0,i.s)(this.el,"role",t()?"timer":null),(0,i.s)(this.el,"tabindex",t()?0:null)}Oj(t){const{bufferedEnd:e,duration:s,currentTime:i}=this.a.$state;switch(t){case"buffered":return e();case"duration":return s();default:return i()}}fn(){return this.$props.remainder()&&!1!==this.cn()}gn(t){t.preventDefault(),null!==this.cn()?this.cn.set((t=>!t)):this.cn.set(!this.$props.remainder())}}},5242:(t,e,s)=>{s.d(e,{$:()=>Ht,A:()=>Yt,B:()=>Ft,C:()=>qt,D:()=>rt,H:()=>Ge,J:()=>ct,K:()=>dt,L:()=>It,M:()=>Kt,N:()=>J,O:()=>$,P:()=>Bt,Q:()=>mt,R:()=>ot,S:()=>Rt,T:()=>w,U:()=>z,V:()=>wt,W:()=>kt,X:()=>Wt,Y:()=>Mt,Z:()=>Y,_:()=>Vt,a:()=>_,a0:()=>We,a1:()=>Ot,a2:()=>Xt,a3:()=>Dt,a4:()=>Qt,a5:()=>vt,a6:()=>xt,a7:()=>ut,a8:()=>Nt,b:()=>tt,c:()=>pt,d:()=>ss,e:()=>$t,f:()=>lt,g:()=>k,h:()=>T,i:()=>U,j:()=>gt,k:()=>Ie,l:()=>ht,m:()=>Ne,n:()=>bt,o:()=>P,p:()=>Ut,q:()=>yt,r:()=>et,s:()=>ft,t:()=>G,u:()=>v,v:()=>Tt,w:()=>zt,x:()=>R,y:()=>X,z:()=>Z});const i=Symbol(0);let n=!1,r=!1,a=null,o=null,h=null,c=0,l=[],u={};const d=()=>{},p=0,f=1,g=2,m=3;function b(){if(l.length){r=!0;for(let t=0;t<l.length;t++)l[t].$st!==p&&y(l[t]);l=[],n=!1,r=!1}else n=!1}function y(t){let e=[t];for(;t=t[i];)t.$e&&t.$st!==p&&e.push(t);for(let t=e.length-1;t>=0;t--)H(e[t])}function v(t){return A(a,t,null)}function $(t){return A(null,t,null)}function w(){r||b()}function k(){return a}function T(t,e){try{return A(e,t,null)}catch(t){return void j(e,t)}}function x(t,e=a){return e?.$cx[t]}function P(t){if(!t||!a)return t||d;const e=a;return e.$d?Array.isArray(e.$d)?e.$d.push(t):e.$d=[e.$d,t]:e.$d=t,function(){e.$st!==m&&(t.call(null),V(e.$d)?e.$d=null:Array.isArray(e.$d)&&e.$d.splice(e.$d.indexOf(t),1))}}function S(t=!0){if(this.$st===m)return;let e=t?this.$ps||this[i]:this,s=this.$ns,n=null;for(;s&&s[i]===this;)S.call(s,!0),C(s),n=s.$ns,s.$ns=null,s=n;t&&C(this),s&&(s.$ps=t?this.$ps:this),e&&(e.$ns=s)}function C(t){t.$st=m,t.$d&&E(t),t.$s&&B(t,0),t.$ps&&(t.$ps.$ns=null),t[i]=null,t.$s=null,t.$o=null,t.$ps=null,t.$cx=u,t.$eh=null}function E(t){try{if(Array.isArray(t.$d))for(let e=t.$d.length-1;e>=0;e--){const s=t.$d[e];s.call(s)}else t.$d.call(t.$d);t.$d=null}catch(e){j(t,e)}}function A(t,e,s){const i=a,n=o;a=t,o=s;try{return e.call(t)}finally{a=i,o=n}}function j(t,e){if(!t||!t.$eh)throw e;let s=0,i=t.$eh.length,n=L(e);for(s=0;s<i;s++)try{t.$eh[s](n);break}catch(t){n=L(t)}if(s===i)throw n}function L(t){return t instanceof Error?t:Error(JSON.stringify(t))}function O(){return this.$st===m||(o&&!this.$e&&(!h&&o.$s&&o.$s[c]==this?c++:h?h.push(this):h=[this]),this.$c&&H(this)),this.$v}function q(t){const e=V(t)?t(this.$v):t;if(this.$ch(this.$v,e)&&(this.$v=e,this.$o))for(let t=0;t<this.$o.length;t++)K(this.$o[t],g);return this.$v}const M=function(){this[i]=null,this.$ns=null,this.$ps=null,a&&a.append(this)},D=M.prototype;function R(){return new M}D.$cx=u,D.$eh=null,D.$c=null,D.$d=null,D.append=function(t){if(t[i]=this,t.$ps=this,this.$ns)if(t.$ns){let e=t.$ns;for(;e.$ns;)e=e.$ns;e.$ns=this.$ns,this.$ns.$ps=e}else t.$ns=this.$ns,this.$ns.$ps=t;this.$ns=t,t.$cx=t.$cx===u?this.$cx:{...this.$cx,...t.$cx},this.$eh&&(t.$eh=t.$eh?[...t.$eh,...this.$eh]:this.$eh)},D.dispose=function(){S.call(this)};const F=function(t,e,s){M.call(this),this.$st=e?g:p,this.$i=!1,this.$e=!1,this.$s=null,this.$o=null,this.$v=t,e&&(this.$c=e),s&&s.dirty&&(this.$ch=s.dirty)},I=F.prototype;function N(t,e,s){return new F(t,e,s)}function V(t){return"function"==typeof t}function H(t){if(t.$st===f)for(let e=0;e<t.$s.length&&(H(t.$s[e]),t.$st!==g);e++);t.$st===g?W(t):t.$st=p}function Q(t){t.$ns&&t.$ns[i]===t&&S.call(t,!1),t.$d&&E(t),t.$eh=t[i]?t[i].$eh:null}function W(t){let e=h,s=c;h=null,c=0;try{Q(t);const e=A(t,t.$c,t);if(h){if(t.$s&&B(t,c),t.$s&&c>0){t.$s.length=c+h.length;for(let e=0;e<h.length;e++)t.$s[c+e]=h[e]}else t.$s=h;let e;for(let s=c;s<t.$s.length;s++)e=t.$s[s],e.$o?e.$o.push(t):e.$o=[t]}else t.$s&&c<t.$s.length&&(B(t,c),t.$s.length=c);!t.$e&&t.$i?q.call(t,e):(t.$v=e,t.$i=!0)}catch(e){return j(t,e),void(t.$st===g&&(Q(t),t.$s&&B(t,0)))}h=e,c=s,t.$st=p}function K(t,e){if(!(t.$st>=e)&&(t.$e&&t.$st===p&&(l.push(t),n||(n=!0,queueMicrotask(b))),t.$st=e,t.$o))for(let e=0;e<t.$o.length;e++)K(t.$o[e],f)}function B(t,e){let s,i;for(let n=e;n<t.$s.length;n++)s=t.$s[n],s.$o&&(i=s.$o.indexOf(t),s.$o[i]=s.$o[s.$o.length-1],s.$o.pop())}function Y(...t){}function z(t){return null===t}function U(t){return void 0===t}function J(t){return z(t)||U(t)}function X(t){return t?.constructor===Object}function _(t){return"number"==typeof t&&!Number.isNaN(t)}function G(t){return"string"==typeof t}function Z(t){return"boolean"==typeof t}function tt(t){return"function"==typeof t}function et(t){return Array.isArray(t)}var st;Object.setPrototypeOf(I,D),I.$ch=function(t,e){return t!==e},I.call=O;const it=Event,nt=Symbol("DOM_EVENT");class rt extends it{constructor(t,...e){super(t,e[0]),this[st]=!0,this.triggers=new at,this.detail=e[0]?.detail;const s=e[0]?.trigger;s&&this.triggers.add(s)}static{st=nt}get trigger(){return this.triggers.source}get originEvent(){return this.triggers.origin}get isOriginTrusted(){return this.triggers.origin?.isTrusted??!1}}class at{constructor(){this.chain=[]}get source(){return this.chain[0]}get origin(){return this.chain[this.chain.length-1]}add(t){this.chain.push(t),function(t){return!!t?.[nt]}(t)&&this.chain.push(...t.triggers)}remove(t){return this.chain.splice(this.chain.indexOf(t),1)[0]}has(t){return this.chain.some((e=>e===t))}hasType(t){return!!this.findType(t)}findType(t){return this.chain.find((e=>e.type===t))}walk(t){for(const e of this.chain){const s=t(e);if(s)return[e,s]}}[Symbol.iterator](){return this.chain.values()}}class ot extends EventTarget{addEventListener(t,e,s){return super.addEventListener(t,e,s)}removeEventListener(t,e,s){return super.removeEventListener(t,e,s)}}function ht(t,e,s,i){return t.addEventListener(e,s,i),P((()=>t.removeEventListener(e,s,i)))}function ct(t){return!!t?.type.startsWith("pointer")}function lt(t){return!!t?.type.startsWith("touch")}function ut(t){return/^(click|mouse)/.test(t?.type??"")}function dt(t){return!!t?.type.startsWith("key")}function pt(t){return dt(t)&&("Enter"===t.key||" "===t.key)}function ft(t,e,s){if(t)if(s||""===s||0===s){const i=!0===s?"":s+"";t.getAttribute(e)!==i&&t.setAttribute(e,i)}else t.removeAttribute(e)}function gt(t,e,s){t&&(s||0===s?t.style.setProperty(e,s+""):t.style.removeProperty(e))}function mt(t,e,s){t.classList[s?"add":"remove"](e)}function bt(t,e){const s=N(t,null,e),n=O.bind(s);return n[i]=!0,n.set=q.bind(s),n}function yt(t,e){const s=N(e?.initial,t,e),n=O.bind(s);return n[i]=!0,n}function vt(t){return function(t){return V(t)&&i in t}(t)&&"set"in t}const $t=function(t,e){const s=N(null,(function(){let e=t();return V(e)&&P(e),null}),void 0);return s.$e=!0,W(s),S.bind(s,!0)};function wt(t){return{id:Symbol(),provide:t}}function kt(t,e,s=k()){const i=!U(e);!function(t,e,s=a){s&&(s.$cx={...s.$cx,[t]:e})}(t.id,i?e:t.provide?.(),s)}function Tt(t){return x(t.id)}function xt(t){return!U(x(t.id))}const Pt=Symbol(0),St=Symbol(0),Ct=Symbol(0);var Et;const At={};class jt{constructor(t,e,s){this[Et]=null,this.$el=bt(null),this.a=null,this.d=null,this.f=null,this.g=null,this.e=null,this.o=!1,this.i=At,this.b=null,this.c=null,this.l=[],this.m=[],this.j=[],this.n=[],this.d=e,s?.scope&&s.scope.append(e);let i=t.state,n=t.props;if(i&&(this.h=i.create(),this.k=new Proxy(this.h,{get:(t,e)=>this.h[e]()}),kt(i,this.h)),n&&(this.i=function(t){const e={};for(const s of Object.keys(t)){const i=t[s];e[s]=bt(i,i)}return e}(n),s?.props))for(const t of Object.keys(s.props))this.i[t]?.set(s.props[t]);P(this.p.bind(this))}static{Et=Ct}w(){T((()=>{for(const t of this.l)t()}),this.d)}x(t){this.a||(this.a=t,this.$el.set(t),T((()=>{this.f=R(),T((()=>{for(const t of this.m)t(this.a);this.q(),this.r()}),this.f)}),this.d),t.dispatchEvent(new Event("attached")))}s(){this.f?.dispose(),this.f=null,this.g=null,this.a=null,this.$el.set(null)}y(){this.a&&this.f&&this.j.length&&T((()=>{this.g=R(),T((()=>{for(const t of this.j)t(this.a)}),this.g)}),this.f)}z(){this.g?.dispose(),this.g=null}p(){if(this.o)return;this.o=!0,T((()=>{for(const t of this.n)t(this.a)}),this.d);const t=this.a;this.s(),this.d.dispose(),this.l.length=0,this.m.length=0,this.j.length=0,this.n.length=0,this.e=null,this.b=null,this.c=null,this.i=At,this.d=null,this.k=At,this.h=null,t&&delete t.$}t(t){t.onSetup&&this.l.push(t.onSetup.bind(t)),t.onAttach&&this.m.push(t.onAttach.bind(t)),t.onConnect&&this.j.push(t.onConnect.bind(t)),t.onDestroy&&this.n.push(t.onDestroy.bind(t))}q(){if(this.b)for(const t of Object.keys(this.b))tt(this.b[t])?$t(this.u.bind(this,t)):ft(this.a,t,this.b[t])}r(){if(this.c)for(const t of Object.keys(this.c))tt(this.c[t])?$t(this.v.bind(this,t)):gt(this.a,t,this.c[t])}u(t){ft(this.a,t,this.b[t].call(this.e))}v(t){gt(this.a,t,this.c[t].call(this.e))}}let Lt={$$:null};class Ot extends EventTarget{constructor(){super(),Lt.$$&&this.attach(Lt)}get el(){return this.$$.a}get $el(){return this.$$.$el()}get scope(){return this.$$.d}get attachScope(){return this.$$.f}get connectScope(){return this.$$.g}get $props(){return this.$$.i}get $state(){return this.$$.h}get state(){return this.$$.k}attach({$$:t}){return this.$$=t,t.t(this),this}addEventListener(t,e,s){this.listen(t,e,s)}removeEventListener(t,e,s){this.el?.removeEventListener(t,e,s)}setAttributes(t){this.$$.b||(this.$$.b={}),Object.assign(this.$$.b,t)}setStyles(t){this.$$.c||(this.$$.c={}),Object.assign(this.$$.c,t)}setCSSVars(t){this.setStyles(t)}createEvent(t,...e){return new rt(t,e[0])}dispatch(t,...e){if(!this.el)return!1;const s=t instanceof Event?t:new rt(t,e[0]);return Object.defineProperty(s,"target",{get:()=>this.$$.e}),$((()=>(this.$$[Ct]?.(s),this.el.dispatchEvent(s))))}dispatchEvent(t){return this.dispatch(t)}listen(t,e,s){return this.el?ht(this.el,t,e,s):Y}}class qt extends Ot{subscribe(t){return T((()=>$t((()=>t(this.state)))),this.$$.d)}destroy(){this.$$.p()}}function Mt(t,e,s){t[Pt]||(t[Pt]=new Set),t[Pt].add(e)}function Dt(t,e,s){t[St]||(t[St]=new Set),t[St].add(e)}class Rt{constructor(t){this.id=Symbol(0),this.record=t,this.A=Object.getOwnPropertyDescriptors(t)}create(){const t={},e=new Proxy(t,{get:(e,s)=>t[s]()});for(const s of Object.keys(this.record)){const i=this.A[s].get;t[s]=i?yt(i.bind(e)):bt(this.record[s])}return t}reset(t,e){for(const s of Object.keys(t))this.A[s].get||e&&!e(s)||t[s].set(this.record[s])}}function Ft(t){return Tt(t)}function It(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Nt(t){return t.replace(/-./g,(t=>t[1].toUpperCase()))}function Vt(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Ht(t){return tt(t)?t():t}function Qt(t){return t?"true":"false"}function Wt(){const t=new Set;return{add(...e){for(const s of e)t.add(s)},empty(){for(const e of t)e();t.clear()}}}function Kt(){const t=Wt();return P(t.empty),t}function Bt(t){return Object.keys(t)}function Yt(){let t,e;return{promise:new Promise(((s,i)=>{t=s,e=i})),resolve:t,reject:e}}function zt(t){return new Promise((e=>setTimeout(e,t)))}function Ut(t){let e,s=-1;return function(...i){e=i,s>=0||(s=window.requestAnimationFrame((()=>{t.apply(this,e),s=-1,e=void 0})))}}const Jt="undefined"!=typeof window?"requestIdleCallback"in window?window.requestIdleCallback:t=>window.setTimeout(t,1):Y;function Xt(t,e){return new Promise((s=>{Jt((e=>{t?.(e),s()}),e)}))}const _t=Math.min,Gt=Math.max,Zt=Math.round,te=Math.floor,ee=t=>({x:t,y:t});function se(t){return t.split("-")[0]}function ie(t){return["top","bottom"].includes(se(t))?"y":"x"}function ne(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function re(t,e,s){let{reference:i,floating:n}=t;const r=ie(e),a=function(t){return"x"===ie(t)?"y":"x"}(e),o="y"===a?"height":"width",h=se(e),c="y"===r,l=i.x+i.width/2-n.width/2,u=i.y+i.height/2-n.height/2,d=i[o]/2-n[o]/2;let p;switch(h){case"top":p={x:l,y:i.y-n.height};break;case"bottom":p={x:l,y:i.y+i.height};break;case"right":p={x:i.x+i.width,y:u};break;case"left":p={x:i.x-n.width,y:u};break;default:p={x:i.x,y:i.y}}switch(function(t){return t.split("-")[1]}(e)){case"start":p[a]-=d*(s&&c?-1:1);break;case"end":p[a]+=d*(s&&c?-1:1)}return p}function ae(t){return ce(t)?(t.nodeName||"").toLowerCase():"#document"}function oe(t){var e;return(null==t||null==(e=t.ownerDocument)?void 0:e.defaultView)||window}function he(t){var e;return null==(e=(ce(t)?t.ownerDocument:t.document)||window.document)?void 0:e.documentElement}function ce(t){return t instanceof Node||t instanceof oe(t).Node}function le(t){return t instanceof Element||t instanceof oe(t).Element}function ue(t){return t instanceof HTMLElement||t instanceof oe(t).HTMLElement}function de(t){return"undefined"!=typeof ShadowRoot&&(t instanceof ShadowRoot||t instanceof oe(t).ShadowRoot)}function pe(t){const{overflow:e,overflowX:s,overflowY:i,display:n}=ye(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+s)&&!["inline","contents"].includes(n)}function fe(t){return["table","td","th"].includes(ae(t))}function ge(t){const e=me(),s=ye(t);return"none"!==s.transform||"none"!==s.perspective||!!s.containerType&&"normal"!==s.containerType||!e&&!!s.backdropFilter&&"none"!==s.backdropFilter||!e&&!!s.filter&&"none"!==s.filter||["transform","perspective","filter"].some((t=>(s.willChange||"").includes(t)))||["paint","layout","strict","content"].some((t=>(s.contain||"").includes(t)))}function me(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function be(t){return["html","body","#document"].includes(ae(t))}function ye(t){return oe(t).getComputedStyle(t)}function ve(t){return le(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function $e(t){if("html"===ae(t))return t;const e=t.assignedSlot||t.parentNode||de(t)&&t.host||he(t);return de(e)?e.host:e}function we(t){const e=$e(t);return be(e)?t.ownerDocument?t.ownerDocument.body:t.body:ue(e)&&pe(e)?e:we(e)}function ke(t,e,s){var i;void 0===e&&(e=[]),void 0===s&&(s=!0);const n=we(t),r=n===(null==(i=t.ownerDocument)?void 0:i.body),a=oe(n);return r?e.concat(a,a.visualViewport||[],pe(n)?n:[],a.frameElement&&s?ke(a.frameElement):[]):e.concat(n,ke(n,[],s))}function Te(t){const e=ye(t);let s=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const n=ue(t),r=n?t.offsetWidth:s,a=n?t.offsetHeight:i,o=Zt(s)!==r||Zt(i)!==a;return o&&(s=r,i=a),{width:s,height:i,$:o}}function xe(t){return le(t)?t:t.contextElement}function Pe(t){const e=xe(t);if(!ue(e))return ee(1);const s=e.getBoundingClientRect(),{width:i,height:n,$:r}=Te(e);let a=(r?Zt(s.width):s.width)/i,o=(r?Zt(s.height):s.height)/n;return a&&Number.isFinite(a)||(a=1),o&&Number.isFinite(o)||(o=1),{x:a,y:o}}const Se=ee(0);function Ce(t){const e=oe(t);return me()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:Se}function Ee(t,e,s,i){void 0===e&&(e=!1),void 0===s&&(s=!1);const n=t.getBoundingClientRect(),r=xe(t);let a=ee(1);e&&(i?le(i)&&(a=Pe(i)):a=Pe(t));const o=function(t,e,s){return void 0===e&&(e=!1),!(!s||e&&s!==oe(t))&&e}(r,s,i)?Ce(r):ee(0);let h=(n.left+o.x)/a.x,c=(n.top+o.y)/a.y,l=n.width/a.x,u=n.height/a.y;if(r){const t=oe(r),e=i&&le(i)?oe(i):i;let s=t,n=s.frameElement;for(;n&&i&&e!==s;){const t=Pe(n),e=n.getBoundingClientRect(),i=ye(n),r=e.left+(n.clientLeft+parseFloat(i.paddingLeft))*t.x,a=e.top+(n.clientTop+parseFloat(i.paddingTop))*t.y;h*=t.x,c*=t.y,l*=t.x,u*=t.y,h+=r,c+=a,s=oe(n),n=s.frameElement}}return ne({width:l,height:u,x:h,y:c})}const Ae=[":popover-open",":modal"];function je(t){return Ae.some((e=>{try{return t.matches(e)}catch(t){return!1}}))}function Le(t){return Ee(he(t)).left+ve(t).scrollLeft}function Oe(t,e,s){let i;if("viewport"===e)i=function(t,e){const s=oe(t),i=he(t),n=s.visualViewport;let r=i.clientWidth,a=i.clientHeight,o=0,h=0;if(n){r=n.width,a=n.height;const t=me();(!t||t&&"fixed"===e)&&(o=n.offsetLeft,h=n.offsetTop)}return{width:r,height:a,x:o,y:h}}(t,s);else if("document"===e)i=function(t){const e=he(t),s=ve(t),i=t.ownerDocument.body,n=Gt(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),r=Gt(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let a=-s.scrollLeft+Le(t);const o=-s.scrollTop;return"rtl"===ye(i).direction&&(a+=Gt(e.clientWidth,i.clientWidth)-n),{width:n,height:r,x:a,y:o}}(he(t));else if(le(e))i=function(t,e){const s=Ee(t,!0,"fixed"===e),i=s.top+t.clientTop,n=s.left+t.clientLeft,r=ue(t)?Pe(t):ee(1);return{width:t.clientWidth*r.x,height:t.clientHeight*r.y,x:n*r.x,y:i*r.y}}(e,s);else{const s=Ce(t);i={...e,x:e.x-s.x,y:e.y-s.y}}return ne(i)}function qe(t,e){const s=$e(t);return!(s===e||!le(s)||be(s))&&("fixed"===ye(s).position||qe(s,e))}function Me(t,e,s){const i=ue(e),n=he(e),r="fixed"===s,a=Ee(t,!0,r,e);let o={scrollLeft:0,scrollTop:0};const h=ee(0);if(i||!i&&!r)if(("body"!==ae(e)||pe(n))&&(o=ve(e)),i){const t=Ee(e,!0,r,e);h.x=t.x+e.clientLeft,h.y=t.y+e.clientTop}else n&&(h.x=Le(n));return{x:a.left+o.scrollLeft-h.x,y:a.top+o.scrollTop-h.y,width:a.width,height:a.height}}function De(t,e){return ue(t)&&"fixed"!==ye(t).position?e?e(t):t.offsetParent:null}function Re(t,e){const s=oe(t);if(!ue(t)||je(t))return s;let i=De(t,e);for(;i&&fe(i)&&"static"===ye(i).position;)i=De(i,e);return i&&("html"===ae(i)||"body"===ae(i)&&"static"===ye(i).position&&!ge(i))?s:i||function(t){let e=$e(t);for(;ue(e)&&!be(e);){if(ge(e))return e;e=$e(e)}return null}(t)||s}const Fe={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{elements:e,rect:s,offsetParent:i,strategy:n}=t;const r="fixed"===n,a=he(i),o=!!e&&je(e.floating);if(i===a||o&&r)return s;let h={scrollLeft:0,scrollTop:0},c=ee(1);const l=ee(0),u=ue(i);if((u||!u&&!r)&&(("body"!==ae(i)||pe(a))&&(h=ve(i)),ue(i))){const t=Ee(i);c=Pe(i),l.x=t.x+i.clientLeft,l.y=t.y+i.clientTop}return{width:s.width*c.x,height:s.height*c.y,x:s.x*c.x-h.scrollLeft*c.x+l.x,y:s.y*c.y-h.scrollTop*c.y+l.y}},getDocumentElement:he,getClippingRect:function(t){let{element:e,boundary:s,rootBoundary:i,strategy:n}=t;const r=[..."clippingAncestors"===s?function(t,e){const s=e.get(t);if(s)return s;let i=ke(t,[],!1).filter((t=>le(t)&&"body"!==ae(t))),n=null;const r="fixed"===ye(t).position;let a=r?$e(t):t;for(;le(a)&&!be(a);){const e=ye(a),s=ge(a);s||"fixed"!==e.position||(n=null),(r?!s&&!n:!s&&"static"===e.position&&n&&["absolute","fixed"].includes(n.position)||pe(a)&&!s&&qe(t,a))?i=i.filter((t=>t!==a)):n=e,a=$e(a)}return e.set(t,i),i}(e,this._c):[].concat(s),i],a=r[0],o=r.reduce(((t,s)=>{const i=Oe(e,s,n);return t.top=Gt(i.top,t.top),t.right=_t(i.right,t.right),t.bottom=_t(i.bottom,t.bottom),t.left=Gt(i.left,t.left),t}),Oe(e,a,n));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}},getOffsetParent:Re,getElementRects:async function(t){const e=this.getOffsetParent||Re,s=this.getDimensions;return{reference:Me(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,...await s(t.floating)}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){const{width:e,height:s}=Te(t);return{width:e,height:s}},getScale:Pe,isElement:le,isRTL:function(t){return"rtl"===ye(t).direction}};function Ie(t,e,s,i){void 0===i&&(i={});const{ancestorScroll:n=!0,ancestorResize:r=!0,elementResize:a="function"==typeof ResizeObserver,layoutShift:o="function"==typeof IntersectionObserver,animationFrame:h=!1}=i,c=xe(t),l=n||r?[...c?ke(c):[],...ke(e)]:[];l.forEach((t=>{n&&t.addEventListener("scroll",s,{passive:!0}),r&&t.addEventListener("resize",s)}));const u=c&&o?function(t,e){let s,i=null;const n=he(t);function r(){var t;clearTimeout(s),null==(t=i)||t.disconnect(),i=null}return function a(o,h){void 0===o&&(o=!1),void 0===h&&(h=1),r();const{left:c,top:l,width:u,height:d}=t.getBoundingClientRect();if(o||e(),!u||!d)return;const p={rootMargin:-te(l)+"px "+-te(n.clientWidth-(c+u))+"px "+-te(n.clientHeight-(l+d))+"px "+-te(c)+"px",threshold:Gt(0,_t(1,h))||1};let f=!0;function g(t){const e=t[0].intersectionRatio;if(e!==h){if(!f)return a();e?a(!1,e):s=setTimeout((()=>{a(!1,1e-7)}),100)}f=!1}try{i=new IntersectionObserver(g,{...p,root:n.ownerDocument})}catch(t){i=new IntersectionObserver(g,p)}i.observe(t)}(!0),r}(c,s):null;let d,p=-1,f=null;a&&(f=new ResizeObserver((t=>{let[i]=t;i&&i.target===c&&f&&(f.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame((()=>{var t;null==(t=f)||t.observe(e)}))),s()})),c&&!h&&f.observe(c),f.observe(e));let g=h?Ee(t):null;return h&&function e(){const i=Ee(t);!g||i.x===g.x&&i.y===g.y&&i.width===g.width&&i.height===g.height||s(),g=i,d=requestAnimationFrame(e)}(),s(),()=>{var t;l.forEach((t=>{n&&t.removeEventListener("scroll",s),r&&t.removeEventListener("resize",s)})),null==u||u(),null==(t=f)||t.disconnect(),f=null,h&&cancelAnimationFrame(d)}}const Ne=(t,e,s)=>{const i=new Map,n={platform:Fe,...s},r={...n.platform,_c:i};return(async(t,e,s)=>{const{placement:i="bottom",strategy:n="absolute",middleware:r=[],platform:a}=s,o=r.filter(Boolean),h=await(null==a.isRTL?void 0:a.isRTL(e));let c=await a.getElementRects({reference:t,floating:e,strategy:n}),{x:l,y:u}=re(c,i,h),d=i,p={},f=0;for(let s=0;s<o.length;s++){const{name:r,fn:g}=o[s],{x:m,y:b,data:y,reset:v}=await g({x:l,y:u,initialPlacement:i,placement:d,strategy:n,middlewareData:p,rects:c,platform:a,elements:{reference:t,floating:e}});l=null!=m?m:l,u=null!=b?b:u,p={...p,[r]:{...p[r],...y}},v&&f<=50&&(f++,"object"==typeof v&&(v.placement&&(d=v.placement),v.rects&&(c=!0===v.rects?await a.getElementRects({reference:t,floating:e,strategy:n}):v.rects),({x:l,y:u}=re(c,d,h))),s=-1)}return{x:l,y:u,placement:d,strategy:n,middlewareData:p}})(t,e,{...n,platform:r})},Ve=t=>null===t?"":t+"",He=t=>null===t?null:t+"",Qe=t=>null===t?0:Number(t),We=t=>null!==t,Ke=()=>null,Be=t=>null===t?[]:JSON.parse(t),Ye=t=>null===t?{}:JSON.parse(t);function ze(t){if(null===t)return He;switch(typeof t){case"undefined":case"string":default:return Ve;case"boolean":return We;case"number":return Qe;case"function":return Ke;case"object":return et(t)?Be:Ye}}const Ue=Symbol(0),Je=Symbol(0),Xe=Symbol(0),_e=Symbol(0);function Ge(t,e){var s,i,n;class r extends t{constructor(...t){if(super(...t),this[i]=0,this[n]=null,this.keepAlive=!1,this.forwardKeepAlive=!0,this.$=T((()=>function(t,e){return function(t){const e=R();return A(e,t.length?t.bind(null,S.bind(e)):t,null)}((()=>{Lt.$$=new jt(t,k(),e);const s=new t;return Lt.$$.e=s,Lt.$$=null,s}))}(e)),null),this.$.$$.t(this),e.props){const t=this.$props,s=Object.getOwnPropertyDescriptors(this);for(const i of Object.keys(s))i in e.props&&(t[i].set(this[i]),delete this[i])}}static{this[s]=null}static get observedAttributes(){if(!this[Ue]&&e.props){const t=new Map;for(const s of Object.keys(e.props)){let i=this.attrs?.[s],n=G(i)?i:i?i?.attr:i;!1!==n&&(n||(n=It(s)),t.set(n,{C:s,B:i&&!G(i)&&i?.converter||ze(e.props[s])}))}this[Ue]=t}return this[Ue]?Array.from(this[Ue].keys()):[]}get scope(){return this.$.$$.d}get attachScope(){return this.$.$$.f}get connectScope(){return this.$.$$.g}get $props(){return this.$.$$.i}get $state(){return this.$.$$.h}get state(){return this.$.state}attributeChangedCallback(t,e,s){const i=this.constructor;if(!i[Ue])return void super.attributeChangedCallback?.(t,e,s);const n=i[Ue].get(t);n&&(this[n.C]=n.B(s))}connectedCallback(){const t=this.$?.$$;if(!t||t.o)return;if(2!==this[Xe])return void Ze.call(this);if(!this.isConnected)return;this.hasAttribute("keep-alive")&&(this.keepAlive=!0),t.y(),et(this[_e])&&function(t,e){for(const s of t)s(e)}(this[_e],this),this[_e]=null;const e=super.connectedCallback;e&&T((()=>e.call(this)),this.connectScope)}disconnectedCallback(){const t=this.$?.$$;if(!t||t.o)return;t.z();const e=super.disconnectedCallback;e&&e.call(this),this.keepAlive||this.hasAttribute("keep-alive")||setTimeout((()=>{requestAnimationFrame((()=>{this.isConnected||t.p()}))}),0)}[(s=Ue,i=Xe,n=_e,Je)](){const t=this.$.$$,e=this.constructor;if(t.o)return;const s=e[Ue];if(s)for(const e of this.attributes){let i=s.get(e.name);i&&i.B&&t.i[i.C].set(i.B(this.getAttribute(e.name)))}t.w(),t.x(this),this[Xe]=2,this.connectedCallback()}subscribe(t){return this.$.subscribe(t)}destroy(){this.disconnectedCallback(),this.$.destroy()}}return function(t,e){const s=t.prototype,i=e.prototype;if(e.props)for(const t of Object.keys(e.props))Object.defineProperty(s,t,{enumerable:!0,configurable:!0,get(){return this.$props[t]()},set(e){this.$props[t].set(e)}});if(i[Pt])for(const t of i[Pt])Object.defineProperty(s,t,{enumerable:!0,configurable:!0,get(){return this.$[t]},set(e){this.$[t]=e}});if(i[St])for(const t of i[St])s[t]=function(...e){return this.$[t](...e)}}(r,e),r}function Ze(){if(0!==this[Xe])return;this[Xe]=1;const t=function(t){let e=t.parentNode,s=t.localName.split("-",1)[0]+"-";for(;e;){if(1===e.nodeType&&e.localName.startsWith(s))return e;e=e.parentNode}return null}(this),e=t&&window.customElements.get(t.localName),s=t&&2===t[Xe];!t||e&&s?es.call(this,t):ts.call(this,t)}async function ts(t){await window.customElements.whenDefined(t.localName),2!==t[Xe]&&await new Promise((e=>(t[_e]??=[]).push(e))),es.call(this,t)}function es(t){if(this.isConnected){if(t){t.keepAlive&&t.forwardKeepAlive&&(this.keepAlive=!0,this.setAttribute("keep-alive",""));const e=this.$.$$.d;e&&t.$.$$.f.append(e)}this[Je]()}}function ss(t,e=!1){!e&&window.customElements.get(t.tagName)||window.customElements.define(t.tagName,t)}},9256:(t,e,s)=>{s.d(e,{c:()=>f,e:()=>d,f:()=>p,g:()=>g,i:()=>u});var i=s(555),n=s(5242);const r=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,a=new Set(["audio/mpeg","audio/ogg","audio/3gp","audio/mp4","audio/webm","audio/flac"]),o=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,h=new Set(["video/mp4","video/webm","video/3gp","video/ogg","video/avi","video/mpeg"]),c=/\.(m3u8)($|\?)/i,l=new Set(["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"]);function u({src:t,type:e}){return(0,n.t)(t)?r.test(t)||a.has(e)||t.startsWith("blob:")&&"audio/object"===e:"audio/object"===e}function d(t){return(0,n.t)(t.src)?o.test(t.src)||h.has(t.type)||t.src.startsWith("blob:")&&"video/object"===t.type||p(t)&&(0,i.c)():"video/object"===t.type}function p({src:t,type:e}){return(0,n.t)(t)&&c.test(t)||l.has(e)}function f(t){return(0,n.t)(t.src)&&(u(t)||d(t)||p(t))}function g(t){return void 0!==window.MediaStream&&t instanceof window.MediaStream}},1322:(t,e,s)=>{s.d(e,{P:()=>l,a:()=>u,b:()=>a,c:()=>h,m:()=>n,u:()=>r});var i=s(5242);const n=(0,i.V)();function r(){return(0,i.v)(n)}function a(){return r().$state}const o=(0,i.V)();function h(){return(0,i.v)(o)}const c={clickToPlay:!0,clickToFullscreen:!0,controls:["play-large","play","progress","current-time","mute+volume","captions","settings","pip","airplay","fullscreen"],customIcons:!1,displayDuration:!1,download:null,markers:null,invertTime:!0,thumbnails:null,toggleTime:!0,translations:null,seekTime:10,speed:[.5,.75,1,1.25,1.5,1.75,2,4]};class l extends i.C{static{this.props=c}onSetup(){this.a=r(),(0,i.W)(o,{...this.$props,previewTime:(0,i.n)(0)})}}function u(t,e){const{fullscreen:s,canFullscreen:n,canPictureInPicture:r,pictureInPicture:a,hasCaptions:o,textTrack:h,canAirPlay:c,isAirPlayConnected:l,viewType:u,playing:d,paused:p,controlsVisible:f,pointer:g,waiting:m,currentTime:b,poster:y}=e.$state;t.classList.add("plyr"),t.classList.add("plyr--full-ui");const v={"plyr--airplay-active":l,"plyr--airplay-supported":c,"plyr--fullscreen-active":s,"plyr--fullscreen-enabled":n,"plyr--hide-controls":()=>!f(),"plyr--is-touch":()=>"coarse"===g(),"plyr--loading":m,"plyr--paused":p,"plyr--pip-active":a,"plyr--pip-enabled":r,"plyr--playing":d,"plyr__poster-enabled":y,"plyr--stopped":()=>p()&&0===b(),"plyr--captions-active":h,"plyr--captions-enabled":o},$=(0,i.X)();for(const e of Object.keys(v))$.add((0,i.e)((()=>{t.classList.toggle(e,!!v[e]())})));return $.add((0,i.e)((()=>{const e=`plyr--${u()}`;return t.classList.add(e),()=>t.classList.remove(e)})),(0,i.e)((()=>{const{$provider:s}=e,i=s()?.type,n=`plyr--${function(t){return"audio"===t||"video"===t}(i)?"html5":i}`;return t.classList.toggle(n,!!i),()=>t.classList.remove(n)}))),()=>$.empty()}},7203:(t,e,s)=>{function i(t,e=2){return Number(t.toFixed(e))}function n(t){return String(t).split(".")[1]?.length??0}function r(t,e,s){return Math.max(t,Math.min(s,e))}s.d(e,{c:()=>r,g:()=>n,r:()=>i})}}]);