"use strict";(self.webpackChunklearn_data=self.webpackChunklearn_data||[]).push([[613],{613:(t,e,s)=>{s.d(e,{$:()=>oe,F:()=>wt,J:()=>Kt,K:()=>Wt,M:()=>_e,N:()=>Ut,O:()=>Xt,P:()=>Vs,Q:()=>Zt,R:()=>ee,S:()=>$e,T:()=>Te,U:()=>se,W:()=>ie,X:()=>ne,Z:()=>ae,_:()=>re,a0:()=>he,a1:()=>ce,a2:()=>le,a4:()=>Se,a5:()=>Ee,a6:()=>qe,a8:()=>je,a9:()=>Le,aa:()=>Oe,ab:()=>Me,ac:()=>De,ad:()=>Ve,ae:()=>Ue,af:()=>Ye,ah:()=>ts,ai:()=>rs,aj:()=>cs,ak:()=>ps,al:()=>bs,an:()=>ks,ao:()=>Ss,aq:()=>js,ar:()=>Ds,as:()=>Is,at:()=>Rs,au:()=>Ns,aw:()=>te,c:()=>Rt,d:()=>At,s:()=>B,t:()=>zt});var i=s(8080),n=s(7651),a=s(4126),r=s(7927),o=s(6817);Symbol(0);var h;class c extends i.T{constructor(){super(...arguments),this.r=[],this[h]=!1}get length(){return this.r.length}get readonly(){return this[n.L.Zb]}indexOf(t){return this.r.indexOf(t)}getById(t){return""===t?null:this.r.find((e=>e.id===t))??null}toArray(){return[...this.r]}[(h=n.L.Zb,Symbol.iterator)](){return this.r.values()}[n.L.oa](t,e){const s=this.r.length;""+s in this||Object.defineProperty(this,s,{get(){return this.r[s]}}),this.r.includes(t)||(this.r.push(t),this.dispatchEvent(new i.D("add",{detail:t,trigger:e})))}[n.L.Yb](t,e){const s=this.r.indexOf(t);s>=0&&(this[n.L.oe]?.(t,e),this.r.splice(s,1),this.dispatchEvent(new i.D("remove",{detail:t,trigger:e})))}[n.L.H](t){for(const e of[...this.r])this[n.L.Yb](e,t);this.r=[],this[n.L.Mc](!1,t),this[n.L.ne]?.()}[n.L.Mc](t,e){this[n.L.Zb]!==t&&(this[n.L.Zb]=t,this.dispatchEvent(new i.D("readonly-change",{detail:t,trigger:e})))}}const l=new i.U({artist:"",artwork:null,audioTrack:null,audioTracks:[],autoPlay:!1,autoPlayError:null,audioGain:null,buffered:new r.T,canLoad:!1,canLoadPoster:!1,canFullscreen:!1,canOrientScreen:(0,a.f)(),canPictureInPicture:!1,canPlay:!1,clipStartTime:0,clipEndTime:0,controls:!1,controlsVisible:!1,get controlsHidden(){return!this.controlsVisible},crossOrigin:null,ended:!1,error:null,fullscreen:!1,get loop(){return this.providedLoop||this.userPrefersLoop},logLevel:"silent",mediaType:"unknown",muted:!1,paused:!0,played:new r.T,playing:!1,playsInline:!1,pictureInPicture:!1,preload:"metadata",playbackRate:1,qualities:[],quality:null,autoQuality:!1,canSetQuality:!0,canSetPlaybackRate:!0,canSetVolume:!1,canSetAudioGain:!1,seekable:new r.T,seeking:!1,source:{src:"",type:""},sources:[],started:!1,textTracks:[],textTrack:null,get hasCaptions(){return this.textTracks.filter(o.i).length>0},volume:1,waiting:!1,realCurrentTime:0,get currentTime(){return this.clipStartTime>0?Math.max(0,Math.min(this.realCurrentTime-this.clipStartTime,this.duration)):this.realCurrentTime},providedDuration:-1,intrinsicDuration:0,get realDuration(){return this.providedDuration>0?this.providedDuration:this.intrinsicDuration},get duration(){return this.clipEndTime>0?this.clipEndTime-this.clipStartTime:Math.max(0,this.realDuration-this.clipStartTime)},get title(){return this.providedTitle||this.inferredTitle},get poster(){return this.providedPoster||this.inferredPoster},get viewType(){return"unknown"!==this.providedViewType?this.providedViewType:this.inferredViewType},get streamType(){return"unknown"!==this.providedStreamType?this.providedStreamType:this.inferredStreamType},get currentSrc(){return this.source},get bufferedStart(){const t=(0,r.g)(this.buffered)??0;return Math.max(0,t-this.clipStartTime)},get bufferedEnd(){const t=(0,r.b)(this.buffered)??0;return Math.min(this.duration,Math.max(0,t-this.clipStartTime))},get seekableStart(){const t=(0,r.g)(this.seekable)??0;return Math.max(0,t-this.clipStartTime)},get seekableEnd(){const t=this.canPlay?(0,r.b)(this.seekable)??1/0:0;return this.clipEndTime>0?Math.max(this.clipEndTime,Math.max(0,t-this.clipStartTime)):t},get seekableWindow(){return Math.max(0,this.seekableEnd-this.seekableStart)},canAirPlay:!1,canGoogleCast:!1,remotePlaybackState:"disconnected",remotePlaybackType:"none",remotePlaybackLoader:null,remotePlaybackInfo:null,get isAirPlayConnected(){return"airplay"===this.remotePlaybackType&&"connected"===this.remotePlaybackState},get isGoogleCastConnected(){return"google-cast"===this.remotePlaybackType&&"connected"===this.remotePlaybackState},pointer:"fine",orientation:"landscape",width:0,height:0,mediaWidth:0,mediaHeight:0,lastKeyboardAction:null,userBehindLiveEdge:!1,liveEdgeTolerance:10,minLiveDVRWindow:60,get canSeek(){return/unknown|on-demand|:dvr/.test(this.streamType)&&Number.isFinite(this.seekableWindow)&&(!this.live||/:dvr/.test(this.streamType)&&this.seekableWindow>=this.minLiveDVRWindow)},get live(){return this.streamType.includes("live")||!Number.isFinite(this.realDuration)},get liveEdgeStart(){return this.live&&Number.isFinite(this.seekableEnd)?Math.max(0,(this.liveSyncPosition??this.seekableEnd)-this.liveEdgeTolerance):0},get liveEdge(){return this.live&&(!this.canSeek||!this.userBehindLiveEdge&&this.currentTime>=this.liveEdgeStart)},get liveEdgeWindow(){return this.live&&Number.isFinite(this.seekableEnd)?this.seekableEnd-this.liveEdgeStart:0},autoPlaying:!1,providedTitle:"",inferredTitle:"",providedLoop:!1,userPrefersLoop:!1,providedPoster:"",inferredPoster:"",inferredViewType:"unknown",providedViewType:"unknown",providedStreamType:"unknown",inferredStreamType:"unknown",liveSyncPosition:null,savedState:null}),u=new Set(["autoPlayError","autoPlaying","buffered","canPlay","error","paused","played","playing","seekable","seeking","waiting"]),d=new Set([...u,"ended","inferredPoster","inferredStreamType","inferredTitle","intrinsicDuration","liveSyncPosition","realCurrentTime","savedState","started","userBehindLiveEdge"]);function p(t,e=!1){const s=e?u:d;l.reset(t,(t=>s.has(t))),(0,i.V)()}var g=s(4309),f=s(6450),m=s(4729),b=s(8327),y=s(6665),$={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},v=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],w=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],k=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],T="undefined"!=typeof window&&void 0!==window.document?window.document:{},x="fullscreenEnabled"in T&&Object.keys($)||v[0]in T&&v||w[0]in T&&w||k[0]in T&&k||[],P={requestFullscreen:function(t){return t[x[$.requestFullscreen]]()},requestFullscreenFunction:function(t){return t[x[$.requestFullscreen]]},get exitFullscreen(){return T[x[$.exitFullscreen]].bind(T)},get fullscreenPseudoClass(){return":"+x[$.fullscreen]},addEventListener:function(t,e,s){return T.addEventListener(x[$[t]],e,s)},removeEventListener:function(t,e,s){return T.removeEventListener(x[$[t]],e,s)},get fullscreenEnabled(){return Boolean(T[x[$.fullscreenEnabled]])},set fullscreenEnabled(t){},get fullscreenElement(){return T[x[$.fullscreenElement]]},set fullscreenElement(t){},get onfullscreenchange(){return T[("on"+x[$.fullscreenchange]).toLowerCase()]},set onfullscreenchange(t){return T[("on"+x[$.fullscreenchange]).toLowerCase()]=t},get onfullscreenerror(){return T[("on"+x[$.fullscreenerror]).toLowerCase()]},set onfullscreenerror(t){return T[("on"+x[$.fullscreenerror]).toLowerCase()]=t}};const S=P.fullscreenEnabled;class C extends i.a3{constructor(){super(...arguments),this.ub=!1,this.Nc=!1}get active(){return this.Nc}get supported(){return S}onConnect(){(0,i.l)(P,"fullscreenchange",this.Oc.bind(this)),(0,i.l)(P,"fullscreenerror",this._b.bind(this)),(0,i.q)(this.ya.bind(this))}async ya(){S&&await this.exit()}Oc(t){const e=A(this.el);e!==this.Nc&&(e||(this.ub=!1),this.Nc=e,this.dispatch("fullscreen-change",{detail:e,trigger:t}))}_b(t){this.ub&&(this.dispatch("fullscreen-error",{detail:null,trigger:t}),this.ub=!1)}async enter(){try{if(this.ub=!0,!this.el||A(this.el))return;return E(),P.requestFullscreen(this.el)}catch(t){throw this.ub=!1,t}}async exit(){if(this.el&&A(this.el))return E(),P.exitFullscreen()}}function A(t){if(P.fullscreenElement===t)return!0;try{return t.matches(P.fullscreenPseudoClass)}catch(t){return!1}}function E(){if(!S)throw Error("[vidstack] no fullscreen API")}class q extends i.a3{constructor(){super(...arguments),this.vb=(0,i.f)(this.qe()),this.Ra=(0,i.f)(!1)}get type(){return this.vb()}get locked(){return this.Ra()}get portrait(){return this.vb().startsWith("portrait")}get landscape(){return this.vb().startsWith("landscape")}static{this.supported=(0,a.f)()}get supported(){return q.supported}onConnect(){if(this.supported)(0,i.l)(screen.orientation,"change",this.re.bind(this));else{const t=window.matchMedia("(orientation: landscape)");t.onchange=this.re.bind(this),(0,i.q)((()=>t.onchange=null))}(0,i.q)(this.ya.bind(this))}async ya(){this.supported&&this.Ra()&&await this.unlock()}re(t){this.vb.set(this.qe()),this.dispatch("orientation-change",{detail:{orientation:(0,i.p)(this.vb),lock:this.$b},trigger:t})}async lock(t){(0,i.p)(this.Ra)||this.$b===t||(this.se(),await screen.orientation.lock(t),this.Ra.set(!0),this.$b=t)}async unlock(){(0,i.p)(this.Ra)&&(this.se(),this.$b=void 0,await screen.orientation.unlock(),this.Ra.set(!1))}se(){if(!this.supported)throw Error("[vidstack] no orientation API")}qe(){return this.supported?window.screen.orientation.type:window.innerWidth>=window.innerHeight?"landscape-primary":"portrait-primary"}}function j(t){return!(0,i.i)(t)&&"width"in t&&"height"in t&&(0,i.j)(t.width)&&(0,i.j)(t.height)}class L{constructor(t=void 0){this.tb=t,this.A=null,this.aa=null,this.Pc=-1}setTarget(t){this.A=t}getPlayer(t){return this.aa||(t??this.A)?.dispatchEvent(new i.D("find-media-player",{detail:t=>{this.aa=t},bubbles:!0,composed:!0})),this.aa}setPlayer(t){this.aa=t}startLoading(t){this.s("media-start-loading",t)}startLoadingPoster(t){this.s("media-poster-start-loading",t)}requestAirPlay(t){this.s("media-airplay-request",t)}requestGoogleCast(t){this.s("media-google-cast-request",t)}play(t){this.s("media-play-request",t)}pause(t){this.s("media-pause-request",t)}mute(t){this.s("media-mute-request",t)}unmute(t){this.s("media-unmute-request",t)}enterFullscreen(t,e){this.s("media-enter-fullscreen-request",e,t)}exitFullscreen(t,e){this.s("media-exit-fullscreen-request",e,t)}lockScreenOrientation(t,e){this.s("media-orientation-lock-request",e,t)}unlockScreenOrientation(t){this.s("media-orientation-unlock-request",t)}enterPictureInPicture(t){this.s("media-enter-pip-request",t)}exitPictureInPicture(t){this.s("media-exit-pip-request",t)}seeking(t,e){this.s("media-seeking-request",e,t)}seek(t,e){this.s("media-seek-request",e,t)}seekToLiveEdge(t){this.s("media-live-edge-request",t)}changeVolume(t,e){this.s("media-volume-change-request",e,Math.max(0,Math.min(1,t)))}changeAudioTrack(t,e){this.s("media-audio-track-change-request",e,t)}changeQuality(t,e){this.s("media-quality-change-request",e,t)}requestAutoQuality(t){this.changeQuality(-1,t)}changeTextTrackMode(t,e,s){this.s("media-text-track-change-request",s,{index:t,mode:e})}changePlaybackRate(t,e){this.s("media-rate-change-request",e,t)}changeAudioGain(t,e){this.s("media-audio-gain-change-request",e,t)}resumeControls(t){this.s("media-resume-controls-request",t)}pauseControls(t){this.s("media-pause-controls-request",t)}togglePaused(t){const e=this.getPlayer(t?.target);e&&(e.state.paused?this.play(t):this.pause(t))}toggleControls(t){const e=this.getPlayer(t?.target);e&&(e.controls.showing?e.controls.hide(0,t):e.controls.show(0,t))}toggleMuted(t){const e=this.getPlayer(t?.target);e&&(e.state.muted?this.unmute(t):this.mute(t))}toggleFullscreen(t,e){const s=this.getPlayer(e?.target);s&&(s.state.fullscreen?this.exitFullscreen(t,e):this.enterFullscreen(t,e))}togglePictureInPicture(t){const e=this.getPlayer(t?.target);e&&(e.state.pictureInPicture?this.exitPictureInPicture(t):this.enterPictureInPicture(t))}showCaptions(t){const e=this.getPlayer(t?.target);if(!e)return;let s=e.state.textTracks,i=this.Pc;s[i]&&(0,o.i)(s[i])||(i=-1),-1===i&&(i=s.findIndex((t=>(0,o.i)(t)&&t.default))),-1===i&&(i=s.findIndex((t=>(0,o.i)(t)))),i>=0&&this.changeTextTrackMode(i,"showing",t),this.Pc=-1}disableCaptions(t){const e=this.getPlayer(t?.target);if(!e)return;const s=e.state.textTracks,i=e.state.textTrack;if(i){const e=s.indexOf(i);this.changeTextTrackMode(e,"disabled",t),this.Pc=e}}toggleCaptions(t){const e=this.getPlayer(t?.target);e&&(e.state.textTrack?this.disableCaptions():this.showCaptions())}userPrefersLoopChange(t,e){this.s("media-user-loop-change-request",e,t)}s(t,e,s){const n=new i.D(t,{bubbles:!0,composed:!0,cancelable:!0,detail:s,trigger:e});let a=e?.target||null;a&&a instanceof i.C&&(a=a.el);const r=!a||a===document||a===window||a===document.body||this.aa?.el&&a instanceof Node&&!this.aa.el.contains(a);a=r?this.A??this.getPlayer()?.el:a??this.A,this.aa&&("media-play-request"!==t||this.aa.state.canLoad)?this.aa.canPlayQueue.k(t,(()=>a?.dispatchEvent(n))):a?.dispatchEvent(n)}za(t){}}class O extends i.a3{}class M extends O{constructor(){super(...arguments),this.Qc=-2,this.Xa=!1,this.ze=(0,i.f)(!1),this.Rc=(0,i.f)(!1),this.wb=null,this.Ho=(0,i.f)(!0),this.defaultDelay=2e3}get canIdle(){return this.Ho()}set canIdle(t){this.Ho.set(t)}get hideOnMouseLeave(){const{hideControlsOnMouseLeave:t}=this.$props;return this.ze()||t()}set hideOnMouseLeave(t){this.ze.set(t)}get showing(){return this.$state.controlsVisible()}show(t=0,e){this.Sc(),this.Xa||this.bc(!0,t,e)}hide(t=this.defaultDelay,e){this.Sc(),this.Xa||this.bc(!1,t,e)}pause(t){this.Xa=!0,this.Sc(),this.bc(!0,0,t)}resume(t){this.Xa=!1,this.$state.paused()||this.bc(!1,this.defaultDelay,t)}onConnect(){(0,i.g)(this.Ch.bind(this))}Ch(){const{viewType:t}=this.$state;if(!this.Ho())return;if("audio"===t())return void this.show();(0,i.g)(this.bg.bind(this)),(0,i.g)(this.Tc.bind(this));const e=this.xb.bind(this),s=this.Aa.bind(this);this.listen("can-play",(t=>this.show(0,t))),this.listen("play",e),this.listen("pause",s),this.listen("auto-play-fail",s)}bg(){const{started:t,pointer:e,paused:s}=this.$state;if(!t()||"fine"!==e())return;const n=this.hideOnMouseLeave;n&&this.Rc()||(0,i.g)((()=>{s()||this.listen("pointermove",this.Ae.bind(this))})),n&&(this.listen("mouseenter",this.cg.bind(this)),this.listen("mouseleave",this.dg.bind(this)))}Tc(){const{paused:t,started:e,autoPlayError:s}=this.$state;if(t()||s()&&!e())return;const n=this.Ae.bind(this);(0,i.g)((()=>{const t=["coarse"===this.$state.pointer()?"touchend":"pointerup","keydown"];for(const e of t)this.listen(e,n,{passive:!1})}))}xb(t){this.show(0,t),this.hide(void 0,t)}Aa(t){this.show(0,t)}cg(t){this.Rc.set(!1),this.show(0,t),this.hide(void 0,t)}dg(t){this.Rc.set(!0),this.hide(0,t)}Sc(){window.clearTimeout(this.Qc),this.Qc=-1}Ae(t){t.MEDIA_GESTURE||this.Xa||(0,r.j)(t)||((0,i.P)(t)&&("Escape"===t.key?(this.el?.focus(),this.wb=null):this.wb&&(t.preventDefault(),requestAnimationFrame((()=>{this.wb?.focus(),this.wb=null})))),this.show(0,t),this.hide(this.defaultDelay,t))}bc(t,e,s){0!==e?this.Qc=window.setTimeout((()=>{this.scope&&this.B(t&&!this.Xa,s)}),e):this.B(t,s)}B(t,e){this.$state.controlsVisible()!==t&&(this.$state.controlsVisible.set(t),!t&&document.activeElement&&this.el?.contains(document.activeElement)&&(this.wb=document.activeElement,requestAnimationFrame((()=>{this.el?.focus({preventScroll:!0})}))),this.dispatch("controls-change",{detail:t,trigger:e}))}}var D=function(t,e,s){var i=null,n=null,a=s&&s.leading,r=s&&s.trailing;null==a&&(a=!0),null==r&&(r=!a),1==a&&(r=!1);var o=function(){i&&(clearTimeout(i),i=null)},h=function(){var s=a&&!i,o=this,h=arguments;if(n=function(){return t.apply(o,h)},i||(i=setTimeout((function(){if(i=null,r)return n()}),e)),s)return s=!1,n()};return h.cancel=o,h.flush=function(){var t=n;o(),t&&t()},h};class I{constructor(){this.playerId="vds-player",this.mediaId=null,this.Qk={volume:null,muted:null,audioGain:null,time:null,lang:null,captions:null,rate:null,quality:null},this.saveTimeThrottled=D(this.saveTime.bind(this),1e3)}async getVolume(){return this.Qk.volume}async setVolume(t){this.Qk.volume=t,this.save()}async getMuted(){return this.Qk.muted}async setMuted(t){this.Qk.muted=t,this.save()}async getTime(){return this.Qk.time}async setTime(t,e){const s=t<0;this.Qk.time=s?null:t,s||e?this.saveTime():this.saveTimeThrottled()}async getLang(){return this.Qk.lang}async setLang(t){this.Qk.lang=t,this.save()}async getCaptions(){return this.Qk.captions}async setCaptions(t){this.Qk.captions=t,this.save()}async getPlaybackRate(){return this.Qk.rate}async setPlaybackRate(t){this.Qk.rate=t,this.save()}async getAudioGain(){return this.Qk.audioGain}async setAudioGain(t){this.Qk.audioGain=t,this.save()}async getVideoQuality(){return this.Qk.quality}async setVideoQuality(t){this.Qk.quality=t,this.save()}onChange(t,e,s="vds-player"){const i=s?localStorage.getItem(s):null,n=e?localStorage.getItem(e):null;this.playerId=s,this.mediaId=e,this.Qk={volume:null,muted:null,audioGain:null,lang:null,captions:null,rate:null,quality:null,...i?JSON.parse(i):{},time:n?+n:null}}save(){if(!this.playerId)return;const t=JSON.stringify({...this.Qk,time:void 0});localStorage.setItem(this.playerId,t)}saveTime(){if(!this.mediaId)return;const t=(this.Qk.time??0).toString();localStorage.setItem(this.mediaId,t)}}class F{constructor(){this.priority=0,this.Be=!0,this.m=null,this.z=null,this.yb=new Set}canRender(t,e){return!!e}attach(t){this.m=t,t&&(t.textTracks.onchange=this.B.bind(this))}addTrack(t){this.yb.add(t),this.eg(t)}removeTrack(t){t[o.a.T]?.remove?.(),t[o.a.T]=null,this.yb.delete(t)}changeTrack(t){const e=t?.[o.a.T];e&&"showing"!==e.track.mode&&(e.track.mode="showing"),this.z=t}setDisplay(t){this.Be=t,this.B()}detach(){this.m&&(this.m.textTracks.onchange=null);for(const t of this.yb)this.removeTrack(t);this.yb.clear(),this.m=null,this.z=null}eg(t){if(!this.m)return;const e=t[o.a.T]??=this.fg(t);(0,r.i)(e)&&(this.m.append(e),e.track.mode=e.default?"showing":"disabled")}fg(t){const e=document.createElement("track"),s=t.default||"showing"===t.mode,i=t.src&&"vtt"===t.type;return e.id=t.id,e.src=i?t.src:"",e.label=t.label,e.kind=t.kind,e.default=s,t.language&&(e.srclang=t.language),s&&!i&&this.Ce(t,e.track),e}Ce(t,e){if(!(t.src&&"vtt"===t.type||e.cues?.length))for(const s of t.cues)e.addCue(s)}B(t){for(const e of this.yb){const s=e[o.a.T];if(!s)continue;if(!this.Be){s.track.mode=s.managed?"hidden":"disabled";continue}const i="showing"===s.track.mode;i&&this.Ce(e,s.track),e.setMode(i?"showing":"disabled",t)}}}class R{constructor(t){this.a=t,this.m=null,this.cc=[],this.De=!1,this.ba=null,this.Ba=null;const e=t.textTracks;this.Uc=e,(0,i.g)(this.Vc.bind(this)),(0,i.q)(this.Ee.bind(this)),(0,i.l)(e,"add",this.Wc.bind(this)),(0,i.l)(e,"remove",this.gg.bind(this)),(0,i.l)(e,"mode-change",this.ea.bind(this))}Vc(){const{$state:t,$iosControls:e}=this.a;this.De=t.controls()||e(),this.ea()}add(t){this.cc.push(t),this.ea()}remove(t){t.detach(),this.cc.splice(this.cc.indexOf(t),1),this.ea()}Fe(t){requestAnimationFrame((()=>{if(this.m=t,t){this.ba=new F,this.ba.attach(t);for(const t of this.Uc)this.Ge(t)}this.ea()}))}Ge(t){(0,o.i)(t)&&this.ba?.addTrack(t)}hg(t){(0,o.i)(t)&&this.ba?.removeTrack(t)}Wc(t){this.Ge(t.detail)}gg(t){this.hg(t.detail)}ea(){const t=this.Uc.selected;if(this.m&&(this.De||t?.[o.a.te]))return this.Ba?.changeTrack(null),this.ba?.setDisplay(!0),void this.ba?.changeTrack(t);if(this.ba?.setDisplay(!1),this.ba?.changeTrack(null),!t)return void this.Ba?.changeTrack(null);const e=this.cc.sort(((t,e)=>t.priority-e.priority)).find((e=>e.canRender(t,this.m)));this.Ba!==e&&(this.Ba?.detach(),e?.attach(this.m),this.Ba=e??null),e?.changeTrack(t)}Ee(){this.ba?.detach(),this.ba=null,this.Ba?.detach(),this.Ba=null}}var V=function(t,e,s){var i=null,n=null,a=function(){i&&(clearTimeout(i),n=null,i=null)},r=function(){if(!e)return t.apply(this,arguments);var r=this,o=arguments,h=s&&!i;return a(),n=function(){t.apply(r,o)},i=setTimeout((function(){if(i=null,!h){var t=n;return n=null,t()}}),e),h?n():void 0};return r.cancel=a,r.flush=function(){var t=n;a(),t&&t()},r};class N extends c{constructor(){super(),this.P=!1,this.dc={},this.Sk=null,this.Rk=null,this.un=V((async()=>{if(!this.P)return;!this.Rk&&this.Sk&&(this.Rk=await this.Sk.getLang());const t=await(this.Sk?.getCaptions()),e=[["captions","subtitles"],"chapters","descriptions","metadata"];for(const s of e){const e=this.getByKind(s);if(e.find((t=>"showing"===t.mode)))continue;const n=this.Rk?e.find((t=>t.language===this.Rk)):null,a=(0,i.v)(s)?this.dc[s.find((t=>this.dc[t]))||""]:this.dc[s],r=n??a,h=r&&(0,o.i)(r);!r||h&&!1===t||(r.mode="showing",h&&this.vn(r))}}),300),this.Je=this.ig.bind(this)}get selected(){return this.r.find((t=>"showing"===t.mode&&(0,o.i)(t)))??null}get selectedIndex(){const t=this.selected;return t?this.indexOf(t):-1}get preferredLang(){return this.Rk}set preferredLang(t){this.Rk=t,this.tn(t)}add(t,e){const s=t instanceof o.T?t:new o.T(t),i="captions"===t.kind||"subtitles"===t.kind?"captions":t.kind;return this.dc[i]&&t.default&&delete t.default,s.addEventListener("mode-change",this.Je),this[n.L.oa](s,e),s[o.a.al]=this[o.a.al],this.P&&s[o.a.P](),t.default&&(this.dc[i]=s),this.un(),this}remove(t,e){if(this.r.includes(t))return t===this.dc[t.kind]&&delete this.dc[t.kind],t.mode="disabled",t[o.a.Ua]=null,t.removeEventListener("mode-change",this.Je),this[n.L.Yb](t,e),this}clear(t){for(const e of[...this.r])this.remove(e,t);return this}getByKind(t){const e=Array.isArray(t)?t:[t];return this.r.filter((t=>e.includes(t.kind)))}[o.a.P](){if(!this.P){for(const t of this.r)t[o.a.P]();this.P=!0,this.un()}}ig(t){const e=t.detail;if(this.Sk&&(0,o.i)(e)&&"disabled"!==e.mode&&this.vn(e),"showing"===e.mode){const t=(0,o.i)(e)?["captions","subtitles"]:[e.kind];for(const s of this.r)"showing"===s.mode&&s!=e&&t.includes(s.kind)&&(s.mode="disabled")}this.dispatchEvent(new i.D("mode-change",{detail:t.detail,trigger:t}))}vn(t){this.tn(t.language),this.Sk?.setCaptions?.("showing"===t.mode)}tn(t){this.Sk?.setLang?.(this.Rk=t)}setStorage(t){this.Sk=t}}const H=Symbol(0);class Q extends c{get selected(){return this.r.find((t=>t.selected))??null}get selectedIndex(){return this.r.findIndex((t=>t.selected))}[n.L.oe](t,e){this[n.L.pa](t,!1,e)}[n.L.oa](t,e){t[H]=!1,Object.defineProperty(t,"selected",{get(){return this[H]},set:e=>{this.readonly||(this[n.L.pe]?.(),this[n.L.pa](t,e))}}),super[n.L.oa](t,e)}[n.L.pa](t,e,s){if(e===t?.[H])return;const n=this.selected;t&&(t[H]=e),(e?n!==t:n===t)&&(n&&(n[H]=!1),this.dispatchEvent(new i.D("change",{detail:{prev:n,current:this.selected},trigger:s})))}}class K extends Q{}class W extends Q{constructor(){super(...arguments),this.fc=!1,this.switch="current"}get auto(){return this.fc||this.readonly}[n.L.pe](){this[f.Q.Ya](!1)}[n.L.ne](t){this[f.Q.Za]=void 0,this[f.Q.Ya](!1,t)}autoSelect(t){this.readonly||this.fc||!this[f.Q.Za]||(this[f.Q.Za]?.(t),this[f.Q.Ya](!0,t))}getBySrc(t){return this.r.find((e=>e.src===t))}[f.Q.Ya](t,e){this.fc!==t&&(this.fc=t,this.dispatchEvent(new i.D("auto-change",{detail:t,trigger:e})))}}function B(t,e){return[...t].sort(e?G:z)}function z(t,e){return t.height===e.height?(t.bitrate??0)-(e.bitrate??0):t.height-e.height}function G(t,e){return e.height===t.height?(e.bitrate??0)-(t.bitrate??0):e.height-t.height}const U=new Set(["Shift","Alt","Meta","Control"]),X='input, textarea, select, [contenteditable], [role^="menuitem"], [role="timer"]';class J extends O{constructor(t){super(),this.a=t,this._a=null}onConnect(){(0,i.g)(this.mg.bind(this))}mg(){const{keyDisabled:t,keyTarget:e}=this.$props;if(t())return;const s="player"===e()?this.el:document,n=(0,i.f)(!1);s===this.el?(this.listen("focusin",(()=>n.set(!0))),this.listen("focusout",(t=>{this.el.contains(t.target)||n.set(!1)}))):((0,i.p)(n)||n.set(document.querySelector("[data-media-player]")===this.el),(0,i.l)(document,"focusin",(t=>{const e=t.composedPath().find((t=>t instanceof Element&&"media-player"===t.localName));void 0!==e&&n.set(this.el===e)}))),(0,i.g)((()=>{n()&&((0,i.l)(s,"keyup",this.zb.bind(this)),(0,i.l)(s,"keydown",this.Ab.bind(this)),(0,i.l)(s,"keydown",this.ng.bind(this),{capture:!0}))}))}zb(t){const e=document.activeElement;if(!t.key||!this.$state.canSeek()||e?.matches(X))return;let{method:s,value:n}=this.Zc(t);if(!(0,i.i)(n)&&!(0,i.v)(n))return n?.onKeyUp?.({event:t,player:this.a.player,remote:this.a.remote}),void n?.callback?.(t,this.a.remote);if(s?.startsWith("seek")&&(t.preventDefault(),t.stopPropagation(),this._a?(this.Ne(t,"seekForward"===s),this._a=null):(this.a.remote.seek(this.gc,t),this.gc=void 0)),s?.startsWith("volume")){const e=this.el.querySelector("[data-media-volume-slider]");e?.dispatchEvent(new KeyboardEvent("keyup",{key:"volumeUp"===s?"Up":"Down",shiftKey:t.shiftKey,trigger:t}))}}Ab(t){if(!t.key||U.has(t.key))return;const e=document.activeElement;if(e?.matches(X)||(0,i.z)(t)&&e?.matches('button, [role="button"]'))return;let{method:s,value:n}=this.Zc(t),a=!t.metaKey&&/^[0-9]$/.test(t.key);if(!(0,i.i)(n)&&!(0,i.v)(n)&&!a)return n?.onKeyDown?.({event:t,player:this.a.player,remote:this.a.remote}),void n?.callback?.(t,this.a.remote);if(!s&&a)return t.preventDefault(),t.stopPropagation(),void this.a.remote.seek(this.$state.duration()/10*Number(t.key),t);if(s){switch(t.preventDefault(),t.stopPropagation(),s){case"seekForward":case"seekBackward":this.qa(t,s,"seekForward"===s);break;case"volumeUp":case"volumeDown":const e=this.el.querySelector("[data-media-volume-slider]");if(e)e.dispatchEvent(new KeyboardEvent("keydown",{key:"volumeUp"===s?"Up":"Down",shiftKey:t.shiftKey,trigger:t}));else{const e=t.shiftKey?.1:.05;this.a.remote.changeVolume(this.$state.volume()+("volumeUp"===s?+e:-e),t)}break;case"toggleFullscreen":this.a.remote.toggleFullscreen("prefer-media",t);break;case"speedUp":case"slowDown":const i=this.$state.playbackRate();this.a.remote.changePlaybackRate(Math.max(.25,Math.min(2,i+("speedUp"===s?.25:-.25))),t);break;default:this.a.remote[s]?.(t)}this.$state.lastKeyboardAction.set({action:s,event:t})}}ng(t){var e;(function(t){return t instanceof HTMLAudioElement}(e=t.target)||function(t){return t instanceof HTMLVideoElement}(e))&&this.Zc(t).method&&t.preventDefault()}Zc(t){const e={...this.$props.keyShortcuts(),...this.a.ariaKeys},s=Object.keys(e).find((s=>{const n=e[s],a=(0,i.v)(n)?n.join(" "):(0,i.i)(n)?n:n?.keys;return((0,i.v)(a)?a:a?.split(" "))?.some((e=>function(t){return t.replace(/Shift\+(\d)/g,((t,e)=>_[e-1]))}(e).replace(/Control/g,"Ctrl").split("+").every((e=>U.has(e)?t[e.toLowerCase()+"Key"]:t.key===e.replace("Space"," ")))))}));return{method:s,value:s?e[s]:null}}og(t,e){const s=t.shiftKey?10:5;return this.gc=Math.max(0,Math.min((this.gc??this.$state.currentTime())+("seekForward"===e?+s:-s),this.$state.duration()))}Ne(t,e){this._a?.dispatchEvent(new KeyboardEvent(t.type,{key:e?"Right":"Left",shiftKey:t.shiftKey,trigger:t}))}qa(t,e,s){this.$state.canSeek()&&(this._a||(this._a=this.el.querySelector("[data-media-time-slider]")),this._a?this.Ne(t,s):this.a.remote.seeking(this.og(t,e),t))}}const _=["!","@","#","$","%","^","&","*","(",")"];class Y extends i.a3{constructor(t){super(),this._c=t}onAttach(t){const{$props:e,ariaKeys:s}=(0,g.u)(),n=t.getAttribute("aria-keyshortcuts");if(n)return s[this._c]=n,void(0,i.q)((()=>{delete s[this._c]}));const a=e.keyShortcuts()[this._c];if(a){const e=(0,i.v)(a)?a.join(" "):(0,i.i)(a)?a:a?.keys;t.setAttribute("aria-keyshortcuts",(0,i.v)(e)?e.join(" "):e)}}}class Z{constructor(){this.name="audio"}canPlay(t){return!!(0,a.i)(t)&&(!(0,i.i)(t.src)||"?"===t.type||(0,a.t)(this.target,t.type))}mediaType(){return"audio"}async load(t){return new((await s.e(9151).then(s.bind(s,9151))).AudioProvider)(this.target,t)}}class tt{constructor(){this.name="video"}canPlay(t){return!!(0,a.a)(t)&&(!(0,i.i)(t.src)||"?"===t.type||(0,a.c)(this.target,t.type))}mediaType(){return"video"}async load(t){return new((await s.e(8734).then(s.bind(s,8734))).VideoProvider)(this.target,t)}}class et extends tt{constructor(){super(...arguments),this.name="dash"}static{this.supported=(0,a.u)()}canPlay(t){return et.supported&&(0,a.q)(t)}async load(t){return new((await Promise.all([s.e(8734),s.e(5777)]).then(s.bind(s,5777))).DASHProvider)(this.target,t)}}class st extends tt{constructor(){super(...arguments),this.name="hls"}static{this.supported=(0,a.s)()}canPlay(t){return st.supported&&(0,a.p)(t)}async load(t){return new((await Promise.all([s.e(8734),s.e(7032)]).then(s.bind(s,7032))).HLSProvider)(this.target,t)}}class it{constructor(){this.name="vimeo"}preconnect(){const t=["https://i.vimeocdn.com","https://f.vimeocdn.com","https://fresnel.vimeocdn.com"];for(const e of t)(0,b.p)(e)}canPlay(t){return(0,i.i)(t.src)&&"video/vimeo"===t.type}mediaType(){return"video"}async load(t){return new((await s.e(2993).then(s.bind(s,2993))).VimeoProvider)(this.target,t)}async loadPoster(t,e,n){const{resolveVimeoVideoId:a,getVimeoVideoInfo:r}=await s.e(5874).then(s.bind(s,5874));if(!(0,i.i)(t.src))return null;const{videoId:o}=a(t.src);return o?r(o,n).then((t=>t?t.poster:null)):null}}class nt{constructor(){this.name="youtube"}preconnect(){const t=["https://www.google.com","https://i.ytimg.com","https://googleads.g.doubleclick.net","https://static.doubleclick.net"];for(const e of t)(0,b.p)(e)}canPlay(t){return(0,i.i)(t.src)&&"video/youtube"===t.type}mediaType(){return"video"}async load(t){return new((await s.e(1120).then(s.bind(s,1120))).YouTubeProvider)(this.target,t)}async loadPoster(t,e,n){const{findYouTubePoster:a,resolveYouTubeVideoId:r}=await s.e(5489).then(s.bind(s,5489)),o=(0,i.i)(t.src)&&r(t.src);return o?a(o,n):null}}const at=Symbol(0),rt=["autoPlay","canAirPlay","canFullscreen","canGoogleCast","canLoad","canLoadPoster","canPictureInPicture","canPlay","canSeek","ended","fullscreen","isAirPlayConnected","isGoogleCastConnected","live","liveEdge","loop","mediaType","muted","paused","pictureInPicture","playing","playsInline","remotePlaybackState","remotePlaybackType","seeking","started","streamType","viewType","waiting"],ot={artist:"",artwork:null,autoplay:!1,autoPlay:!1,clipStartTime:0,clipEndTime:0,controls:!1,currentTime:0,crossorigin:null,crossOrigin:null,duration:-1,fullscreenOrientation:"landscape",googleCast:{},load:"visible",posterLoad:"visible",logLevel:"silent",loop:!1,muted:!1,paused:!0,playsinline:!1,playsInline:!1,playbackRate:1,poster:"",preload:"metadata",preferNativeHLS:!1,src:"",title:"",controlsDelay:2e3,hideControlsOnMouseLeave:!1,viewType:"unknown",streamType:"unknown",volume:1,liveEdgeTolerance:10,minLiveDVRWindow:60,keyDisabled:!1,keyTarget:"player",keyShortcuts:{togglePaused:"k Space",toggleMuted:"m",toggleFullscreen:"f",togglePictureInPicture:"i",toggleCaptions:"c",seekBackward:"j J ArrowLeft",seekForward:"l L ArrowRight",volumeUp:"ArrowUp",volumeDown:"ArrowDown",speedUp:">",slowDown:"<"},storage:null};class ht extends O{constructor(t,e){super(),this.vb=t,this.Ca=e}async onAttach(t){const e=this.$props[this.vb]();if("eager"===e)requestAnimationFrame(this.Ca);else if("idle"===e)(0,i.a4)(this.Ca);else if("visible"===e){let e,s=new IntersectionObserver((t=>{this.scope&&t[0].isIntersecting&&(e?.(),e=void 0,this.Ca())}));s.observe(t),e=(0,i.q)((()=>s.disconnect()))}}}class ct{constructor(t,e){this.X=t,this.a=e,this.c=(t,...e)=>{this.X(new i.D(t,{detail:e?.[0],trigger:e?.[1]}))}}async jc(t,e){return(0,i.R)((async()=>{this.a;const{autoPlay:s,canPlay:n,started:a,duration:r,seekable:o,buffered:h,remotePlaybackInfo:c,playsInline:l,savedState:u,source:d}=this.a.$state;if(n())return;const p={duration:t?.duration??r(),seekable:t?.seekable??o(),buffered:t?.buffered??h(),provider:this.a.$provider()};this.c("can-play",p,e),(0,i.V)();let g=this.a.$provider(),{storage:f,qualities:m}=this.a,{muted:b,volume:y,clipStartTime:$,playbackRate:v}=this.a.$props;await(f?.onLoad?.(d()));const w=u()?.currentTime,k=u()?.paused,T=await(f?.getTime()),x=w??T??$(),P=k||!1!==k&&!a()&&s();if(g){g.setVolume(await(f?.getVolume())??y()),g.setMuted(await(f?.getMuted())??b());const t=await(f?.getAudioGain())??1;t>1&&g.audioGain?.setGain?.(t),g.setPlaybackRate?.(await(f?.getPlaybackRate())??v()),g.setPlaysInline?.(l()),x>0&&g.setCurrentTime(x)}const S=await(f?.getVideoQuality());if(S&&m.length){let t=null,e=1/0;for(const s of m){const i=Math.abs(S.width-s.width)+Math.abs(S.height-s.height)+(S.bitrate?Math.abs(S.bitrate-(s.bitrate??0)):0);i<e&&(t=s,e=i)}t&&(t.selected=!0)}n()&&P?await this.oh(e):T&&T>0&&this.c("started",void 0,e),c.set(null)}))}async oh(t){const{player:e,$state:{autoPlaying:s,muted:n}}=this.a;s.set(!0);const a=new i.D("auto-play-attempt",{trigger:t});try{await e.play(a)}catch(t){}}}class lt{constructor(){this.e=new Map}k(t,e){this.e.set(t,e)}td(t){const e=this.kl(t);return this.e.delete(t),e}kl(t){return this.e.get(t)}qc(t){this.e.delete(t)}pl(){this.e.clear()}}class ut{constructor(){this.Mb=!1,this.Ed=(0,i.n)(),this.e=new Map}get ph(){return this.e.size}get Rj(){return this.Mb}async Sj(){this.Mb||await this.Ed.promise}k(t,e){this.Mb?e():(this.e.delete(t),this.e.set(t,e))}td(t){this.e.get(t)?.(),this.e.delete(t)}Bb(){this.jf(),this.Mb=!0,this.e.size>0&&this.jf()}ra(){this.Mb=!1}H(){this.ra(),this.e.clear(),this.kf()}jf(){for(const t of this.e.keys())this.td(t);this.kf()}kf(){this.Ed.resolve(),this.Ed=(0,i.n)()}}class dt extends O{constructor(t,e,s){super(),this.ga=t,this.f=e,this.a=s,this.vk=new ut,this.vd=!1,this.uk=s.$provider,this.Ib=new M,this.rc=new C,this.ta=new q}onAttach(){this.listen("fullscreen-change",this.Oc.bind(this))}onConnect(){const t=Object.getOwnPropertyNames(Object.getPrototypeOf(this)),e=this.qh.bind(this);for(const s of t)s.startsWith("media-")&&this.listen(s,e);this.Mk(),(0,i.g)(this.wk.bind(this)),(0,i.g)(this.Gn.bind(this)),(0,i.g)(this.Ln.bind(this)),(0,i.g)(this.Hn.bind(this)),(0,i.g)(this.In.bind(this)),(0,i.g)(this.Jn.bind(this)),(0,i.g)(this.Kn.bind(this))}onDestroy(){this.vk.H()}Mk(){const{load:t}=this.$props,{canLoad:e}=this.$state;if("play"!==t()||e())return;const s=this.listen("media-play-request",(t=>{this.Lk(t),s()}))}wk(){const t=this.uk(),e=this.$state.canPlay();return t&&e&&this.vk.Bb(),()=>{this.vk.ra()}}qh(t){t.stopPropagation(),t.defaultPrevented||this[t.type]&&((0,i.p)(this.uk)?this[t.type](t):this.vk.k(t.type,(()=>{(0,i.p)(this.uk)&&this[t.type](t)})))}async sc(t){const{canPlay:e,paused:s,autoPlaying:n}=this.$state;if(!this.Lk(t)&&(0,i.p)(s)){t&&this.f.e.k("media-play-request",t);try{const t=(0,i.p)(this.uk);return pt(t,(0,i.p)(e)),await t.play()}catch(e){const s=this.createEvent("play-fail",{detail:(0,m.c)(e),trigger:t});throw s.autoPlay=n(),this.ga.X(s),e}}}Lk(t){const{load:e}=this.$props,{canLoad:s}=this.$state;if("play"===e()&&!s()){const e=this.createEvent("media-start-loading",{trigger:t});return this.dispatchEvent(e),this.vk.k("media-play-request",(async()=>{try{await this.sc(e)}catch(t){}})),!0}return!1}async ud(t){const{canPlay:e,paused:s}=this.$state;if(!(0,i.p)(s)){t&&this.f.e.k("media-pause-request",t);try{const t=(0,i.p)(this.uk);return pt(t,(0,i.p)(e)),await t.pause()}catch(t){throw this.f.e.qc("media-pause-request"),t}}}gp(t,e){const{audioGain:s,canSetAudioGain:i}=this.$state;if(s()===t)return;const n=this.uk();if(!n?.audioGain||!i())throw Error("[vidstack] audio gain api not available");e&&this.f.e.k("media-audio-gain-change-request",e),n.audioGain.setGain(t)}Ze(t){const{canPlay:e,live:s,liveEdge:n,canSeek:a,liveSyncPosition:r,seekableEnd:o,userBehindLiveEdge:h}=this.$state;if(h.set(!1),(0,i.p)((()=>!s()||n()||!a())))return;const c=(0,i.p)(this.uk);pt(c,(0,i.p)(e)),t&&this.f.e.k("media-seek-request",t);const l=o()-2;c.setCurrentTime(Math.min(l,r()??l))}async _e(t="prefer-media",e){const s=this.$e(t);if(gt(0,s),!s.active)return(0,i.p)(this.$state.pictureInPicture)&&(this.vd=!0,await this.wd(e)),e&&this.f.e.k("media-enter-fullscreen-request",e),s.enter()}async af(t="prefer-media",e){const s=this.$e(t);if(gt(0,s),s.active){e&&this.f.e.k("media-exit-fullscreen-request",e);try{const t=await s.exit();return this.vd&&(0,i.p)(this.$state.canPictureInPicture)&&await this.xd(),t}finally{this.vd=!1}}}$e(t){const e=(0,i.p)(this.uk);return"prefer-media"===t&&this.rc.supported||"media"===t?this.rc:e?.fullscreen}async xd(t){if(this.bf(),!this.$state.pictureInPicture())return t&&this.f.e.k("media-enter-pip-request",t),await this.uk().pictureInPicture.enter()}async wd(t){if(this.bf(),this.$state.pictureInPicture())return t&&this.f.e.k("media-exit-pip-request",t),await this.uk().pictureInPicture.exit()}bf(){if(!this.$state.canPictureInPicture())throw Error("[vidstack] no pip support")}Gn(){this.Ib.defaultDelay=this.$props.controlsDelay()}Ln(){const{canSetAudioGain:t}=this.$state,e=!!this.uk()?.audioGain?.supported;t.set(e)}Hn(){const{canAirPlay:t}=this.$state,e=!!this.uk()?.airPlay?.supported;t.set(e)}In(){const{canGoogleCast:t,source:e}=this.$state,s=a.I&&!a.b&&(0,a.d)(e());t.set(s)}Jn(){const{canFullscreen:t}=this.$state,e=this.rc.supported||!!this.uk()?.fullscreen?.supported;t.set(e)}Kn(){const{canPictureInPicture:t}=this.$state,e=!!this.uk()?.pictureInPicture?.supported;t.set(e)}async"media-airplay-request"(t){try{await this.ol(t)}catch(t){}}async ol(t){try{const e=this.uk()?.airPlay;if(!e?.supported)throw Error("No AirPlay adapter.");return t&&this.f.e.k("media-airplay-request",t),await e.prompt()}catch(t){throw this.f.e.qc("media-airplay-request"),t}}async"media-google-cast-request"(t){try{await this.ul(t)}catch(t){}}async ul(t){try{const{canGoogleCast:e}=this.$state;if(!(0,i.p)(e)){const t=Error("Cast not available.");throw t.code="CAST_NOT_AVAILABLE",t}if((0,b.p)("https://www.gstatic.com"),!this.om){const t=await s.e(3811).then(s.bind(s,3811));this.om=new t.GoogleCastLoader}await this.om.prompt(this.a),t&&this.f.e.k("media-google-cast-request",t);const n="disconnected"!==(0,i.p)(this.$state.remotePlaybackState);n&&this.$state.savedState.set({paused:(0,i.p)(this.$state.paused),currentTime:(0,i.p)(this.$state.currentTime)}),this.$state.remotePlaybackLoader.set(n?this.om:null)}catch(t){throw this.f.e.qc("media-google-cast-request"),t}}"media-audio-track-change-request"(t){const{logger:e,audioTracks:s}=this.a;if(s.readonly)return;const i=s[t.detail];if(i){const e=t.type;this.f.e.k(e,t),i.selected=!0}}async"media-enter-fullscreen-request"(t){try{await this._e(t.detail,t)}catch(e){this._b(e,t)}}async"media-exit-fullscreen-request"(t){try{await this.af(t.detail,t)}catch(e){this._b(e,t)}}async Oc(t){const e=(0,i.p)(this.$props.fullscreenOrientation),s=t.detail;if(!(0,i.h)(e)&&"none"!==e&&this.ta.supported)if(s){if(this.ta.locked)return;this.dispatch("media-orientation-lock-request",{detail:e,trigger:t})}else this.ta.locked&&this.dispatch("media-orientation-unlock-request",{trigger:t})}_b(t,e){this.ga.X(this.createEvent("fullscreen-error",{detail:(0,m.c)(t)}))}async"media-orientation-lock-request"(t){const e=t.type;try{this.f.e.k(e,t),await this.ta.lock(t.detail)}catch(t){this.f.e.qc(e)}}async"media-orientation-unlock-request"(t){const e=t.type;try{this.f.e.k(e,t),await this.ta.unlock()}catch(t){this.f.e.qc(e)}}async"media-enter-pip-request"(t){try{await this.xd(t)}catch(e){this.cf(e,t)}}async"media-exit-pip-request"(t){try{await this.wd(t)}catch(e){this.cf(e,t)}}cf(t,e){this.ga.X(this.createEvent("picture-in-picture-error",{detail:(0,m.c)(t)}))}"media-live-edge-request"(t){const{live:e,liveEdge:s,canSeek:i}=this.$state;if(e()&&!s()&&i()){this.f.e.k("media-seek-request",t);try{this.Ze()}catch(t){this.f.e.qc("media-seek-request")}}}async"media-loop-request"(t){try{this.f.Ha=!0,this.f.gb=!0,await this.sc(t)}catch(t){this.f.Ha=!1}}"media-user-loop-change-request"(t){this.$state.userPrefersLoop.set(t.detail)}async"media-pause-request"(t){if(!this.$state.paused())try{await this.ud(t)}catch(t){}}async"media-play-request"(t){if(this.$state.paused())try{await this.sc(t)}catch(t){}}"media-rate-change-request"(t){const{playbackRate:e,canSetPlaybackRate:s}=this.$state;if(e()===t.detail||!s())return;const i=this.uk();i?.setPlaybackRate&&(this.f.e.k("media-rate-change-request",t),i.setPlaybackRate(t.detail))}"media-audio-gain-change-request"(t){try{this.gp(t.detail,t)}catch(t){}}"media-quality-change-request"(t){const{qualities:e,storage:s,logger:i}=this.a;if(e.readonly)return;this.f.e.k("media-quality-change-request",t);const n=t.detail;if(n<0)e.autoSelect(t),t.isOriginTrusted&&s?.setVideoQuality?.(null);else{const i=e[n];i&&(i.selected=!0,t.isOriginTrusted&&s?.setVideoQuality?.({id:i.id,width:i.width,height:i.height,bitrate:i.bitrate}))}}"media-pause-controls-request"(t){const e=t.type;this.f.e.k(e,t),this.Ib.pause(t)}"media-resume-controls-request"(t){const e=t.type;this.f.e.k(e,t),this.Ib.resume(t)}"media-seek-request"(t){const{seekableStart:e,seekableEnd:s,ended:i,canSeek:n,live:a,userBehindLiveEdge:r,clipStartTime:o}=this.$state,h=t.detail;i()&&(this.f.gb=!0);const c=t.type;this.f.qa=!1,this.f.e.qc(c);const l=h+o(),u=Math.floor(l)===Math.floor(s())?s():Math.min(Math.max(e()+.1,l),s()-.1);Number.isFinite(u)&&n()&&(this.f.e.k(c,t),this.uk().setCurrentTime(u),a()&&t.isOriginTrusted&&Math.abs(s()-u)>=2&&r.set(!0))}"media-seeking-request"(t){const e=t.type;this.f.e.k(e,t),this.$state.seeking.set(!0),this.f.qa=!0}"media-start-loading"(t){if(this.$state.canLoad())return;const e=t.type;this.f.e.k(e,t),this.ga.X(this.createEvent("can-load"))}"media-poster-start-loading"(t){if(this.$state.canLoadPoster())return;const e=t.type;this.f.e.k(e,t),this.ga.X(this.createEvent("can-load-poster"))}"media-text-track-change-request"(t){const{index:e,mode:s}=t.detail,i=this.a.textTracks[e];if(i){const e=t.type;this.f.e.k(e,t),i.setMode(s,t)}}"media-mute-request"(t){if(this.$state.muted())return;const e=t.type;this.f.e.k(e,t),this.uk().setMuted(!0)}"media-unmute-request"(t){const{muted:e,volume:s}=this.$state;if(!e())return;const i=t.type;this.f.e.k(i,t),this.a.$provider().setMuted(!1),0===s()&&(this.f.e.k(i,t),this.uk().setVolume(.25))}"media-volume-change-request"(t){const{muted:e,volume:s}=this.$state,i=t.detail;if(s()===i)return;const n=t.type;this.f.e.k(n,t),this.uk().setVolume(i),i>0&&e()&&(this.f.e.k(n,t),this.uk().setMuted(!1))}ql(t,e,s){}}function pt(t,e){if(!t||!e)throw Error("[vidstack] media not ready")}function gt(t,e){if(!e?.supported)throw Error("[vidstack] no fullscreen support")}class ft{constructor(){this.qa=!1,this.Ha=!1,this.gb=!1,this.e=new lt}}const mt=new Set(["auto-play","auto-play-fail","can-load","sources-change","source-change","load-start","abort","error","loaded-metadata","loaded-data","can-play","play","play-fail","pause","playing","seeking","seeked","waiting"]);class bt extends O{constructor(t,e){super(),this.f=t,this.a=e,this.p=new Map,this.Kk=!1,this.tc=!1,this.Jb=!1,this.to=null,this.seeking=D((t=>{const{seeking:e,realCurrentTime:s,paused:i}=this.$state;e.set(!0),s.set(t.detail),this.F("media-seeking-request",t),i()&&(this.hb=t,this.zd())}),150,{leading:!0}),this.zd=V((()=>{if(!this.hb)return;this.tc=!0;const{waiting:t,playing:e}=this.$state;t.set(!0),e.set(!1);const s=this.createEvent("waiting",{trigger:this.hb});this.p.set("waiting",s),this.dispatch(s),this.hb=void 0,this.tc=!1}),300)}onAttach(t){t.setAttribute("aria-busy","true"),this.listen("fullscreen-change",this["fullscreen-change"].bind(this)),this.listen("fullscreen-error",this["fullscreen-error"].bind(this)),this.listen("orientation-change",this["orientation-change"].bind(this))}onConnect(t){(0,i.g)(this.nm.bind(this)),this.uh(),this.vh(),this.wh(),this.xh(),(0,i.q)(this.yh.bind(this))}onDestroy(){const{audioTracks:t,qualities:e,textTracks:s}=this.a;t[n.L.H](),e[n.L.H](),s[n.L.H](),this.so()}X(t){if(!this.scope)return;const e=t.type;(0,i.R)((()=>this[t.type]?.(t))),mt.has(e)&&this.p.set(e,t),this.dispatch(t)}xh(){this.Jb&&(requestAnimationFrame((()=>{this.scope&&this.a.remote.play(new i.D("dom-connect"))})),this.Jb=!1)}yh(){this.Jb||(this.Jb=!this.$state.paused(),this.a.$provider()?.pause())}ib(){this.df(),this.Kk=!1,this.f.gb=!1,this.f.Ha=!1,this.tc=!1,this.hb=void 0,this.p.clear()}F(t,e){const s=this.f.e.td(t);s&&(e.request=s,e.triggers.add(s))}uh(){this.yd(),this.ef();const t=this.a.textTracks;(0,i.l)(t,"add",this.yd.bind(this)),(0,i.l)(t,"remove",this.yd.bind(this)),(0,i.l)(t,"mode-change",this.ef.bind(this))}vh(){const t=this.a.qualities;(0,i.l)(t,"add",this.pc.bind(this)),(0,i.l)(t,"remove",this.pc.bind(this)),(0,i.l)(t,"change",this.fb.bind(this)),(0,i.l)(t,"auto-change",this.zh.bind(this)),(0,i.l)(t,"readonly-change",this.Ah.bind(this))}wh(){const t=this.a.audioTracks;(0,i.l)(t,"add",this.ff.bind(this)),(0,i.l)(t,"remove",this.ff.bind(this)),(0,i.l)(t,"change",this.Bh.bind(this))}yd(t){const{textTracks:e}=this.$state;e.set(this.a.textTracks.toArray()),this.dispatch("text-tracks-change",{detail:e(),trigger:t})}ef(t){t&&this.F("media-text-track-change-request",t);const e=this.a.textTracks.selected,{textTrack:s}=this.$state;s()!==e&&(s.set(e),this.dispatch("text-track-change",{detail:e,trigger:t}))}ff(t){const{audioTracks:e}=this.$state;e.set(this.a.audioTracks.toArray()),this.dispatch("audio-tracks-change",{detail:e(),trigger:t})}Bh(t){const{audioTrack:e}=this.$state;e.set(this.a.audioTracks.selected),t&&this.F("media-audio-track-change-request",t),this.dispatch("audio-track-change",{detail:e(),trigger:t})}pc(t){const{qualities:e}=this.$state;e.set(this.a.qualities.toArray()),this.dispatch("qualities-change",{detail:e(),trigger:t})}fb(t){const{quality:e}=this.$state;e.set(this.a.qualities.selected),t&&this.F("media-quality-change-request",t),this.dispatch("quality-change",{detail:e(),trigger:t})}zh(){const{qualities:t}=this.a,e=t.auto;this.$state.autoQuality.set(e),e||this.so()}uo(){this.so(),this.to=(0,i.g)((()=>{const{qualities:t}=this.a,{mediaWidth:e,mediaHeight:s}=this.$state,a=e(),r=s();if(0===a||0===r)return;let o=null,h=1/0;for(const e of t){const t=Math.abs(e.width-a)+Math.abs(e.height-r);t<h&&(h=t,o=e)}o&&t[n.L.pa](o,!0,new i.D("resize",{detail:{width:a,height:r}}))}))}so(){this.to?.(),this.to=null}Ah(){this.$state.canSetQuality.set(!this.a.qualities.readonly)}nm(){const{canSetVolume:t,isGoogleCastConnected:e}=this.$state;e()?t.set(!1):(0,a.e)().then(t.set)}"provider-change"(t){const e=this.a.$provider(),s=t.detail;e?.type!==s?.type&&(e?.destroy?.(),e?.scope?.dispose(),this.a.$provider.set(t.detail),e&&null===t.detail&&this.gf(t))}"provider-loader-change"(t){}"auto-play"(t){this.$state.autoPlayError.set(null)}"auto-play-fail"(t){this.$state.autoPlayError.set(t.detail),this.ib()}"can-load"(t){this.$state.canLoad.set(!0),this.p.set("can-load",t),this.a.textTracks[o.a.P](),this.F("media-start-loading",t)}"can-load-poster"(t){this.$state.canLoadPoster.set(!0),this.p.set("can-load-poster",t),this.F("media-poster-start-loading",t)}"media-type-change"(t){const e=this.p.get("source-change");e&&t.triggers.add(e);const s=this.$state.viewType();this.$state.mediaType.set(t.detail);const i=this.$state.providedViewType(),n="unknown"===i?t.detail:i;s!==n&&setTimeout((()=>{requestAnimationFrame((()=>{this.scope&&(this.$state.inferredViewType.set(t.detail),this.dispatch("view-type-change",{detail:n,trigger:t}))}))}),0)}"stream-type-change"(t){const e=this.p.get("source-change");e&&t.triggers.add(e);const{streamType:s,inferredStreamType:i}=this.$state;i.set(t.detail),t.detail=s()}"rate-change"(t){const{storage:e}=this.a,{canPlay:s}=this.$state;this.$state.playbackRate.set(t.detail),this.F("media-rate-change-request",t),s()&&e?.setPlaybackRate?.(t.detail)}"remote-playback-change"(t){const{remotePlaybackState:e,remotePlaybackType:s}=this.$state,{type:i,state:n}=t.detail,a="connected"===n;s.set(i),e.set(n);const r="airplay"===i?"media-airplay-request":"media-google-cast-request";if(a)this.F(r,t);else{const e=this.f.e.kl(r);e&&(t.request=e,t.triggers.add(e))}}"sources-change"(t){const e=this.$state.sources(),s=t.detail;this.$state.sources.set(s),this.vo(e,s,t)}vo(t,e,s){let{qualities:i}=this.a,a=!1,r=!1;for(const a of t)if(j(a)&&!e.some((t=>t.src===a.src))){const t=i.getBySrc(a.src);t&&(i[n.L.Yb](t,s),r=!0)}r&&!i.length&&(this.$state.savedState.set(null),i[n.L.H](s));for(const t of e){if(!j(t)||i.getBySrc(t.src))continue;const e={id:t.id??t.height+"p",bitrate:null,codec:null,...t,selected:!1};i[n.L.oa](e,s),a=!0}a&&!i[f.Q.Za]&&(this.uo(),i[f.Q.Za]=this.uo.bind(this),i[f.Q.Ya](!0,s))}"source-change"(t){t.isQualityChange="quality-change"===t.originEvent?.type;const e=t.detail;this.gf(t,t.isQualityChange),this.p.set(t.type,t),this.$state.source.set(e),this.el?.setAttribute("aria-busy","true")}gf(t,e=!1){const{audioTracks:s,qualities:i}=this.a;if(!e)return s[n.L.H](t),i[n.L.H](t),p(this.$state,e),void this.ib();p(this.$state,e),this.ib()}abort(t){const e=this.p.get("source-change");e&&t.triggers.add(e);const s=this.p.get("can-load");s&&!t.triggers.hasType("can-load")&&t.triggers.add(s)}"load-start"(t){const e=this.p.get("source-change");e&&t.triggers.add(e)}error(t){this.$state.error.set(t.detail);const e=this.p.get("abort");e&&t.triggers.add(e)}"loaded-metadata"(t){const e=this.p.get("load-start");e&&t.triggers.add(e)}"loaded-data"(t){const e=this.p.get("load-start");e&&t.triggers.add(e)}"can-play"(t){const e=this.p.get("loaded-metadata");e&&t.triggers.add(e),this.hf(t.detail),this.el?.setAttribute("aria-busy","false")}"can-play-through"(t){this.hf(t.detail);const e=this.p.get("can-play");e&&t.triggers.add(e)}hf(t){const{seekable:e,buffered:s,intrinsicDuration:i,canPlay:n}=this.$state;n.set(!0),s.set(t.buffered),e.set(t.seekable);const a=(0,r.b)(t.seekable)??1/0;i.set(a)}"duration-change"(t){const{live:e,intrinsicDuration:s,ended:i}=this.$state,n=t.detail;if(!e()){const e=Number.isNaN(n)?0:n;s.set(e),i()&&this.fp(t)}}progress(t){const{buffered:e,bufferedEnd:s,seekable:i,seekableEnd:n,live:a,intrinsicDuration:o}=this.$state,{buffered:h,seekable:c}=t.detail,l=(0,r.b)(h)??1/0,u=h.length!==e().length,d=l>s(),p=(0,r.b)(c)??1/0,g=c.length!==i().length,f=p>n();(u||d)&&e.set(h),(g||f)&&i.set(c),a()&&(o.set(p),this.dispatch("duration-change",{detail:p,trigger:t}))}play(t){const{paused:e,autoPlayError:s,ended:i,autoPlaying:n,playsInline:a,pointer:r,muted:o,viewType:h,live:c,userBehindLiveEdge:l}=this.$state;if(this.Gk(),!e())return void t.stopImmediatePropagation();t.autoPlay=n();const u=this.p.get("waiting");u&&t.triggers.add(u),this.F("media-play-request",t),this.p.set("play",t),e.set(!1),s.set(null),t.autoPlay&&(this.X(this.createEvent("auto-play",{detail:{muted:o()},trigger:t})),n.set(!1)),(i()||this.f.gb)&&(this.f.gb=!1,i.set(!1),this.X(this.createEvent("replay",{trigger:t}))),a()||"video"!==h()||"coarse"!==r()||this.a.remote.enterFullscreen("prefer-media",t),c()&&!l()&&this.a.remote.seekToLiveEdge(t)}Gk(t){if(!(0,i.p)(this.a.$provider))return;const{ended:e,seekableStart:s,clipStartTime:n,clipEndTime:a,realCurrentTime:r,duration:o}=this.$state,h=r()<n()||a()>0&&r()>=a()||Math.abs(r()-o())<.1||e();return h&&this.dispatch("media-seek-request",{detail:(n()>0?0:s())+.1,trigger:t}),h}"play-fail"(t){const{muted:e,autoPlaying:s}=this.$state,i=this.p.get("play");i&&t.triggers.add(i),this.F("media-play-request",t);const{paused:n,playing:a}=this.$state;n.set(!0),a.set(!1),this.ib(),this.p.set("play-fail",t),t.autoPlay&&(this.X(this.createEvent("auto-play-fail",{detail:{muted:e(),error:t.detail},trigger:t})),s.set(!1))}playing(t){const e=this.p.get("play"),s=this.p.get("seeked");e?t.triggers.add(e):s&&t.triggers.add(s),setTimeout((()=>this.ib()),0);const{paused:i,playing:n,live:a,liveSyncPosition:r,seekableEnd:o,started:h,currentTime:c,seeking:l,ended:u}=this.$state;if(i.set(!1),n.set(!0),l.set(!1),u.set(!1),this.f.Ha)this.f.Ha=!1;else{if(a()&&!h()&&0===c()){const t=r()??o()-2;Number.isFinite(t)&&this.a.$provider().setCurrentTime(t)}this.started(t)}}started(t){const{started:e}=this.$state;e()||(e.set(!0),this.X(this.createEvent("started",{trigger:t})))}pause(t){this.el?.isConnected||(this.Jb=!0),this.F("media-pause-request",t);const e=this.p.get("seeked");e&&t.triggers.add(e);const{paused:s,playing:i}=this.$state;s.set(!0),i.set(!1),this.Kk&&setTimeout((()=>{this.X(this.createEvent("end",{trigger:t})),this.Kk=!1}),0),this.ib()}"time-update"(t){if(this.f.Ha)return void t.stopImmediatePropagation();const{realCurrentTime:e,played:s,waiting:i,clipEndTime:n}=this.$state,a=n(),r=t.detail;e.set(r.currentTime),s.set(r.played),i.set(!1);for(const e of this.a.textTracks)e[o.a.Ta](r.currentTime,t);a>0&&r.currentTime>=a&&(this.Kk=!0,this.dispatch("media-pause-request",{trigger:t})),this.Nk()}fp(t){const{duration:e,played:s}=this.$state,i=(0,r.g)(s())??0;this.X(this.createEvent("time-update",{detail:{currentTime:e(),played:new r.T(i,e())},trigger:t}))}Nk(){const{storage:t}=this.a,{canPlay:e,realCurrentTime:s}=this.$state;e()&&t?.setTime?.(s())}"audio-gain-change"(t){const{storage:e}=this.a,{canPlay:s,audioGain:i}=this.$state;i.set(t.detail),this.F("media-audio-gain-change-request",t),s()&&e?.setAudioGain?.(i())}"volume-change"(t){const{storage:e}=this.a,{volume:s,muted:i,canPlay:n}=this.$state,a=t.detail;s.set(a.volume),i.set(a.muted||0===a.volume),this.F("media-volume-change-request",t),this.F(a.muted?"media-mute-request":"media-unmute-request",t),n()&&(e?.setVolume?.(s()),e?.setMuted?.(i()))}seeked(t){const{seeking:e,currentTime:s,realCurrentTime:i,paused:n,seekableEnd:a,ended:r}=this.$state;if(this.f.qa)e.set(!0),t.stopImmediatePropagation();else if(e()){const s=this.p.get("waiting");s&&t.triggers.add(s);const a=this.p.get("seeking");a&&!t.triggers.has(a)&&t.triggers.add(a),n()&&this.df(),e.set(!1),i.set(t.detail),this.F("media-seek-request",t);const r=t?.originEvent;r?.isTrusted&&!/seek/.test(r.type)&&this.started(t)}Math.floor(s())!==Math.floor(a())?r.set(!1):this.end(t)}waiting(t){this.tc||this.f.qa||(t.stopImmediatePropagation(),this.hb=t,this.zd())}end(t){const{loop:e,ended:s}=this.$state;!e()&&s()||(e()?setTimeout((()=>{requestAnimationFrame((()=>{this.dispatch("media-loop-request",{trigger:t})}))}),10):setTimeout((()=>this.Db(t)),0))}Db(t){const{storage:e}=this.a,{paused:s,seeking:i,ended:n,duration:a}=this.$state;this.fp(t),s()||this.dispatch("pause",{trigger:t}),i()&&this.dispatch("seeked",{detail:a(),trigger:t}),n.set(!0),this.ib(),e?.setTime?.(a(),!0),this.dispatch("ended",{trigger:t})}df(){this.zd.cancel(),this.$state.waiting.set(!1)}"fullscreen-change"(t){const e=t.detail;this.$state.fullscreen.set(e),this.F(e?"media-enter-fullscreen-request":"media-exit-fullscreen-request",t)}"fullscreen-error"(t){this.F("media-enter-fullscreen-request",t),this.F("media-exit-fullscreen-request",t)}"orientation-change"(t){const e=t.detail.lock;this.F(e?"media-orientation-lock-request":"media-orientation-unlock-request",t)}"picture-in-picture-change"(t){const e=t.detail;this.$state.pictureInPicture.set(e),this.F(e?"media-enter-pip-request":"media-exit-pip-request",t)}"picture-in-picture-error"(t){this.F("media-enter-pip-request",t),this.F("media-exit-pip-request",t)}"title-change"(t){t.trigger&&(t.stopImmediatePropagation(),this.$state.inferredTitle.set(t.detail))}"poster-change"(t){t.trigger&&(t.stopImmediatePropagation(),this.$state.inferredPoster.set(t.detail))}}class yt extends O{onSetup(){this.Ch(),(0,i.g)(this.Mo.bind(this)),(0,i.g)(this.Fh.bind(this)),(0,i.g)(this.Ek.bind(this)),(0,i.g)(this.Vc.bind(this)),(0,i.g)(this.Hh.bind(this)),(0,i.g)(this.pn.bind(this)),(0,i.g)(this.Jh.bind(this)),(0,i.g)(this.Kh.bind(this)),(0,i.g)(this.Ih.bind(this)),(0,i.g)(this.Gh.bind(this)),(0,i.g)(this.Vm.bind(this)),(0,i.g)(this.ld.bind(this)),(0,i.g)(this.Eh.bind(this)),(0,i.g)(this.uc.bind(this))}Ch(){const t={duration:"providedDuration",loop:"providedLoop",poster:"providedPoster",streamType:"providedStreamType",title:"providedTitle",viewType:"providedViewType"},e=new Set(["currentTime","paused","playbackRate","volume"]);for(const s of Object.keys(this.$props))e.has(s)||this.$state[t[s]??s]?.set(this.$props[s]());this.$state.muted.set(this.$props.muted()||0===this.$props.volume())}Eh(){const{viewType:t,streamType:e,title:s,poster:i,loop:n}=this.$props,a=this.$state;a.providedPoster.set(i()),a.providedStreamType.set(e()),a.providedViewType.set(t()),a.providedTitle.set(s()),a.providedLoop.set(n())}Dh(){}Mo(){const{artist:t,artwork:e}=this.$props;this.$state.artist.set(t()),this.$state.artwork.set(e())}uc(){const{title:t}=this.$state;this.dispatch("title-change",{detail:t()})}Fh(){const t=this.$props.autoPlay()||this.$props.autoplay();this.$state.autoPlay.set(t),this.dispatch("auto-play-change",{detail:t})}Gh(){const t=this.$state.loop();this.dispatch("loop-change",{detail:t})}Vc(){const t=this.$props.controls();this.$state.controls.set(t)}ld(){const{poster:t}=this.$state;this.dispatch("poster-change",{detail:t()})}Hh(){const t=this.$props.crossOrigin()??this.$props.crossorigin(),e=!0===t?"":t;this.$state.crossOrigin.set(e)}pn(){const{providedDuration:t}=this.$state;t.set(this.$props.duration())}Vm(){const t=this.$props.playsInline()||this.$props.playsinline();this.$state.playsInline.set(t),this.dispatch("plays-inline-change",{detail:t})}Ek(){const{clipStartTime:t,clipEndTime:e}=this.$props;this.$state.clipStartTime.set(t()),this.$state.clipEndTime.set(e())}Jh(){this.dispatch("live-change",{detail:this.$state.live()})}Ih(){this.$state.liveEdgeTolerance.set(this.$props.liveEdgeTolerance()),this.$state.minLiveDVRWindow.set(this.$props.minLiveDVRWindow())}Kh(){this.dispatch("live-edge-change",{detail:this.$state.liveEdge()})}}class $t extends O{static{this.Nm=["play","pause","seekforward","seekbackward","seekto"]}constructor(){super()}onConnect(){(0,i.g)(this.Pm.bind(this)),(0,i.g)(this.Qm.bind(this));const t=this.Rm.bind(this);for(const e of $t.Nm)navigator.mediaSession.setActionHandler(e,t);(0,i.q)(this.ya.bind(this))}ya(){for(const t of $t.Nm)navigator.mediaSession.setActionHandler(t,null)}Pm(){const{title:t,artist:e,artwork:s,poster:i}=this.$state;navigator.mediaSession.metadata=new MediaMetadata({title:t(),artist:e(),artwork:s()??[{src:i()}]})}Qm(){const{canPlay:t,paused:e}=this.$state;navigator.mediaSession.playbackState=t()?e()?"paused":"playing":"none"}Rm(t){const e=new i.D("media-session-action",{detail:t});switch(t.action){case"play":this.dispatch("media-play-request",{trigger:e});break;case"pause":this.dispatch("media-pause-request",{trigger:e});break;case"seekto":case"seekforward":case"seekbackward":this.dispatch("media-seek-request",{detail:(0,i.j)(t.seekTime)?t.seekTime:this.$state.currentTime()+(t.seekOffset??10),trigger:e})}}}let vt=(0,i.f)(!1);(0,i.l)(document,"pointerdown",(()=>{vt.set(!1)})),(0,i.l)(document,"keydown",(t=>{t.metaKey||t.altKey||t.ctrlKey||vt.set(!0)}));class wt extends i.a3{constructor(){super(...arguments),this.Kb=(0,i.f)(!1)}onConnect(t){(0,i.g)((()=>{if(!vt())return this.Kb.set(!1),kt(t,!1),this.listen("pointerenter",this.Cd.bind(this)),void this.listen("pointerleave",this.Dd.bind(this));const e=document.activeElement===t;this.Kb.set(e),kt(t,e),this.listen("focus",this.Lb.bind(this)),this.listen("blur",this.Nh.bind(this))}))}focused(){return this.Kb()}Lb(){this.Kb.set(!0),kt(this.el,!0)}Nh(){this.Kb.set(!1),kt(this.el,!1)}Cd(){Tt(this.el,!0)}Dd(){Tt(this.el,!1)}}function kt(t,e){(0,i.s)(t,"data-focus",e),(0,i.s)(t,"data-hocus",e)}function Tt(t,e){(0,i.s)(t,"data-hocus",e),(0,i.s)(t,"data-hover",e)}var xt=Object.defineProperty,Pt=Object.getOwnPropertyDescriptor,St=(t,e,s,i)=>{for(var n,a=i>1?void 0:i?Pt(e,s):e,r=t.length-1;r>=0;r--)(n=t[r])&&(a=(i?n(e,s,a):n(a))||a);return i&&a&&xt(e,s,a),a};const Ct=class t extends i.C{constructor(){super(),this.canPlayQueue=new ut,this.wc=!1,new yt;const t={player:this,qualities:new W,audioTracks:new K,storage:null,$provider:(0,i.f)(null),$providerSetup:(0,i.f)(!1),$props:this.$props,$state:this.$state};t.remote=this.remoteControl=new L(void 0),t.remote.setPlayer(this),t.$iosControls=(0,i.o)(this.Oh.bind(this)),t.textTracks=new N,t.textTracks[o.a.al]=this.$state.crossOrigin,t.textRenderers=new R(t),t.ariaKeys={},this.a=t,(0,i.X)(g.m,t),this.orientation=new q,new wt,new J(t);const e=new ft;this.ga=new bt(e,t),this.Y=new dt(this.ga,e,t),t.delegate=new ct(this.ga.X.bind(this.ga),t),new $t,new ht("load",this.startLoading.bind(this)),new ht("posterLoad",this.startLoadingPoster.bind(this))}static{this.props=ot}static{this.state=l}get i(){return this.a.$provider()}get sn(){return this.$props}onSetup(){this.Ph(),(0,i.g)(this.Qh.bind(this)),(0,i.g)(this.Rh.bind(this)),(0,i.g)(this.Tc.bind(this)),(0,i.g)(this.Fd.bind(this)),(0,i.g)(this.jb.bind(this)),(0,i.g)(this.Vm.bind(this)),(0,i.g)(this.Sh.bind(this))}onAttach(t){t.setAttribute("data-media-player",""),(0,r.s)(t,"tabindex","0"),(0,r.s)(t,"role","region"),(0,i.g)(this.Tm.bind(this)),(0,i.g)(this.uc.bind(this)),(0,i.g)(this.lf.bind(this)),(0,i.l)(t,"find-media-player",this.Th.bind(this))}onConnect(t){a.w&&(0,i.s)(t,"data-iphone","");const e=window.matchMedia("(pointer: coarse)");this.mf(e),e.onchange=this.mf.bind(this);const s=new ResizeObserver((0,i.I)(this.O.bind(this)));s.observe(t),(0,i.g)(this.O.bind(this)),this.dispatch("media-player-connect",{detail:this,bubbles:!0,composed:!0}),(0,i.q)((()=>{s.disconnect(),e.onchange=null}))}onDestroy(){this.a.player=null,this.canPlayQueue.H()}uc(){const t=this.$el,{title:e,live:s,viewType:n,providedTitle:a}=this.$state,r=s(),o=(0,i.a0)(n()),h="Unknown"!==o?`${r?"Live ":""}${o}`:r?"Live":"Media",c=e();(0,i.s)(this.el,"aria-label",`${h} Player`+(c?` - ${c}`:"")),t?.hasAttribute("title")&&(this.wc=!0,t?.removeAttribute("title"))}lf(){const t=this.orientation.landscape?"landscape":"portrait";this.$state.orientation.set(t),(0,i.s)(this.el,"data-orientation",t),this.O()}Qh(){this.$state.canPlay()&&this.i?this.canPlayQueue.Bb():this.canPlayQueue.ra()}Ph(){if(t[at])return void this.setAttributes(t[at]);const e={"data-load":function(){return this.$props.load()},"data-captions":function(){const t=this.$state.textTrack();return!!t&&(0,o.i)(t)},"data-ios-controls":function(){return this.a.$iosControls()},"data-controls":function(){return this.controls.showing},"data-buffering":function(){const{canLoad:t,canPlay:e,waiting:s}=this.$state;return t()&&(!e()||s())},"data-error":function(){const{error:t}=this.$state;return!!t()},"data-autoplay-error":function(){const{autoPlayError:t}=this.$state;return!!t()}},s={autoPlay:"autoplay",canAirPlay:"can-airplay",canPictureInPicture:"can-pip",pictureInPicture:"pip",playsInline:"playsinline",remotePlaybackState:"remote-state",remotePlaybackType:"remote-type",isAirPlayConnected:"airplay",isGoogleCastConnected:"google-cast"};for(const t of rt)e["data-"+(s[t]??(0,i.Q)(t))]=function(){return this.$state[t]()};delete e.title,t[at]=e,this.setAttributes(e)}Th(t){t.detail(this)}O(){if(!this.el)return;const t=this.el.clientWidth,e=this.el.clientHeight;this.$state.width.set(t),this.$state.height.set(e),(0,i.a)(this.el,"--player-width",t+"px"),(0,i.a)(this.el,"--player-height",e+"px")}mf(t){const e=t.matches?"coarse":"fine";(0,i.s)(this.el,"data-pointer",e),this.$state.pointer.set(e),this.O()}Oh(){const{playsInline:t,fullscreen:e}=this.$state;return a.w&&!S&&"video"===this.$state.mediaType()&&(!t()||e())}get provider(){return this.i}get controls(){return this.Y.Ib}set controls(t){this.sn.controls.set(t)}get title(){return(0,i.p)(this.$state.providedTitle)}set title(t){this.wc?this.wc=!1:this.$state.providedTitle.set(t)}get qualities(){return this.a.qualities}get audioTracks(){return this.a.audioTracks}get textTracks(){return this.a.textTracks}get textRenderers(){return this.a.textRenderers}get duration(){return this.$state.duration()}set duration(t){this.sn.duration.set(t)}get paused(){return(0,i.p)(this.$state.paused)}set paused(t){this.nf(t)}Tc(){this.nf(this.$props.paused())}nf(t){t?this.canPlayQueue.k("paused",(()=>this.Y.ud())):this.canPlayQueue.k("paused",(()=>this.Y.sc()))}get muted(){return(0,i.p)(this.$state.muted)}set muted(t){this.sn.muted.set(t)}Rh(){this.Uh(this.$props.muted())}Uh(t){this.canPlayQueue.k("muted",(()=>{this.i&&this.i.setMuted(t)}))}get currentTime(){return(0,i.p)(this.$state.currentTime)}set currentTime(t){this.of(t)}jb(){this.of(this.$props.currentTime())}of(t){this.canPlayQueue.k("currentTime",(()=>{const{currentTime:e,clipStartTime:s,seekableStart:n,seekableEnd:a}=this.$state;t!==(0,i.p)(e)&&(0,i.p)((()=>{if(!this.i)return;const e=t+s(),i=Math.floor(e)===Math.floor(a())?a():Math.min(Math.max(n()+.1,e),a()-.1);Number.isFinite(i)&&this.i.setCurrentTime(i)}))}))}get volume(){return(0,i.p)(this.$state.volume)}set volume(t){this.sn.volume.set(t)}Fd(){this.Vh(this.$props.volume())}Vh(t){const e=(0,y.c)(0,t,1);this.canPlayQueue.k("volume",(()=>{this.i&&this.i.setVolume(e)}))}get playbackRate(){return(0,i.p)(this.$state.playbackRate)}set playbackRate(t){this.pf(t)}Sh(){this.pf(this.$props.playbackRate())}pf(t){this.canPlayQueue.k("rate",(()=>{this.i&&this.i.setPlaybackRate?.(t)}))}Vm(){this.Wm(this.$props.playsInline())}Wm(t){this.canPlayQueue.k("playsinline",(()=>{this.i&&this.i.setPlaysInline?.(t)}))}Tm(){let t=this.$props.storage(),e=(0,i.i)(t)?new I:t;if(e?.onChange){const{source:s}=this.$state,n=(0,i.i)(t)?t:this.el?.id,a=(0,i.o)(this.Um.bind(this));(0,i.g)((()=>e.onChange(s(),a(),n||void 0)))}this.a.storage=e,this.a.textTracks.setStorage(e),(0,i.q)((()=>{e?.onDestroy?.(),this.a.storage=null,this.a.textTracks.setStorage(null)}))}Um(){const{clipStartTime:t,clipEndTime:e}=this.$props,{source:s}=this.$state,i=s();return i.src?`${i.src}:${t()}:${e()}`:null}async play(t){return this.Y.sc(t)}async pause(t){return this.Y.ud(t)}async enterFullscreen(t,e){return this.Y._e(t,e)}async exitFullscreen(t,e){return this.Y.af(t,e)}enterPictureInPicture(t){return this.Y.xd(t)}exitPictureInPicture(t){return this.Y.wd(t)}seekToLiveEdge(t){this.Y.Ze(t)}startLoading(t){this.a.delegate.c("can-load",void 0,t)}startLoadingPoster(t){this.a.delegate.c("can-load-poster",void 0,t)}requestAirPlay(t){return this.Y.ol(t)}requestGoogleCast(t){return this.Y.ul(t)}setAudioGain(t,e){return this.Y.gp(t,e)}destroy(){this.a.remote.setPlayer(null),this.dispatch("destroy")}};St([i.$],Ct.prototype,"canPlayQueue",2),St([i.$],Ct.prototype,"remoteControl",2),St([i.$],Ct.prototype,"provider",1),St([i.$],Ct.prototype,"controls",1),St([i.$],Ct.prototype,"orientation",2),St([i.$],Ct.prototype,"title",1),St([i.$],Ct.prototype,"qualities",1),St([i.$],Ct.prototype,"audioTracks",1),St([i.$],Ct.prototype,"textTracks",1),St([i.$],Ct.prototype,"textRenderers",1),St([i.$],Ct.prototype,"duration",1),St([i.$],Ct.prototype,"paused",1),St([i.$],Ct.prototype,"muted",1),St([i.$],Ct.prototype,"currentTime",1),St([i.$],Ct.prototype,"volume",1),St([i.$],Ct.prototype,"playbackRate",1),St([i.a5],Ct.prototype,"play",1),St([i.a5],Ct.prototype,"pause",1),St([i.a5],Ct.prototype,"enterFullscreen",1),St([i.a5],Ct.prototype,"exitFullscreen",1),St([i.a5],Ct.prototype,"enterPictureInPicture",1),St([i.a5],Ct.prototype,"exitPictureInPicture",1),St([i.a5],Ct.prototype,"seekToLiveEdge",1),St([i.a5],Ct.prototype,"startLoading",1),St([i.a5],Ct.prototype,"startLoadingPoster",1),St([i.a5],Ct.prototype,"requestAirPlay",1),St([i.a5],Ct.prototype,"requestGoogleCast",1),St([i.a5],Ct.prototype,"setAudioGain",1);let At=Ct;function Et(t,e){return fetch(t,e).then((t=>t.text())).then((s=>{const i=function(t){const e=t.match(/#EXT-X-STREAM-INF:[^\n]+(\n[^\n]+)*/g);return e?e[0].split("\n")[1].trim():null}(s);if(i)return Et(/^https?:/.test(i)?i:new URL(i,t).href,e);const n=/EXT-X-PLAYLIST-TYPE:\s*VOD/.test(s)?"on-demand":"live";return"live"===n&&function(t){const e=t.split("\n");for(const t of e)if(t.startsWith("#EXT-X-TARGETDURATION")){const e=parseFloat(t.split(":")[1]);if(!isNaN(e))return e}return-1}(s)>=10&&(/#EXT-X-DVR-ENABLED:\s*true/.test(s)||s.includes("#EXT-X-DISCONTINUITY"))?"live:dvr":n}))}const qt=new Map;class jt{constructor(t,e,s,n=[]){this.xc=t,this.a=e,this.ha=s,this.Gd=!1;const a=new et,r=new st,o=new tt,h=new Z,c=[new nt,new it];this.Hd=(0,i.o)((()=>{const t=e.$state.remotePlaybackLoader(),s=e.$props.preferNativeHLS()?[o,h,a,r,...c,...n]:[r,o,h,a,...c,...n];return t?[t,...s]:s}));const{$state:l}=e;l.sources.set(Lt(e.$props.src()));for(const t of l.sources()){const e=this.Hd().find((e=>e.canPlay(t)));if(!e)continue;const s=e.mediaType(t);this.a.$state.source.set(t),this.a.$state.mediaType.set(s),this.a.$state.inferredViewType.set(s),this.ha.set(e),this.Gd=!0}}get c(){return this.a.delegate.c}connect(){const t=this.ha();this.Gd&&(this.qf(this.a.$state.source(),t),this.rf(t),this.Gd=!1),(0,i.g)(this.Xh.bind(this)),(0,i.g)(this.Yh.bind(this)),(0,i.g)(this.Zh.bind(this)),(0,i.g)(this._h.bind(this)),(0,i.g)(this.Ok.bind(this))}Xh(){this.c("sources-change",[...Lt(this.a.$props.src()),...this.xc()])}Yh(){const{$state:t}=this.a,e=t.sources(),s=(0,i.p)(t.source),n=this.sf(s,e);if(e[0]?.src&&!n.src&&!n.type){const{crossOrigin:s}=t,n=(0,b.b)(s()),a=new AbortController;return Promise.all(e.map((t=>(0,i.i)(t.src)&&"?"===t.type?fetch(t.src,{method:"HEAD",credentials:n,signal:a.signal}).then((e=>(t.type=e.headers.get("content-type")||"??",qt.set(t.src,t.type),t))).catch((()=>t)):t))).then((e=>{a.signal.aborted||(this.sf((0,i.p)(t.source),e),(0,i.V)())})),()=>a.abort()}(0,i.V)()}sf(t,e){let s={src:"",type:""},n=null,a=new i.D("sources-change",{detail:{sources:e}}),r=this.Hd(),{started:o,paused:h,currentTime:c,quality:l,savedState:u}=this.a.$state;for(const t of e){const e=r.find((e=>e.canPlay(t)));if(e){s=t,n=e;break}}if(j(s)){const t=l(),n=e.find((e=>e.src===t?.src));(0,i.p)(o)?u.set({paused:(0,i.p)(h),currentTime:(0,i.p)(c)}):u.set(null),n&&(s=n,a=new i.D("quality-change",{detail:{quality:t}}))}return Mt(t,s)||this.qf(s,n,a),n!==(0,i.p)(this.ha)&&this.rf(n,a),s}qf(t,e,s){this.c("source-change",t,s),this.c("media-type-change",e?.mediaType(t)||"unknown",s)}rf(t,e){this.a.$providerSetup.set(!1),this.c("provider-change",null,e),t&&(0,i.p)((()=>t.preconnect?.(this.a))),this.ha.set(t),this.c("provider-loader-change",t,e)}Zh(){const t=this.a.$provider();if(t&&!(0,i.p)(this.a.$providerSetup))return this.a.$state.canLoad()?((0,i.e)((()=>t.setup()),t.scope),void this.a.$providerSetup.set(!0)):void(0,i.p)((()=>t.preconnect?.()))}_h(){if(!this.a.$providerSetup())return;const t=this.a.$provider(),e=this.a.$state.source(),s=(0,i.p)(this.a.$state.crossOrigin),n=(0,i.p)(this.a.$props.preferNativeHLS);if(!Mt(t?.currentSrc,e)){if(this.a.$state.canLoad()){const h=new AbortController;return(0,a.p)(e)?!n&&(0,a.s)()||Et(e.src,{credentials:(0,b.b)(s),signal:h.signal}).then((t=>{this.c("stream-type-change",t)})).catch(i.a1):(0,a.q)(e)?(r=e.src,o={credentials:(0,b.b)(s),signal:h.signal},fetch(r,o).then((t=>t.text())).then((t=>/type="static"/.test(t)?"on-demand":"live"))).then((t=>{this.c("stream-type-change",t)})).catch(i.a1):this.c("stream-type-change","on-demand"),(0,i.p)((()=>{const s=(0,i.p)(this.a.$state.preload);return t?.loadSource(e,s).catch((t=>{}))})),()=>h.abort()}var r,o;try{(0,i.i)(e.src)&&(0,b.p)(new URL(e.src).origin)}catch(t){}}}Ok(){const t=this.ha(),{providedPoster:e,source:s,canLoadPoster:n}=this.a.$state;if(!t||!t.loadPoster||!s()||!n()||e())return;const a=new AbortController,r=new i.D("source-change",{detail:s});return t.loadPoster(s(),this.a,a).then((t=>{this.c("poster-change",t||"",r)})).catch((()=>{this.c("poster-change","",r)})),()=>{a.abort()}}}function Lt(t){return((0,i.v)(t)?t:[t]).map((t=>(0,i.i)(t)?{src:t,type:Ot(t)}:{...t,type:Ot(t.src,t.type)})).sort((t=>"?"===t.type?1:-1))}function Ot(t,e){return(0,i.i)(e)&&e.length?e:(0,i.i)(t)&&qt.has(t)?qt.get(t):!(0,i.i)(t)||t.startsWith("blob:")?"video/object":t.includes("youtube")||t.includes("youtu.be")?"video/youtube":!t.includes("vimeo")||t.includes("progressive_redirect")||t.includes(".m3u8")?"?":"video/vimeo"}function Mt(t,e){return t?.src===e?.src&&t?.type===e?.type}class Dt{constructor(t,e){this.yc=t,this.a=e,this.tf=[],(0,i.g)(this.$h.bind(this))}$h(){const t=this.yc();for(const e of this.tf)if(!t.some((t=>t.id===e.id))){const t=e.id&&this.a.textTracks.getById(e.id);t&&this.a.textTracks.remove(t)}for(const e of t){const t=e.id||o.T.createId(e);this.a.textTracks.getById(t)||(e.id=t,this.a.textTracks.add(e))}this.tf=t}}var It=Object.defineProperty,Ft=Object.getOwnPropertyDescriptor;class Rt extends i.C{constructor(){super(...arguments),this.xc=(0,i.f)([]),this.yc=(0,i.f)([]),this.ha=null,this.Id=-1}static{this.props={loaders:[]}}static{this.state=new i.U({loader:null})}onSetup(){this.a=(0,g.u)(),this.uf=new jt(this.xc,this.a,this.$state.loader,this.$props.loaders())}onAttach(t){t.setAttribute("data-media-provider","")}onConnect(t){this.uf.connect(),new Dt(this.yc,this.a);const e=new ResizeObserver((0,i.I)(this.O.bind(this)));e.observe(t);const s=new MutationObserver(this.vf.bind(this));s.observe(t,{attributes:!0,childList:!0}),this.O(),this.vf(),(0,i.q)((()=>{e.disconnect(),s.disconnect()}))}load(t){window.cancelAnimationFrame(this.Id),this.Id=requestAnimationFrame((()=>this.ai(t))),(0,i.q)((()=>{window.cancelAnimationFrame(this.Id)}))}ai(t){if(!this.scope)return;const e=this.$state.loader(),{$provider:s}=this.a;this.ha===e&&e?.target===t&&(0,i.p)(s)||(this.wf(),this.ha=e,e&&(e.target=t||null),e&&t&&e.load(this.a).then((t=>{this.scope&&(0,i.p)(this.$state.loader)===e&&this.a.delegate.c("provider-change",t)})))}onDestroy(){this.ha=null,this.wf()}wf(){this.a.delegate.c("provider-change",null)}O(){if(!this.el)return;const{player:t,$state:e}=this.a,s=this.el.offsetWidth,n=this.el.offsetHeight;t&&(e.mediaWidth.set(s),e.mediaHeight.set(n),t.el&&((0,i.a)(t.el,"--media-width",s+"px"),(0,i.a)(t.el,"--media-height",n+"px")))}vf(){const t=[],e=[],s=this.el.children;for(const n of s)if(!n.hasAttribute("data-vds"))if(n instanceof HTMLSourceElement){const e={id:n.id,src:n.src,type:n.type};for(const t of["id","src","width","height","bitrate","codec"]){const s=n.getAttribute(`data-${t}`);(0,i.i)(s)&&(e[t]=/id|src|codec/.test(t)?s:Number(s))}t.push(e)}else if(n instanceof HTMLTrackElement){const t={src:n.src,kind:n.track.kind,language:n.srclang,label:n.label,default:n.default,type:n.getAttribute("data-type")};e.push({id:n.id||o.T.createId(t),...t})}this.xc.set(t),this.yc.set(e),(0,i.V)()}}function Vt(t,e){const s=String(t),i=s.length;return i<e?`${"0".repeat(e-i)}${t}`:s}function Nt(t){return{hours:Math.trunc(t/3600),minutes:Math.trunc(t%3600/60),seconds:Math.trunc(t%60),fraction:Number((t-Math.trunc(t)).toPrecision(3))}}function Ht(t,{padHrs:e=null,padMins:s=null,showHrs:n=!1,showMs:a=!1}={}){const{hours:r,minutes:o,seconds:h,fraction:c}=Nt(t),l=e?Vt(r,2):r,u=`${s||(0,i.m)(s)&&t>=3600?Vt(o,2):o}:${Vt(h,2)}${a&&c>0?`.${String(c).replace(/^0?\./,"")}`:""}`;return r>0||n?`${l}:${u}`:u}function Qt(t){const e=[],{hours:s,minutes:i,seconds:n}=Nt(t);return s>0&&e.push(`${s} hour`),i>0&&e.push(`${i} min`),(n>0||0===e.length)&&e.push(`${n} sec`),e.join(" ")}((t,e,s,i)=>{for(var n,a=Ft(e,s),r=t.length-1;r>=0;r--)(n=t[r])&&(a=n(e,s,a)||a);a&&It(e,s,a)})([i.a5],Rt.prototype,"load");class Kt extends i.C{constructor(){super(...arguments),this._n=!1,this.Zn=-1,this.ao=-1}static{this.props={translations:null}}static{this.state=new i.U({label:null,busy:!1})}onSetup(){this.a=(0,g.u)()}onAttach(t){t.style.display="contents"}onConnect(t){t.setAttribute("data-media-announcer",""),(0,r.s)(t,"role","status"),(0,r.s)(t,"aria-live","polite");const{busy:e}=this.$state;this.setAttributes({"aria-busy":()=>e()?"true":null}),this._n=!0,(0,i.g)(this.Tc.bind(this)),(0,i.g)(this.Fd.bind(this)),(0,i.g)(this.bo.bind(this)),(0,i.g)(this.co.bind(this)),(0,i.g)(this.eo.bind(this)),(0,i.g)(this.fo.bind(this)),(0,i.g)(this.go.bind(this)),(0,i.V)(),this._n=!1}Tc(){const{paused:t}=this.a.$state;this.Yn(t()?"Pause":"Play")}co(){const{fullscreen:t}=this.a.$state;this.Yn(t()?"Enter Fullscreen":"Exit Fullscreen")}eo(){const{pictureInPicture:t}=this.a.$state;this.Yn(t()?"Enter PiP":"Exit PiP")}bo(){const{textTrack:t}=this.a.$state;this.Yn(t()?"Closed-Captions On":"Closed-Captions Off")}Fd(){const{muted:t,volume:e,audioGain:s}=this.a.$state;this.Yn(t()||0===e()?"Mute":`${Math.round(e()*(s()??1)*100)}% ${this.$n("Volume")}`)}fo(){const{seeking:t,currentTime:e}=this.a.$state,s=t();this.Zn>0?(window.clearTimeout(this.ao),this.ao=window.setTimeout((()=>{const t=(0,i.p)(e),s=Math.abs(t-this.Zn);if(s>=1){const e=t>=this.Zn,i=Qt(s);this.Yn(`${this.$n(e?"Seek Forward":"Seek Backward")} ${i}`)}this.Zn=-1,this.ao=-1}),300)):s&&(this.Zn=(0,i.p)(e))}$n(t){const{translations:e}=this.$props;return e?.()?.[t||""]??t}go(){const{label:t,busy:e}=this.$state,s=this.$n(t());if(this._n)return;e.set(!0);const n=window.setTimeout((()=>{e.set(!1)}),150);return this.el&&(0,i.s)(this.el,"aria-label",s),(0,i.i)(s)&&this.dispatch("change",{detail:s}),()=>window.clearTimeout(n)}Yn(t){const{label:e}=this.$state;e.set(t)}}class Wt extends i.C{static{this.props={hideDelay:2e3,hideOnMouseLeave:!1}}onSetup(){this.a=(0,g.u)(),(0,i.g)(this.bi.bind(this))}onAttach(t){const{pictureInPicture:e,fullscreen:s}=this.a.$state;(0,i.a)(t,"pointer-events","none"),(0,r.s)(t,"role","group"),this.setAttributes({"data-visible":this.xf.bind(this),"data-fullscreen":s,"data-pip":e}),(0,i.g)((()=>{this.dispatch("change",{detail:this.xf()})})),(0,i.g)(this.ci.bind(this)),(0,i.g)((()=>{const e=s();for(const s of["top","right","bottom","left"])(0,i.a)(t,`padding-${s}`,e&&`env(safe-area-inset-${s})`)}))}ci(){if(!this.el)return;const{$iosControls:t}=this.a,{controls:e}=this.a.$state,s=e()||t();(0,i.s)(this.el,"aria-hidden",s?"true":null),(0,i.a)(this.el,"display",s?"none":null)}bi(){const{controls:t}=this.a.player,{hideDelay:e,hideOnMouseLeave:s}=this.$props;t.defaultDelay=2e3===e()?this.a.$props.controlsDelay():e(),t.hideOnMouseLeave=s()}xf(){const{controlsVisible:t}=this.a.$state;return t()}}class Bt extends i.a3{constructor(t){super(),this.j=t,this.Ac=-1,this.Bc=-1,this.Ia=null,(0,i.g)(this.di.bind(this))}onDestroy(){this.Ia?.(),this.Ia=null}di(){const t=this.j.C();if(!t)return void this.hide();const e=this.show.bind(this),s=this.hide.bind(this);this.j.zc(t,e,s)}show(t){this.nn(),window.cancelAnimationFrame(this.Bc),this.Bc=-1,this.Ia?.(),this.Ia=null,this.Ac=window.setTimeout((()=>{this.Ac=-1;const e=this.j.u();e&&e.style.removeProperty("display"),(0,i.p)((()=>this.j.B(!0,t)))}),this.j.yf?.()??0)}hide(t){this.nn(),(0,i.p)((()=>this.j.B(!1,t))),this.Bc=requestAnimationFrame((()=>{this.nn(),this.Bc=-1;const t=this.j.u();if(t){const e=()=>{t.style.display="none",this.Ia=null};if((0,r.k)(t)){this.Ia?.();const s=(0,i.l)(t,"animationend",e,{once:!0});this.Ia=s}else e()}}))}nn(){window.clearTimeout(this.Ac),this.Ac=-1}}const zt=(0,i.W)();let Gt=0;class Ut extends i.C{constructor(){super(),this.ca="media-tooltip-"+ ++Gt,this.C=(0,i.f)(null),this.u=(0,i.f)(null),new wt;const{showDelay:t}=this.$props;new Bt({C:this.C,u:this.u,yf:t,zc(t,e,s){(0,i.l)(t,"touchstart",(t=>t.preventDefault()),{passive:!1}),(0,i.g)((()=>{vt()&&(0,i.l)(t,"focus",e),(0,i.l)(t,"blur",s)})),(0,i.l)(t,"mouseenter",e),(0,i.l)(t,"mouseleave",s)},B:this.ei.bind(this)})}static{this.props={showDelay:700}}onAttach(t){t.style.setProperty("display","contents")}onSetup(){(0,i.X)(zt,{C:this.C,u:this.u,Jd:this.Jd.bind(this),Kd:this.Kd.bind(this),Ld:this.Ld.bind(this),Md:this.Md.bind(this)})}Jd(t){this.C.set(t);let e=t.getAttribute("data-media-tooltip");e&&this.el?.setAttribute(`data-media-${e}-tooltip`,""),(0,i.s)(t,"data-describedby",this.ca)}Kd(t){t.removeAttribute("data-describedby"),t.removeAttribute("aria-describedby"),this.C.set(null)}Ld(t){t.setAttribute("id",this.ca),t.style.display="none",(0,r.s)(t,"role","tooltip"),this.u.set(t)}Md(t){t.removeAttribute("id"),t.removeAttribute("role"),this.u.set(null)}ei(t){const e=this.C(),s=this.u();e&&(0,i.s)(e,"aria-describedby",t?this.ca:null);for(const n of[this.el,e,s])n&&(0,i.s)(n,"data-visible",t)}}class Xt extends i.C{static{this.props={placement:"top center",offset:0,alignOffset:0}}constructor(){super(),new wt;const{placement:t}=this.$props;this.setAttributes({"data-placement":t})}onAttach(t){this.Ja(t),Object.assign(t.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(t){this.Ja(t);const e=(0,i.u)(zt);(0,i.q)((()=>e.Md(t))),(0,i.q)((0,r.r)((()=>{this.connectScope&&(0,i.g)(this.Nd.bind(this))})))}Ja(t){(0,i.u)(zt).Ld(t)}Nd(){const{placement:t,offset:e,alignOffset:s}=this.$props;return(0,r.m)(this.el,this.fi(),t(),{offsetVarName:"media-tooltip",xOffset:s(),yOffset:e()})}fi(){return(0,i.u)(zt).C()}}class Jt extends i.a3{constructor(t){super(),this.j=t,new wt,t.kb&&new Y(t.kb)}static{this.props={disabled:!1}}onSetup(){const{disabled:t}=this.$props;this.setAttributes({"data-pressed":this.j.n,"aria-pressed":this.gi.bind(this),"aria-disabled":()=>t()?"true":null})}onAttach(t){(0,r.s)(t,"tabindex","0"),(0,r.s)(t,"role","button"),(0,r.s)(t,"type","button")}onConnect(t){(0,r.o)(t,this.hi.bind(this));for(const t of["click","touchstart"])this.listen(t,this.ii.bind(this))}gi(){return(0,i.a6)(this.j.n())}ji(t){(0,i.a7)(this.j.n)&&this.j.n.set((t=>!t))}hi(t){if(this.$props.disabled()||this.el.hasAttribute("data-disabled"))return t.preventDefault(),void t.stopImmediatePropagation();t.preventDefault(),(this.j.v??this.ji).call(this,t)}ii(t){this.$props.disabled()&&(t.preventDefault(),t.stopImmediatePropagation())}}var _t=Object.defineProperty,Yt=Object.getOwnPropertyDescriptor;class Zt extends i.C{constructor(){super(),this.zf=(0,i.f)(!1),new Jt({n:this.zf})}static{this.props={disabled:!1,defaultPressed:!1}}get pressed(){return this.zf()}}function te(t){return()=>t()?"true":"false"}((t,e,s,i)=>{for(var n,a=Yt(e,s),r=t.length-1;r>=0;r--)(n=t[r])&&(a=n(e,s,a)||a);a&&_t(e,s,a)})([i.$],Zt.prototype,"pressed");class ee extends i.C{static{this.props=Jt.props}constructor(){super(),new Jt({n:this.n.bind(this),v:this.v.bind(this)})}onSetup(){this.a=(0,g.u)();const{canAirPlay:t,isAirPlayConnected:e}=this.a.$state;this.setAttributes({"data-active":e,"data-supported":t,"data-state":this.ki.bind(this),"aria-hidden":te((()=>!t()))})}onAttach(t){t.setAttribute("data-media-tooltip","airplay"),(0,r.n)(t,this.zl.bind(this))}v(t){this.a.remote.requestAirPlay(t)}n(){const{remotePlaybackType:t,remotePlaybackState:e}=this.a.$state;return"airplay"===t()&&"disconnected"!==e()}ki(){const{remotePlaybackType:t,remotePlaybackState:e}=this.a.$state;return"airplay"===t()&&e()}zl(){const{remotePlaybackState:t}=this.a.$state;return`AirPlay ${t()}`}}class se extends i.C{static{this.props=Jt.props}constructor(){super(),new Jt({n:this.n.bind(this),v:this.v.bind(this)})}onSetup(){this.a=(0,g.u)();const{canGoogleCast:t,isGoogleCastConnected:e}=this.a.$state;this.setAttributes({"data-active":e,"data-supported":t,"data-state":this.ki.bind(this),"aria-hidden":te((()=>!t()))})}onAttach(t){t.setAttribute("data-media-tooltip","google-cast"),(0,r.n)(t,this.zl.bind(this))}v(t){this.a.remote.requestGoogleCast(t)}n(){const{remotePlaybackType:t,remotePlaybackState:e}=this.a.$state;return"google-cast"===t()&&"disconnected"!==e()}ki(){const{remotePlaybackType:t,remotePlaybackState:e}=this.a.$state;return"google-cast"===t()&&e()}zl(){const{remotePlaybackState:t}=this.a.$state;return`Google Cast ${t()}`}}class ie extends i.C{static{this.props=Jt.props}constructor(){super(),new Jt({n:this.n.bind(this),kb:"togglePaused",v:this.v.bind(this)})}onSetup(){this.a=(0,g.u)();const{paused:t,ended:e}=this.a.$state;this.setAttributes({"data-paused":t,"data-ended":e})}onAttach(t){t.setAttribute("data-media-tooltip","play"),(0,r.n)(t,"Play")}v(t){const e=this.a.remote;this.n()?e.pause(t):e.play(t)}n(){const{paused:t}=this.a.$state;return!t()}}class ne extends i.C{static{this.props=Jt.props}constructor(){super(),new Jt({n:this.n.bind(this),kb:"toggleCaptions",v:this.v.bind(this)})}onSetup(){this.a=(0,g.u)(),this.setAttributes({"data-active":this.n.bind(this),"data-supported":()=>!this.lb(),"aria-hidden":te(this.lb.bind(this))})}onAttach(t){t.setAttribute("data-media-tooltip","caption"),(0,r.n)(t,"Captions")}v(t){this.a.remote.toggleCaptions(t)}n(){const{textTrack:t}=this.a.$state,e=t();return!!e&&(0,o.i)(e)}lb(){const{hasCaptions:t}=this.a.$state;return!t()}}class ae extends i.C{static{this.props={...Jt.props,target:"prefer-media"}}constructor(){super(),new Jt({n:this.n.bind(this),kb:"toggleFullscreen",v:this.v.bind(this)})}onSetup(){this.a=(0,g.u)();const{fullscreen:t}=this.a.$state,e=this.Nb.bind(this);this.setAttributes({"data-active":t,"data-supported":e,"aria-hidden":te((()=>!e()))})}onAttach(t){t.setAttribute("data-media-tooltip","fullscreen"),(0,r.n)(t,"Fullscreen")}v(t){const e=this.a.remote,s=this.$props.target();this.n()?e.exitFullscreen(s,t):e.enterFullscreen(s,t)}n(){const{fullscreen:t}=this.a.$state;return t()}Nb(){const{canFullscreen:t}=this.a.$state;return t()}}class re extends i.C{static{this.props=Jt.props}constructor(){super(),new Jt({n:this.n.bind(this),kb:"toggleMuted",v:this.v.bind(this)})}onSetup(){this.a=(0,g.u)(),this.setAttributes({"data-muted":this.n.bind(this),"data-state":this.ki.bind(this)})}onAttach(t){t.setAttribute("data-media-mute-button",""),t.setAttribute("data-media-tooltip","mute"),(0,r.n)(t,"Mute")}v(t){const e=this.a.remote;this.n()?e.unmute(t):e.mute(t)}n(){const{muted:t,volume:e}=this.a.$state;return t()||0===e()}ki(){const{muted:t,volume:e}=this.a.$state,s=e();return t()||0===s?"muted":s>=.5?"high":s<.5?"low":void 0}}class oe extends i.C{static{this.props=Jt.props}constructor(){super(),new Jt({n:this.n.bind(this),kb:"togglePictureInPicture",v:this.v.bind(this)})}onSetup(){this.a=(0,g.u)();const{pictureInPicture:t}=this.a.$state,e=this.Nb.bind(this);this.setAttributes({"data-active":t,"data-supported":e,"aria-hidden":te((()=>!e()))})}onAttach(t){t.setAttribute("data-media-tooltip","pip"),(0,r.n)(t,"PiP")}v(t){const e=this.a.remote;this.n()?e.exitPictureInPicture(t):e.enterPictureInPicture(t)}n(){const{pictureInPicture:t}=this.a.$state;return t()}Nb(){const{canPictureInPicture:t}=this.a.$state;return t()}}class he extends i.C{static{this.props={disabled:!1,seconds:30}}constructor(){super(),new wt}onSetup(){this.a=(0,g.u)();const{seeking:t}=this.a.$state,{seconds:e}=this.$props,s=this.Nb.bind(this);this.setAttributes({seconds:e,"data-seeking":t,"data-supported":s,"aria-hidden":te((()=>!s()))})}onAttach(t){(0,r.s)(t,"tabindex","0"),(0,r.s)(t,"role","button"),(0,r.s)(t,"type","button"),t.setAttribute("data-media-tooltip","seek"),(0,r.n)(t,this.zl.bind(this))}onConnect(t){(0,r.o)(t,this.v.bind(this))}Nb(){const{canSeek:t}=this.a.$state;return t()}zl(){const{seconds:t}=this.$props;return`Seek ${t()>0?"forward":"backward"} ${t()} seconds`}v(t){const{seconds:e,disabled:s}=this.$props;if(s())return;const{currentTime:i}=this.a.$state,n=i()+e();this.a.remote.seek(n,t)}}class ce extends i.C{static{this.props={disabled:!1}}constructor(){super(),new wt}onSetup(){this.a=(0,g.u)();const{disabled:t}=this.$props,{live:e,liveEdge:s}=this.a.$state,i=()=>!e();this.setAttributes({"data-edge":s,"data-hidden":i,"aria-disabled":te((()=>t()||s())),"aria-hidden":te(i)})}onAttach(t){(0,r.s)(t,"tabindex","0"),(0,r.s)(t,"role","button"),(0,r.s)(t,"type","button"),t.setAttribute("data-media-tooltip","live")}onConnect(t){(0,r.o)(t,this.v.bind(this))}v(t){const{disabled:e}=this.$props,{liveEdge:s}=this.a.$state;e()||s()||this.a.remote.seekToLiveEdge(t)}}const le=new i.U({min:0,max:100,value:0,step:1,pointerValue:0,focused:!1,dragging:!1,pointing:!1,hidden:!1,get active(){return this.dragging||this.focused||this.pointing},get fillRate(){return ue(this.min,this.max,this.value)},get fillPercent(){return 100*this.fillRate},get pointerRate(){return ue(this.min,this.max,this.pointerValue)},get pointerPercent(){return 100*this.pointerRate}});function ue(t,e,s){const i=e-t;return i>0?(s-t)/i:0}class de extends i.a3{constructor(t){super(),this.Ch=t}onConnect(t){this.x=new IntersectionObserver((t=>{this.Ch.callback?.(t,this.x)}),this.Ch),this.x.observe(t),(0,i.q)(this.y.bind(this))}y(){this.x?.disconnect(),this.x=void 0}}const pe=(0,i.W)(),ge=(0,i.W)(),fe={Left:-1,ArrowLeft:-1,Up:1,ArrowUp:1,Right:1,ArrowRight:1,Down:-1,ArrowDown:-1};class me extends i.a3{constructor(t,e){super(),this.j=t,this.a=e,this.i=null,this.ua=null,this.mb=null,this.ti=D((t=>{this.va(this.Dc(t),t)}),20,{leading:!0})}onSetup(){(0,i.a8)(ge)&&(this.x=(0,i.u)(ge))}onConnect(){(0,i.g)(this.li.bind(this)),(0,i.g)(this.mi.bind(this)),this.j.ni&&(0,i.g)(this.xn.bind(this))}xn(){const{pointer:t}=this.a.$state;"coarse"===t()&&this.j.ni()?(this.i=this.a.player.el?.querySelector("media-provider,[data-media-provider]"),this.i&&((0,i.l)(this.i,"touchstart",this.oi.bind(this),{passive:!0}),(0,i.l)(this.i,"touchmove",this.pi.bind(this),{passive:!1}))):this.i=null}oi(t){this.ua=t.touches[0]}pi(t){if((0,i.m)(this.ua)||(0,r.j)(t))return;const e=t.touches[0],s=e.clientX-this.ua.clientX,n=e.clientY-this.ua.clientY,a=this.$state.dragging();!a&&Math.abs(n)>5||a||(t.preventDefault(),Math.abs(s)>20&&(this.ua=e,this.mb=this.$state.value(),this.Od(this.mb,t)))}li(){const{hidden:t}=this.$props;this.listen("focus",this.Lb.bind(this)),this.listen("keydown",this.Ab.bind(this)),this.listen("keyup",this.zb.bind(this)),t()||this.j.K()||(this.listen("pointerenter",this.Cd.bind(this)),this.listen("pointermove",this.qi.bind(this)),this.listen("pointerleave",this.Dd.bind(this)),this.listen("pointerdown",this.ri.bind(this)))}mi(){!this.j.K()&&this.$state.dragging()&&((0,i.l)(document,"pointerup",this.si.bind(this)),(0,i.l)(document,"pointermove",this.ti.bind(this)),(0,i.l)(document,"touchmove",this.ui.bind(this),{passive:!1}))}Lb(){this.va(this.$state.value())}Pd(t,e){const{value:s,min:i,max:n,dragging:a}=this.$state,r=Math.max(i(),Math.min(t,n()));s.set(r);const o=this.createEvent("value-change",{detail:r,trigger:e});if(this.dispatch(o),this.j.o?.(o),a()){const t=this.createEvent("drag-value-change",{detail:r,trigger:e});this.dispatch(t),this.j.nb?.(t)}}va(t,e){const{pointerValue:s,dragging:i}=this.$state;s.set(t),this.dispatch("pointer-value-change",{detail:t,trigger:e}),i()&&this.Pd(t,e)}Dc(t){let e,s=this.el.getBoundingClientRect(),{min:n,max:a}=this.$state;if("vertical"===this.$props.orientation()){const{bottom:i,height:n}=s;e=(i-t.clientY)/n}else if(this.ua&&(0,i.j)(this.mb)){const{width:s}=this.i.getBoundingClientRect(),i=(t.clientX-this.ua.clientX)/s,r=a()-n(),o=r*Math.abs(i);e=(i<0?this.mb-o:this.mb+o)/r}else{const{left:i,width:n}=s;e=(t.clientX-i)/n}return Math.max(n(),Math.min(a(),this.j.Ob(function(t,e,s,i){const n=(e-t)*(0,y.c)(0,s,1)/i;return t+i*Math.round(n)}(n(),a(),e,this.j.Ka()))))}Cd(t){this.$state.pointing.set(!0)}qi(t){const{dragging:e}=this.$state;e()||this.va(this.Dc(t),t)}Dd(t){this.$state.pointing.set(!1)}ri(t){if(0!==t.button)return;const e=this.Dc(t);this.Od(e,t),this.va(e,t)}Od(t,e){const{dragging:s}=this.$state;if(s())return;s.set(!0),this.a.remote.pauseControls(e);const i=this.createEvent("drag-start",{detail:t,trigger:e});this.dispatch(i),this.j.Qd?.(i),this.x?.onDragStart?.()}Af(t,e){const{dragging:s}=this.$state;if(!s())return;s.set(!1),this.a.remote.resumeControls(e);const i=this.createEvent("drag-end",{detail:t,trigger:e});this.dispatch(i),this.j.Ec?.(i),this.ua=null,this.mb=null,this.x?.onDragEnd?.()}Ab(t){const{key:e}=t,{min:s,max:n}=this.$state;let a;if("Home"===e||"PageUp"===e?a=s():"End"===e||"PageDown"===e?a=n():!t.metaKey&&/^[0-9]$/.test(e)&&(a=(n()-s())/10*Number(e)),!(0,i.h)(a))return this.va(a,t),void this.Pd(a,t);const r=this.Bf(t);if((0,i.h)(r))return;const o=e===this.Rd;!this.$state.dragging()&&o&&this.Od(r,t),this.va(r,t),o||this.Pd(r,t),this.Rd=e}zb(t){this.Rd="";const{dragging:e,value:s}=this.$state;if(!e())return;const i=this.Bf(t)??s();this.va(i),this.Af(i,t)}Bf(t){const{key:e,shiftKey:s}=t;if(!Object.keys(fe).includes(e))return;t.preventDefault(),t.stopPropagation();const{shiftKeyMultiplier:i}=this.$props,{value:n,min:a,max:r}=this.$state,o=this.j.Ka(),h=this.j.Pb(),c=(s?h*i():h)*Number(fe[e]),l=((this.j.na?.()??n())+c)/o;return Math.max(a(),Math.min(r(),Number((o*l).toFixed(3))))}si(t){if(0!==t.button)return;const e=this.Dc(t);this.va(e,t),this.Af(e,t)}ui(t){t.preventDefault()}}const be=(0,i.W)((()=>({})));class ye extends i.a3{constructor(t){super(),this.j=t,this.Co=(0,i.f)(!0),this.Do=(0,i.f)(!0),this.xi=(0,i.I)(((t,e)=>{this.el?.style.setProperty("--slider-fill",t+"%"),this.el?.style.setProperty("--slider-pointer",e+"%")}))}static{this.props={hidden:!1,disabled:!1,step:1,keyStep:1,orientation:"horizontal",shiftKeyMultiplier:5}}onSetup(){this.a=(0,g.u)();const t=new wt;t.attach(this),this.$state.focused=t.focused.bind(t),(0,i.a8)(be)||(0,i.X)(be,{default:"value"}),(0,i.X)(pe,{ta:this.$props.orientation,Fc:this.j.K,Cf:(0,i.f)(null)}),(0,i.g)(this.D.bind(this)),(0,i.g)(this.ro.bind(this)),(0,i.g)(this.Qb.bind(this)),this.vi(),new me(this.j,this.a).attach(this),new de({callback:this.Eo.bind(this)}).attach(this)}onAttach(t){(0,r.s)(t,"role","slider"),(0,r.s)(t,"tabindex","0"),(0,r.s)(t,"autocomplete","off"),(0,i.g)(this.Df.bind(this))}onConnect(t){(0,i.q)((0,r.p)(t,this.Co.set)),(0,i.g)(this.ob.bind(this))}Eo(t){this.Do.set(t[0].isIntersecting)}ob(){const{hidden:t}=this.$props;this.$state.hidden.set(t()||!this.Co()||!this.Do.bind(this))}D(){const{dragging:t,value:e,min:s,max:n}=this.$state;(0,i.p)(t)||e.set(function(t,e,s,i){return(0,y.c)(t,(0,y.r)(s,(0,y.g)(i)),e)}(s(),n(),e(),this.j.Ka()))}ro(){this.$state.step.set(this.j.Ka())}Qb(){if(!this.j.K())return;const{dragging:t,pointing:e}=this.$state;t.set(!1),e.set(!1)}wi(){return(0,i.a6)(this.j.K())}vi(){const{orientation:t}=this.$props,{dragging:e,active:s,pointing:i}=this.$state;this.setAttributes({"data-dragging":e,"data-pointing":i,"data-active":s,"aria-disabled":this.wi.bind(this),"aria-valuemin":this.j.Pn??this.$state.min,"aria-valuemax":this.j.Mn??this.$state.max,"aria-valuenow":this.j.ia,"aria-valuetext":this.j.ja,"aria-orientation":t})}Df(){const{fillPercent:t,pointerPercent:e}=this.$state;this.xi((0,y.r)(t(),3),(0,y.r)(e(),3))}}class $e extends i.C{static{this.props={...ye.props,min:0,max:100,value:0}}static{this.state=le}constructor(){super(),new ye({Ka:this.$props.step,Pb:this.$props.keyStep,Ob:Math.round,K:this.$props.disabled,ia:this.ia.bind(this),ja:this.ja.bind(this)})}onSetup(){(0,i.g)(this.D.bind(this)),(0,i.g)(this.yi.bind(this))}ia(){const{value:t}=this.$state;return Math.round(t())}ja(){const{value:t,max:e}=this.$state;return(0,y.r)(t()/e()*100,2)+"%"}D(){const{value:t}=this.$props;this.$state.value.set(t())}yi(){const{min:t,max:e}=this.$props;this.$state.min.set(t()),this.$state.max.set(e())}}const ve=new Map,we=new Map;class ke{constructor(t,e,s){this.$src=t,this.$crossOrigin=e,this.a=s,this.$images=(0,i.f)([]),(0,i.g)(this.zi.bind(this))}static create(t,e){const s=(0,g.u)();return new ke(t,e,s)}zi(){const{canLoad:t}=this.a.$state;if(!t())return;const e=this.$src(),n=new AbortController;if(e){if((0,i.i)(e)&&ve.has(e)){const t=ve.get(e);if(ve.delete(e),ve.set(e,t),ve.size>30){const t=ve.keys().next().value;ve.delete(t)}this.$images.set(ve.get(e))}else if((0,i.i)(e)){const t=this.$crossOrigin(),a=e+"::"+t;if(!we.has(a)){const r=new Promise((async(a,r)=>{try{const o=await fetch(e,{signal:n.signal,credentials:(0,b.b)(t)});if("application/json"===o.headers.get("content-type")){const t=await o.json();if((0,i.v)(t))if(t[0]&&"text"in t[0])a(this.bl(t));else{for(let e=0;e<t.length;e++){const s=t[e];(0,m.a)((0,i.t)(s),!1),(0,m.a)("url"in s&&(0,i.i)(s.url),!1),(0,m.a)("startTime"in s&&(0,i.j)(s.startTime),!1)}a(t)}else a(this.cl(t));return}s.e(3066).then(s.bind(s,3066)).then((async({parseResponse:t})=>{try{const{cues:e}=await t(o);a(this.bl(e))}catch(t){r(t)}}))}catch(t){r(t)}})).then((t=>(n.signal.aborted||ve.set(a,t),t))).catch((t=>{n.signal.aborted||this.U(e,t)})).finally((()=>{(0,i.i)(a)&&we.delete(a)}));we.set(a,r)}we.get(a)?.then((t=>{n.signal.aborted||this.$images.set(t||[])}))}else if((0,i.v)(e))try{this.$images.set(this.jl(e))}catch(t){this.U(e,t)}else try{this.$images.set(this.cl(e))}catch(t){this.U(e,t)}return()=>{n.abort(),this.$images.set([])}}}jl(t){const e=this.dl();return t.map(((t,s)=>((0,m.a)(t.url&&(0,i.i)(t.url),!1),(0,m.a)("startTime"in t&&(0,i.j)(t.startTime),!1),{...t,url:(0,i.i)(t.url)?this.gl(t.url,e):t.url})))}cl(t){(0,m.a)((0,i.i)(t.url),!1),(0,m.a)((0,i.v)(t.tiles)&&t.tiles?.length,!1);const e=new URL(t.url),s=[],n="tile_width"in t?t.tile_width:t.tileWidth,a="tile_height"in t?t.tile_height:t.tileHeight;for(const i of t.tiles)s.push({url:e,startTime:"start"in i?i.start:i.startTime,width:n,height:a,coords:{x:i.x,y:i.y}});return s}bl(t){for(let e=0;e<t.length;e++){const s=t[e];(0,m.a)("startTime"in s&&(0,i.j)(s.startTime),!1),(0,m.a)("text"in s&&(0,i.i)(s.text),!1)}const e=[],s=this.dl();for(const n of t){const[t,a]=n.text.split("#"),r=this.fl(a);e.push({url:this.gl(t,s),startTime:n.startTime,endTime:n.endTime,width:r?.w,height:r?.h,coords:r&&(0,i.j)(r.x)&&(0,i.j)(r.y)?{x:r.x,y:r.y}:void 0})}return e}dl(){let t=(0,i.p)(this.$src);return(0,i.i)(t)&&/^https?:/.test(t)?t:location.href}gl(t,e){return/^https?:/.test(t)?new URL(t):new URL(t,e)}fl(t){if(!t)return{};const[e,s]=t.split("="),i=s?.split(","),n={};if(!e||!i)return null;for(let t=0;t<e.length;t++){const s=+i[t];isNaN(s)||(n[e[t]]=s)}return n}U(t,e){}}class Te extends i.C{constructor(){super(...arguments),this.Td=[]}static{this.props={src:null,time:0,crossOrigin:null}}static{this.state=new i.U({src:"",img:null,thumbnails:[],activeThumbnail:null,crossOrigin:null,loading:!1,error:null,hidden:!1})}onSetup(){this.a=(0,g.u)(),this.ha=ke.create(this.$props.src,this.$state.crossOrigin),this.Hh(),this.setAttributes({"data-loading":this.Rb.bind(this),"data-error":this.wa.bind(this),"data-hidden":this.$state.hidden,"aria-hidden":te(this.$state.hidden)})}onConnect(t){(0,i.g)(this.Ud.bind(this)),(0,i.g)(this.ob.bind(this)),(0,i.g)(this.Hh.bind(this)),(0,i.g)(this.Ea.bind(this)),(0,i.g)(this.il.bind(this)),(0,i.g)(this.Fi.bind(this))}Ud(){const t=this.$state.img();t&&((0,i.l)(t,"load",this.qd.bind(this)),(0,i.l)(t,"error",this.U.bind(this)))}Hh(){const{crossOrigin:t}=this.$props,{crossOrigin:e}=this.$state,{crossOrigin:s}=this.a.$state,i=null!==t()?t():s();e.set(!0===i?"anonymous":i)}Ea(){const{src:t,loading:e,error:s}=this.$state;return t()&&(e.set(!0),s.set(null)),()=>{this.Ci(),e.set(!1),s.set(null)}}qd(){const{loading:t,error:e}=this.$state;this.Fi(),t.set(!1),e.set(null)}U(t){const{loading:e,error:s}=this.$state;e.set(!1),s.set(t)}Rb(){const{loading:t,hidden:e}=this.$state;return!e()&&t()}wa(){const{error:t}=this.$state;return!(0,i.m)(t())}ob(){const{hidden:t}=this.$state,{duration:e}=this.a.$state,s=this.ha.$images();t.set(this.wa()||!Number.isFinite(e())||0===s.length)}Gf(){return this.$props.time()}il(){let t=this.ha.$images();if(!t.length)return;let e=this.Gf(),{src:s,activeThumbnail:i}=this.$state,n=-1,a=null;for(let s=t.length-1;s>=0;s--){const i=t[s];if(e>=i.startTime&&(!i.endTime||e<i.endTime)){n=s;break}}t[n]&&(a=t[n]),i.set(a),s.set(a?.url.href||"")}Fi(){if(!this.scope||this.$state.hidden())return;const t=this.el,e=this.$state.img(),s=this.$state.activeThumbnail();if(!e||!s||!t)return;let i=s.width??e.naturalWidth,n=s?.height??e.naturalHeight,{maxWidth:a,maxHeight:r,minWidth:o,minHeight:h,width:c,height:l}=getComputedStyle(this.el);"100%"===o&&(o=parseFloat(c)+""),"100%"===h&&(h=parseFloat(l)+"");let u=Math.max(parseInt(o)/i,parseInt(h)/n),d=Math.min(Math.max(parseInt(o),parseInt(a))/i,Math.max(parseInt(h),parseInt(r))/n),p=!isNaN(d)&&d<1?d:u>1?u:1;this.pb(t,"--thumbnail-width",i*p+"px"),this.pb(t,"--thumbnail-height",n*p+"px"),this.pb(e,"width",e.naturalWidth*p+"px"),this.pb(e,"height",e.naturalHeight*p+"px"),this.pb(e,"transform",s.coords?`translate(-${s.coords.x*p}px, -${s.coords.y*p}px)`:""),this.pb(e,"max-width","none")}pb(t,e,s){t.style.setProperty(e,s),this.Td.push((()=>t.style.removeProperty(e)))}Ci(){for(const t of this.Td)t();this.Td=[]}}var xe=Object.defineProperty,Pe=Object.getOwnPropertyDescriptor;class Se extends i.C{static{this.props={src:null,crossOrigin:null}}static{this.state=new i.U({video:null,src:null,crossOrigin:null,canPlay:!1,error:null,hidden:!1})}get video(){return this.$state.video()}onSetup(){this.a=(0,g.u)(),this.Q=(0,i.J)($e.state),this.Hh(),this.setAttributes({"data-loading":this.Rb.bind(this),"data-hidden":this.$state.hidden,"data-error":this.wa.bind(this),"aria-hidden":te(this.$state.hidden)})}onAttach(t){(0,i.g)(this.Gi.bind(this)),(0,i.g)(this.fd.bind(this)),(0,i.g)(this.Hh.bind(this)),(0,i.g)(this.ob.bind(this)),(0,i.g)(this.Hi.bind(this)),(0,i.g)(this.Ii.bind(this))}Gi(){const t=this.$state.video();t&&(t.readyState>=2&&this.hc(),(0,i.l)(t,"canplay",this.hc.bind(this)),(0,i.l)(t,"error",this.U.bind(this)))}fd(){const{src:t}=this.$state,{canLoad:e}=this.a.$state;t.set(e()?this.$props.src():null)}Hh(){const{crossOrigin:t}=this.$props,{crossOrigin:e}=this.$state,{crossOrigin:s}=this.a.$state,i=null!==t()?t():s();e.set(!0===i?"anonymous":i)}Rb(){const{canPlay:t,hidden:e}=this.$state;return!t()&&!e()}wa(){const{error:t}=this.$state;return!(0,i.m)(t)}ob(){const{src:t,hidden:e}=this.$state,{canLoad:s,duration:i}=this.a.$state;e.set(s()&&(!t()||this.wa()||!Number.isFinite(i())))}Hi(){const{src:t,canPlay:e,error:s}=this.$state;t(),e.set(!1),s.set(null)}hc(t){const{canPlay:e,error:s}=this.$state;e.set(!0),s.set(null),this.dispatch("can-play",{trigger:t})}U(t){const{canPlay:e,error:s}=this.$state;e.set(!1),s.set(t),this.dispatch("error",{trigger:t})}Ii(){const{video:t,canPlay:e}=this.$state,{duration:s}=this.a.$state,{pointerRate:i}=this.Q,n=t();e()&&n&&Number.isFinite(s())&&Number.isFinite(i())&&(n.currentTime=i()*s())}}((t,e,s,i)=>{for(var n,a=Pe(e,s),r=t.length-1;r>=0;r--)(n=t[r])&&(a=n(e,s,a)||a);a&&xe(e,s,a)})([i.$],Se.prototype,"video");var Ce=Object.defineProperty,Ae=Object.getOwnPropertyDescriptor;class Ee extends i.C{static{this.props={type:"pointer",format:null,showHours:!1,showMs:!1,padHours:null,padMinutes:null,decimalPlaces:2}}onSetup(){this.Q=(0,i.J)($e.state),this.Sb=(0,i.u)(be),this.Ji=(0,i.o)(this.getValueText.bind(this))}getValueText(){const{type:t,format:e,decimalPlaces:s,padHours:i,padMinutes:n,showHours:a,showMs:r}=this.$props,{value:o,pointerValue:h,min:c,max:l}=this.Q,u=e()??this.Sb.default,d="current"===t()?o():h();if("percent"===u){const t=d/(l()-c())*100;return(this.Sb.percent??y.r)(t,s())+"%"}return"time"===u?(this.Sb.time??Ht)(d,{padHrs:i(),padMins:n(),showHrs:a(),showMs:r()}):(this.Sb.value?.(d)??d.toFixed(2))+""}}((t,e,s,i)=>{for(var n,a=Ae(e,s),r=t.length-1;r>=0;r--)(n=t[r])&&(a=n(e,s,a)||a);a&&Ce(e,s,a)})([i.a5],Ee.prototype,"getValueText");class qe extends i.C{constructor(){super(...arguments),this.Hf=(0,i.I)((()=>{const{Fc:t,ta:e}=this.Q;if(t())return;const s=this.el,{offset:i,noClamp:n}=this.$props;s&&function(t,{clamp:e,offset:s,orientation:i}){const n=getComputedStyle(t),a=parseFloat(n.width),r=parseFloat(n.height),o={top:null,right:null,bottom:null,left:null};if(o["horizontal"===i?"bottom":"left"]=`calc(100% + var(--media-slider-preview-offset, ${s}px))`,"horizontal"===i){const t=a/2;if(e){const e=`max(0px, calc(var(--slider-pointer) - ${t}px))`,s=`calc(100% - ${a}px)`;o.left=`min(${e}, ${s})`}else o.left=`calc(var(--slider-pointer) - ${t}px)`}else{const t=r/2;if(e){const e=`max(${t}px, calc(var(--slider-pointer) - ${t}px))`,s=`calc(100% - ${r}px)`;o.bottom=`min(${e}, ${s})`}else o.bottom=`calc(var(--slider-pointer) - ${t}px)`}Object.assign(t.style,o)}(s,{clamp:!n(),offset:i(),orientation:e()})}))}static{this.props={offset:0,noClamp:!1}}onSetup(){this.Q=(0,i.u)(pe);const{active:t}=(0,i.J)($e.state);this.setAttributes({"data-visible":t})}onAttach(t){Object.assign(t.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(t){const{Cf:e}=this.Q;e.set(t),(0,i.q)((()=>e.set(null))),(0,i.g)(this.Hf.bind(this));const s=new ResizeObserver(this.Hf.bind(this));s.observe(t),(0,i.q)((()=>s.disconnect()))}}class je extends i.C{constructor(){super(...arguments),this.If=D(this.ab.bind(this),25)}static{this.props={...ye.props,keyStep:5,shiftKeyMultiplier:2}}static{this.state=le}onSetup(){this.a=(0,g.u)();const{audioGain:t}=this.a.$state;(0,i.X)(be,{default:"percent",value:e=>(e*(t()??1)).toFixed(2),percent:e=>Math.round(e*(t()??1))}),new ye({Ka:this.$props.step,Pb:this.$props.keyStep,Ob:Math.round,K:this.K.bind(this),Mn:this.Mn.bind(this),ia:this.ia.bind(this),ja:this.ja.bind(this),nb:this.nb.bind(this),o:this.o.bind(this)}).attach(this),(0,i.g)(this.Fd.bind(this))}onAttach(t){t.setAttribute("data-media-volume-slider",""),(0,r.s)(t,"aria-label","Volume");const{canSetVolume:e}=this.a.$state;this.setAttributes({"data-supported":e,"aria-hidden":te((()=>!e()))})}ia(){const{value:t}=this.$state,{audioGain:e}=this.a.$state;return Math.round(t()*(e()??1))}ja(){const{value:t,max:e}=this.$state,{audioGain:s}=this.a.$state;return(0,y.r)(t()/e()*(s()??1)*100,2)+"%"}Mn(){const{audioGain:t}=this.a.$state;return this.$state.max()*(t()??1)}K(){const{disabled:t}=this.$props,{canSetVolume:e}=this.a.$state;return t()||!e()}Fd(){const{muted:t,volume:e}=this.a.$state,s=t()?0:100*e();this.$state.value.set(s),this.dispatch("value-change",{detail:s})}ab(t){if(!t.trigger)return;const e=(0,y.r)(t.detail/100,3);this.a.remote.changeVolume(e,t)}o(t){this.If(t)}nb(t){this.If(t)}}class Le extends i.C{static{this.props={...ye.props,step:25,keyStep:25,shiftKeyMultiplier:2,min:0,max:300}}static{this.state=le}onSetup(){this.a=(0,g.u)(),(0,i.X)(be,{default:"percent",percent:(t,e)=>(0,y.r)(this.$state.value(),e)+"%"}),new ye({Ka:this.$props.step,Pb:this.$props.keyStep,Ob:Math.round,K:this.K.bind(this),ia:this.ia.bind(this),ja:this.ja.bind(this),nb:this.nb.bind(this),o:this.o.bind(this)}).attach(this),(0,i.g)(this.yi.bind(this)),(0,i.g)(this.On.bind(this))}onAttach(t){t.setAttribute("data-media-audio-gain-slider",""),(0,r.s)(t,"aria-label","Audio Boost");const{canSetAudioGain:e}=this.a.$state;this.setAttributes({"data-supported":e,"aria-hidden":te((()=>!e()))})}ia(){const{value:t}=this.$state;return Math.round(t())}ja(){const{value:t}=this.$state;return t()+"%"}yi(){const{min:t,max:e}=this.$props;this.$state.min.set(t()),this.$state.max.set(e())}On(){const{audioGain:t}=this.a.$state,e=100*((t()??1)-1);this.$state.value.set(e),this.dispatch("value-change",{detail:e})}K(){const{disabled:t}=this.$props,{canSetAudioGain:e}=this.a.$state;return t()||!e()}Nn(t){if(!t.trigger)return;const e=(0,y.r)(1+t.detail/100,2);this.a.remote.changeAudioGain(e,t)}o(t){this.Nn(t)}nb(t){this.Nn(t)}}class Oe extends i.C{constructor(){super(...arguments),this.ho=D(this.io.bind(this),25)}static{this.props={...ye.props,step:.25,keyStep:.25,shiftKeyMultiplier:2,min:0,max:2}}static{this.state=le}onSetup(){this.a=(0,g.u)(),new ye({Ka:this.$props.step,Pb:this.$props.keyStep,Ob:this.Ob,K:this.K.bind(this),ia:this.ia.bind(this),ja:this.ja.bind(this),nb:this.nb.bind(this),o:this.o.bind(this)}).attach(this),(0,i.g)(this.yi.bind(this)),(0,i.g)(this.Sh.bind(this))}onAttach(t){t.setAttribute("data-media-speed-slider",""),(0,r.s)(t,"aria-label","Speed");const{canSetPlaybackRate:e}=this.a.$state;this.setAttributes({"data-supported":e,"aria-hidden":te((()=>!e()))})}ia(){const{value:t}=this.$state;return t()}ja(){const{value:t}=this.$state;return t()+"x"}yi(){const{min:t,max:e}=this.$props;this.$state.min.set(t()),this.$state.max.set(e())}Sh(){const{playbackRate:t}=this.a.$state,e=t();this.$state.value.set(e),this.dispatch("value-change",{detail:e})}Ob(t){return(0,y.r)(t,2)}K(){const{disabled:t}=this.$props,{canSetPlaybackRate:e}=this.a.$state;return t()||!e()}io(t){if(!t.trigger)return;const e=t.detail;this.a.remote.changePlaybackRate(e,t)}o(t){this.ho(t)}nb(t){this.ho(t)}}class Me extends i.C{constructor(){super(...arguments),this.Dj=(0,i.o)((()=>{const{qualities:t}=this.a.$state;return B(t())})),this.jo=D(this.fb.bind(this),25)}static{this.props={...ye.props,step:1,keyStep:1,shiftKeyMultiplier:1}}static{this.state=le}onSetup(){this.a=(0,g.u)(),new ye({Ka:this.$props.step,Pb:this.$props.keyStep,Ob:Math.round,K:this.K.bind(this),ia:this.ia.bind(this),ja:this.ja.bind(this),nb:this.nb.bind(this),o:this.o.bind(this)}).attach(this),(0,i.g)(this.ko.bind(this)),(0,i.g)(this.lo.bind(this))}onAttach(t){t.setAttribute("data-media-quality-slider",""),(0,r.s)(t,"aria-label","Video Quality");const{qualities:e,canSetQuality:s}=this.a.$state,n=(0,i.o)((()=>s()&&e().length>0));this.setAttributes({"data-supported":n,"aria-hidden":te((()=>!n()))})}ia(){const{value:t}=this.$state;return t()}ja(){const{quality:t}=this.a.$state;if(!t())return"";const{height:e,bitrate:s}=t(),i=s&&s>0?`${(s/1e6).toFixed(2)} Mbps`:null;return e?`${e}p${i?` (${i})`:""}`:"Auto"}ko(){const t=this.Dj();this.$state.max.set(Math.max(0,t.length-1))}lo(){let{quality:t}=this.a.$state,e=this.Dj(),s=Math.max(0,e.indexOf(t()));this.$state.value.set(s),this.dispatch("value-change",{detail:s})}K(){const{disabled:t}=this.$props,{canSetQuality:e,qualities:s}=this.a.$state;return t()||s().length<=1||!e()}fb(t){if(!t.trigger)return;const{qualities:e}=this.a,s=(0,i.p)(this.Dj)[t.detail];this.a.remote.changeQuality(e.indexOf(s),t)}o(t){this.jo(t)}nb(t){this.jo(t)}}class De extends i.C{constructor(){super(),this.Jf=(0,i.f)(null),this.Wd=!1;const{noSwipeGesture:t}=this.$props;new ye({ni:()=>!t(),na:this.na.bind(this),Ka:this.Ka.bind(this),Pb:this.Pb.bind(this),Ob:this.Ob,K:this.K.bind(this),ia:this.ia.bind(this),ja:this.ja.bind(this),Qd:this.Qd.bind(this),nb:this.nb.bind(this),Ec:this.Ec.bind(this),o:this.o.bind(this)})}static{this.props={...ye.props,step:.1,keyStep:5,shiftKeyMultiplier:2,pauseWhileDragging:!1,noSwipeGesture:!1,seekingRequestThrottle:100}}static{this.state=le}onSetup(){this.a=(0,g.u)(),(0,i.X)(be,{default:"time",value:this.Ki.bind(this),time:this.Li.bind(this)}),this.setAttributes({"data-chapters":this.Mi.bind(this)}),this.setStyles({"--slider-progress":this.Ni.bind(this)}),(0,i.g)(this.jb.bind(this)),(0,i.g)(this.Oi.bind(this))}onAttach(t){t.setAttribute("data-media-time-slider",""),(0,r.s)(t,"aria-label","Seek")}onConnect(t){(0,i.g)(this.Pi.bind(this)),(0,o.w)(this.a.textTracks,"chapters",this.Jf.set)}Ni(){const{bufferedEnd:t,duration:e}=this.a.$state;return(0,y.r)(100*Math.min(t()/Math.max(e(),1),1),3)+"%"}Mi(){const{duration:t}=this.a.$state;return this.Jf()?.cues.length&&Number.isFinite(t())&&t()>0}Oi(){this.Vd=D(this.qa.bind(this),this.$props.seekingRequestThrottle())}jb(){if(this.$state.hidden())return;const{value:t,dragging:e}=this.$state,s=this.na();(0,i.p)(e)||(t.set(s),this.dispatch("value-change",{detail:s}))}Pi(){const t=this.a.player.el,{Cf:e}=(0,i.u)(pe);t&&e()&&(0,i.s)(t,"data-preview",this.$state.active())}qa(t,e){this.a.remote.seeking(t,e)}Ri(t,e,s){this.Vd.cancel();const{live:i}=this.a.$state;i()&&e>=99?this.a.remote.seekToLiveEdge(s):this.a.remote.seek(t,s)}Qd(t){const{pauseWhileDragging:e}=this.$props;if(e()){const{paused:e}=this.a.$state;this.Wd=!e(),this.a.remote.pause(t)}}nb(t){this.Vd(this.Tb(t.detail),t)}Ec(t){const{seeking:e}=this.a.$state;(0,i.p)(e)||this.qa(this.Tb(t.detail),t);const s=t.detail;this.Ri(this.Tb(s),s,t);const{pauseWhileDragging:n}=this.$props;n()&&this.Wd&&(this.a.remote.play(t),this.Wd=!1)}o(t){const{dragging:e}=this.$state;!e()&&t.trigger&&this.Ec(t)}na(){const{currentTime:t}=this.a.$state;return this.Qi(t())}Ka(){const t=this.$props.step()/this.a.$state.duration()*100;return Number.isFinite(t)?t:1}Pb(){const t=this.$props.keyStep()/this.a.$state.duration()*100;return Number.isFinite(t)?t:1}Ob(t){return(0,y.r)(t,3)}K(){const{disabled:t}=this.$props,{canSeek:e}=this.a.$state;return t()||!e()}ia(){const{value:t}=this.$state;return Math.round(t())}ja(){const t=this.Tb(this.$state.value()),{duration:e}=this.a.$state;return Number.isFinite(t)?`${Qt(t)} out of ${Qt(e())}`:"live"}Tb(t){const{duration:e}=this.a.$state;return(0,y.r)(t/100*e(),5)}Qi(t){const{liveEdge:e,duration:s}=this.a.$state,i=Math.max(0,Math.min(1,e()?1:Math.min(t,s())/s()));return Number.isNaN(i)?0:Number.isFinite(i)?100*i:100}Ki(t){const e=this.Tb(t),{live:s,duration:i}=this.a.$state;return Number.isFinite(e)?(s()?e-i():e).toFixed(0):"LIVE"}Li(t,e){const s=this.Tb(t),{live:i,duration:n}=this.a.$state,a=i()?s-n():s;return Number.isFinite(s)?`${a<0?"-":""}${Ht(Math.abs(a),e)}`:"LIVE"}}var Ie=Object.defineProperty,Fe=Object.getOwnPropertyDescriptor,Re=(t,e,s,i)=>{for(var n,a=i>1?void 0:i?Fe(e,s):e,r=t.length-1;r>=0;r--)(n=t[r])&&(a=(i?n(e,s,a):n(a))||a);return i&&a&&Ie(e,s,a),a};class Ve extends i.C{constructor(){super(...arguments),this.La=null,this.R=[],this.Gc=(0,i.f)(null),this._=(0,i.f)([]),this.Ub=(0,i.f)(-1),this.Hc=(0,i.f)(-1),this.Zd=0,this.Xi=(0,i.I)((t=>{let e,s=this._(),{clipStartTime:i}=this.a.$state,n=i(),a=this.Hk(s);for(let i=this.Zd;i<this.R.length;i++)if(e=this.ae(s[i],t,n,a),this.R[i]?.style.setProperty("--chapter-progress",e+"%"),e<100){this.Zd=i;break}})),this.Yi=(0,i.o)(this.Zi.bind(this)),this.$i=V((()=>{const t=(0,i.p)(this.Gc);this.scope&&t&&t.cues.length&&(this._.set(this._i(t.cues)),this.Ub.set(0),this.Zd=0)}),150,!0)}static{this.props={disabled:!1}}get cues(){return this._()}get activeCue(){return this._()[this.Ub()]||null}get activePointerCue(){return this._()[this.Hc()]||null}onSetup(){this.a=(0,g.u)(),this.Xd=(0,i.J)(De.state)}onAttach(t){(0,o.w)(this.a.textTracks,"chapters",this.Kf.bind(this)),(0,i.g)(this.wo.bind(this))}onConnect(){(0,i.q)((()=>this.H.bind(this)))}onDestroy(){this.Kf(null)}setRefs(t){if(this.R=t,this.Yd?.dispose(),1===this.R.length){const t=this.R[0];t.style.width="100%",t.style.setProperty("--chapter-fill","var(--slider-fill)"),t.style.setProperty("--chapter-progress","var(--slider-progress)")}else this.R.length>0&&(0,i.e)((()=>this.Si()),this.Yd=(0,i.r)())}Kf(t){(0,i.p)(this.Gc)!==t&&(this.H(),this.Gc.set(t))}H(){this.R=[],this._.set([]),this.Ub.set(-1),this.Hc.set(-1),this.Zd=0,this.Yd?.dispose()}Si(){this.R.length&&(0,i.g)(this.Fo.bind(this))}Fo(){const{hidden:t}=this.Xd;t()||((0,i.g)(this.Ti.bind(this)),(0,i.g)(this.Ui.bind(this)),(0,i.g)(this.Vi.bind(this)),(0,i.g)(this.Wi.bind(this)))}Ti(){const t=this._();if(!t.length)return;let e,{clipStartTime:s,clipEndTime:i}=this.a.$state,n=s(),a=(i()||t[t.length-1].endTime)-n,r=100;for(let s=0;s<t.length;s++)if(e=t[s],this.R[s]){const i=s===t.length-1?r:(0,y.r)((e.endTime-Math.max(n,e.startTime))/a*100,3);this.R[s].style.width=i+"%",r-=i}}Ui(){let{liveEdge:t,clipStartTime:e,duration:s}=this.a.$state,{fillPercent:n,value:a}=this.Xd,r=this._(),o=t(),h=(0,i.p)(this.Ub),c=r[h],l=o?this._.length-1:this.Lf(c&&c.startTime/s()*100<=(0,i.p)(a)?h:0,n());o||!c?this.$d(0,r.length,"100%"):l>h?this.$d(h,l,"100%"):l<h&&this.$d(l+1,h+1,"0%");const u=o?"100%":this.ae(r[l],n(),e(),this.Hk(r))+"%";this.Mf(this.R[l],u),this.Ub.set(l)}Vi(){let{pointing:t,pointerPercent:e}=this.Xd;if(!t())return void this.Hc.set(-1);const s=this.Lf(0,e());this.Hc.set(s)}$d(t,e,s){for(let i=t;i<e;i++)this.Mf(this.R[i],s)}Mf(t,e){t&&t.style.setProperty("--chapter-fill",e)}Lf(t,e){let s=0,i=this._();if(0===e)return 0;if(100===e)return i.length-1;let{clipStartTime:n}=this.a.$state,a=n(),r=this.Hk(i);for(let n=t;n<i.length;n++)if(s=this.ae(i[n],e,a,r),s>=0&&s<100)return n;return 0}Wi(){this.Xi(this.Yi())}Zi(){const{bufferedEnd:t,duration:e}=this.a.$state;return 100*(0,y.r)(Math.min(t()/Math.max(e(),1),1),3)}Hk(t){const{clipEndTime:e}=this.a.$state,s=e();return s>0?s:t[t.length-1]?.endTime||0}ae(t,e,s,i){if(0===this._().length)return 0;const n=i-s,a=Math.max(0,t.startTime-s),r=Math.min(i,t.endTime)-s,o=a/n,h=100*o,c=100*Math.min(1,o+(r-a)/n);return Math.max(0,(0,y.r)(e>=c?100:(e-h)/(c-h)*100,3))}_i(t){let e=[],{clipStartTime:s,clipEndTime:i,duration:n}=this.a.$state,a=s(),r=i()||1/0;const o=(t=t.filter((t=>t.startTime<=r&&t.endTime>=a)))[0];o&&o.startTime>a&&e.push(new window.VTTCue(a,o.startTime,""));for(let s=0;s<t.length-1;s++){const i=t[s],n=t[s+1];if(e.push(i),n){const t=n.startTime-i.endTime;t>0&&e.push(new window.VTTCue(i.endTime,i.endTime+t,""))}}const h=t[t.length-1];if(h){e.push(h);const t=n();t>=0&&t-h.endTime>1&&e.push(new window.VTTCue(h.endTime,n(),""))}return e}wo(){const{source:t}=this.a.$state;t(),this._d()}_d(){if(!this.scope)return;const{disabled:t}=this.$props;if(t())return this._.set([]),this.Ub.set(0),void(this.Zd=0);const e=this.Gc();if(e){const t=this.$i.bind(this);t(),(0,i.q)((0,i.l)(e,"add-cue",t)),(0,i.q)((0,i.l)(e,"remove-cue",t)),(0,i.g)(this.Fk.bind(this))}return this.La=this.aj(),this.La&&(0,i.g)(this.bj.bind(this)),()=>{this.La&&(this.La.textContent="",this.La=null)}}Fk(){this.a.$state.duration(),this.$i()}bj(){const t=this.activePointerCue||this.activeCue;this.La&&(this.La.textContent=t?.text||"")}cj(){let t=this.el;for(;t&&"slider"!==t.getAttribute("role");)t=t.parentElement;return t}aj(){const t=this.cj();return t?t.querySelector('[data-part="chapter-title"]'):null}}Re([i.$],Ve.prototype,"cues",1),Re([i.$],Ve.prototype,"activeCue",1),Re([i.$],Ve.prototype,"activePointerCue",1),Re([i.a5],Ve.prototype,"setRefs",1);const Ne=(0,i.W)(),He=["a[href]","[tabindex]","input","select","button"].map((t=>`${t}:not([aria-hidden='true'])`)).join(","),Qe=new Set(["Escape","Tab","ArrowUp","ArrowDown","Home","PageUp","End","PageDown","Enter"," "]);class Ke{constructor(t){this.j=t,this.ka=-1,this.xa=null,this.da=[]}get r(){return this.da}Nf(t){(0,i.l)(t,"focus",this.Lb.bind(this)),this.xa=t,(0,i.q)((()=>{this.xa=null}))}zc(){this.xa&&(this.ea(),(0,i.l)(this.xa,"keyup",this.zb.bind(this)),(0,i.l)(this.xa,"keydown",this.Ab.bind(this)),(0,i.q)((()=>{this.ka=-1,this.da=[]})))}ea(){this.ka=0,this.da=this.dj()}Of(t=this.Pf()){const e=this.da[t];e&&requestAnimationFrame((()=>{requestAnimationFrame((()=>{e.scrollIntoView({block:"center"})}))}))}Ao(t=!0){const e=this.Pf();this.qb(e>=0?e:0,t)}qb(t,e=!0){this.ka=t,this.da[t]?(this.da[t].focus({preventScroll:!0}),e&&this.Of(t)):this.xa?.focus({preventScroll:!0})}Pf(){return this.da.findIndex((t=>document.activeElement===t||"menuitemradio"===t.getAttribute("role")&&"true"===t.getAttribute("aria-checked")))}Lb(){this.ka>=0||(this.ea(),this.Ao())}zb(t){Qe.has(t.key)&&(t.stopPropagation(),t.preventDefault())}Ab(t){if(Qe.has(t.key))switch(t.stopPropagation(),t.preventDefault(),t.key){case"Escape":this.j.fj(t);break;case"Tab":this.qb(this.be(t.shiftKey?-1:1));break;case"ArrowUp":this.qb(this.be(-1));break;case"ArrowDown":this.qb(this.be(1));break;case"Home":case"PageUp":this.qb(0);break;case"End":case"PageDown":this.qb(this.da.length-1)}}be(t){let e=this.ka;do{e=(e+t+this.da.length)%this.da.length}while(null===this.da[e]?.offsetParent);return e}dj(){if(!this.xa)return[];const t=this.xa.querySelectorAll(He),e=[],s=t=>"menu"===t.getAttribute("role");for(const i of t)(0,r.i)(i)&&null!==i.offsetParent&&(0,r.q)(this.xa,i,s)&&e.push(i);return e}}var We=Object.defineProperty,Be=Object.getOwnPropertyDescriptor,ze=(t,e,s,i)=>{for(var n,a=i>1?void 0:i?Be(e,s):e,r=t.length-1;r>=0;r--)(n=t[r])&&(a=(i?n(e,s,a):n(a))||a);return i&&a&&We(e,s,a),a};let Ge=0;class Ue extends i.C{constructor(){super(),this.L=(0,i.f)(!1),this.Fc=(0,i.f)(!1),this.C=(0,i.f)(null),this.u=(0,i.f)(null),this.Qf=(0,i.f)(!1),this.Vb=new Set,this.Ic=null,this.Qn=!1,this.xo=!1,this.rj=this.sj.bind(this),this.zo=!1,this.pj=this.tj.bind(this),this.qj=this.uj.bind(this),this.O=(0,i.I)((()=>{const t=(0,i.p)(this.u);if(!t)return;let e=0,s=getComputedStyle(t),n=[...t.children];for(const t of["paddingTop","paddingBottom","borderTopWidth","borderBottomWidth"])e+=parseFloat(s[t])||0;for(const t of n)if((0,r.i)(t)&&"contents"===t.style.display)n.push(...t.children);else if(3===t.nodeType)e+=parseFloat(getComputedStyle(t).fontSize);else if((0,r.i)(t)){if(!(0,r.v)(t))continue;const s=getComputedStyle(t);e+=t.offsetHeight+(parseFloat(s.marginTop)||0)+(parseFloat(s.marginBottom)||0)}(0,i.a)(t,"--menu-height",e+"px")})),this.yo=!1;const{showDelay:t}=this.$props;this.Jc=new Bt({C:this.C,u:this.u,yf:t,zc:(t,e,s)=>{(0,r.o)(t,(t=>{this.L()?s(t):e(t)}));const i=this.gj();i&&(0,r.o)(i,(t=>{t.stopPropagation(),s(t)}))},B:this.hj.bind(this)})}static{this.props={showDelay:0}}get triggerElement(){return this.C()}get contentElement(){return this.u()}get isSubmenu(){return!!this.ee}onSetup(){this.a=(0,g.u)();const t=++Ge;this.ce=`media-menu-${t}`,this.de=`media-menu-button-${t}`,this.rb=new Ke({fj:this.close.bind(this)}),(0,i.a8)(Ne)&&(this.ee=(0,i.u)(Ne)),this.mo(),this.setAttributes({"data-open":this.L,"data-root":!this.isSubmenu,"data-submenu":this.isSubmenu,"data-disabled":this.K.bind(this)}),(0,i.X)(Ne,{jj:this.C,L:this.L,Wb:(0,i.f)(""),no:!!this.ee,Ma:this.Ma.bind(this),fe:this.fe.bind(this),ge:this.ge.bind(this),he:this.he.bind(this),ie:this.ie.bind(this),je:this.je.bind(this)})}onAttach(t){t.style.setProperty("display","contents")}onConnect(t){(0,i.g)(this.kj.bind(this)),this.isSubmenu&&this.ee?.je(this)}onDestroy(){this.C.set(null),this.u.set(null),this.Ic=null}mo(){let t=-1,e=(0,i.a8)(ge)?(0,i.u)(ge):null;(0,i.X)(ge,{onDragStart:()=>{e?.onDragStart?.(),window.clearTimeout(t),t=-1,this.Qn=!0},onDragEnd:()=>{e?.onDragEnd?.(),t=window.setTimeout((()=>{this.Qn=!1,t=-1}),300)}})}kj(){const t=this.lj();this.isSubmenu||this.O(),this.Rf(t),t&&((0,i.g)((()=>{const{height:t}=this.a.$state,e=this.u();e&&(0,i.a)(e,"--player-height",t()+"px")})),this.rb.zc(),this.listen("pointerup",this.mj.bind(this)),(0,i.l)(window,"pointerup",this.nj.bind(this)))}fe(t){const e=t.el,s=this.isSubmenu,n=te(this.K.bind(this));(0,r.s)(e,"tabindex",s?"-1":"0"),(0,r.s)(e,"role",s?"menuitem":"button"),(0,i.s)(e,"id",this.de),(0,i.s)(e,"aria-haspopup","menu"),(0,i.s)(e,"aria-expanded","false"),(0,i.s)(e,"data-root",!this.isSubmenu),(0,i.s)(e,"data-submenu",this.isSubmenu),(0,i.g)((()=>{(0,i.s)(e,"data-open",this.L()),(0,i.s)(e,"aria-disabled",n())})),this.C.set(e),(0,i.q)((()=>{this.C.set(null)}))}ge(t){const e=t.el;if(e.style.setProperty("display","none"),(0,i.s)(e,"id",this.ce),(0,r.s)(e,"role","menu"),(0,r.s)(e,"tabindex","-1"),(0,i.s)(e,"data-root",!this.isSubmenu),(0,i.s)(e,"data-submenu",this.isSubmenu),this.u.set(e),(0,i.q)((()=>this.u.set(null))),(0,i.g)((()=>(0,i.s)(e,"data-open",this.L()))),this.rb.Nf(e),this.Rf(!1),!this.isSubmenu){const e=this.Xm.bind(this);t.listen("transitionstart",e),t.listen("transitionend",e),t.listen("animationend",this.O),t.listen("vds-menu-resize",this.O)}}he(t){this.Ic=t}Rf(t){const e=(0,i.p)(this.u);e&&(0,i.s)(e,"aria-hidden",(0,i.a6)(!t))}ie(t){this.Qf.set(t)}hj(t,e){if(this.xo=(0,i.P)(e),e?.stopPropagation(),this.L()===t)return;if(this.K())return void(t&&this.Jc.hide(e));this.el?.dispatchEvent(new Event("vds-menu-resize",{bubbles:!0,composed:!0}));const s=this.C(),n=this.u();if(s&&((0,i.s)(s,"aria-controls",t&&this.ce),(0,i.s)(s,"aria-expanded",(0,i.a6)(t))),n&&(0,i.s)(n,"aria-labelledby",t&&this.de),this.L.set(t),this.oj(e),(0,i.V)(),this.xo){t?n?.focus():s?.focus();for(const t of[this.el,n])t&&t.setAttribute("data-keyboard","")}else for(const t of[this.el,n])t&&t.removeAttribute("data-keyboard");if(this.dispatch(t?"open":"close",{trigger:e}),t)this.isSubmenu||this.a.activeMenu===this||(this.a.activeMenu?.close(e),this.a.activeMenu=this),this.Ic?.ke?.(e);else{if(this.isSubmenu)for(const t of this.Vb)t.close(e);else this.a.activeMenu=null;this.Ic?.Tj?.(e)}t&&requestAnimationFrame(this.Bo.bind(this))}Bo(){this.yo||this.zo||(this.rb.ea(),this.xo?this.rb.Ao():this.rb.Of())}lj(){return!this.K()&&this.L()}K(){return this.Fc()||this.Qf()}Ma(t){this.Fc.set(t)}mj(t){const e=this.u();this.Qn||e&&(0,r.t)(e,t)||t.stopPropagation()}nj(t){const e=this.u();this.Qn||e&&(0,r.t)(e,t)||this.close(t)}gj(){const t=this.el?.querySelector('[data-part="close-target"]');return this.el&&t&&(0,r.q)(this.el,t,(t=>"menu"===t.getAttribute("role")))?t:null}oj(t){this.isSubmenu||(this.L()?this.a.remote.pauseControls(t):this.a.remote.resumeControls(t))}je(t){this.Vb.add(t),(0,i.l)(t,"open",this.pj),(0,i.l)(t,"close",this.qj),(0,i.q)(this.rj)}sj(t){this.Vb.delete(t)}tj(t){this.zo=!0;const e=this.u();this.isSubmenu&&this.triggerElement?.setAttribute("aria-hidden","true");for(const e of this.Vb)if(e!==t.target)for(const t of[e.el,e.triggerElement])t?.setAttribute("aria-hidden","true");if(e){const s=t.target.el;for(const t of e.children)t.contains(s)?t.setAttribute("data-open",""):t!==s&&t.setAttribute("data-hidden","")}}uj(t){this.zo=!1;const e=this.u();this.isSubmenu&&this.triggerElement?.setAttribute("aria-hidden","false");for(const t of this.Vb)for(const e of[t.el,t.triggerElement])e?.setAttribute("aria-hidden","false");if(e)for(const t of e.children)t.removeAttribute("data-open"),t.removeAttribute("data-hidden")}Xm(t){const e=this.u();e&&"height"===t.propertyName&&(this.yo="transitionstart"===t.type,(0,i.s)(e,"data-transition",this.yo?"height":null),this.L()&&this.Bo())}open(t){(0,i.p)(this.L)||(this.Jc.show(t),(0,i.V)())}close(t){(0,i.p)(this.L)&&(this.Jc.hide(t),(0,i.V)())}}ze([i.$],Ue.prototype,"triggerElement",1),ze([i.$],Ue.prototype,"contentElement",1),ze([i.$],Ue.prototype,"isSubmenu",1),ze([i.a5],Ue.prototype,"open",1),ze([i.a5],Ue.prototype,"close",1);var Xe=Object.defineProperty,Je=Object.getOwnPropertyDescriptor;class _e extends i.C{constructor(){super(),this.zn=(0,i.f)(null),new wt}static{this.props={disabled:!1}}get expanded(){return this.l?.L()??!1}onSetup(){this.l=(0,i.u)(Ne)}onAttach(t){this.l.fe(this),(0,i.g)(this.Qb.bind(this)),(0,r.s)(t,"type","button")}onConnect(t){(0,i.g)(this.An.bind(this)),this.vf();const e=new MutationObserver(this.vf.bind(this));e.observe(t,{attributeFilter:["data-part"],childList:!0,subtree:!0}),(0,i.q)((()=>e.disconnect())),(0,r.o)(t,(t=>{this.dispatch("select",{trigger:t})}))}Qb(){this.l.ie(this.$props.disabled())}An(){const t=this.zn();t&&(0,i.g)((()=>{const e=this.l.Wb();e&&(t.textContent=e)}))}vf(){const t=this.el?.querySelector('[data-part="hint"]');this.zn.set(t??null)}}((t,e,s,i)=>{for(var n,a=Je(e,s),r=t.length-1;r>=0;r--)(n=t[r])&&(a=n(e,s,a)||a);a&&Xe(e,s,a)})([i.$],_e.prototype,"expanded");class Ye extends i.C{constructor(){super(...arguments),this.A=null}static{this.props={container:null,disabled:!1}}onSetup(){this.a=(0,g.u)(),(0,i.X)(Ze,{Ja:this.vj.bind(this)})}onAttach(t){t.style.setProperty("display","contents")}onConnect(t){}onDestroy(){this.A?.remove(),this.A=null}vj(t){this.Tf(!1),this.A=t,(0,r.r)((()=>{(0,r.r)((()=>{this.connectScope&&(0,i.g)(this.Qb.bind(this))}))}))}Qb(){const{fullscreen:t}=this.a.$state,{disabled:e}=this.$props,s=e();this.Tf("fullscreen"===s?!t():!s)}Tf(t){if(!this.A)return;let e=this.wj(this.$props.container());if(!e)return;const s=this.A.parentElement===e;(0,i.s)(this.A,"data-portal",t),t?s||(this.A.remove(),e.append(this.A)):s&&this.A.parentElement===e&&(this.A.remove(),this.el?.append(this.A))}wj(t){return(0,r.i)(t)?t:t?document.querySelector(t):document.body}}const Ze=(0,i.W)();class ts extends i.C{static{this.props={placement:null,offset:0,alignOffset:0}}constructor(){super(),new wt;const{placement:t}=this.$props;this.setAttributes({"data-placement":t})}onAttach(t){if(this.l=(0,i.u)(Ne),this.l.ge(this),(0,i.a8)(Ze)){const e=(0,i.u)(Ze);e&&((0,i.X)(Ze,null),e.Ja(t),(0,i.q)((()=>e.Ja(null))))}}onConnect(t){(0,i.g)(this.Nd.bind(this))}Nd(){if(!this.el)return;const t=this.$props.placement();if(t){Object.assign(this.el.style,{position:"absolute",top:0,left:0,width:"max-content"});const{offset:e,alignOffset:s}=this.$props;return(0,r.m)(this.el,this.Cc(),t,{offsetVarName:"media-menu",xOffset:s(),yOffset:e()})}this.el.removeAttribute("style"),this.el.style.display="none"}Cc(){return this.l.jj()}}const es=(0,i.W)();class ss extends i.a3{constructor(){super(...arguments),this.sb=new Set,this.la=(0,i.f)(""),this.d=null,this.Aj=this.B.bind(this)}get xj(){return Array.from(this.sb).map((t=>t.la()))}get value(){return this.la()}set value(t){this.B(t)}onSetup(){(0,i.X)(es,{add:this.yj.bind(this),remove:this.zj.bind(this)})}onAttach(t){(0,i.a8)(Ne)||(0,r.s)(t,"role","radiogroup"),this.setAttributes({value:this.la})}onDestroy(){this.sb.clear()}yj(t){this.sb.has(t)||(this.sb.add(t),t.Kc=this.Aj,t.Xb(t.la()===this.la()))}zj(t){t.Kc=null,this.sb.delete(t)}B(t,e){const s=(0,i.p)(this.la);if(!t||t===s)return;const n=this.Uf(s),a=this.Uf(t);n?.Xb(!1,e),a?.Xb(!0,e),this.la.set(t),this.o?.(t,e)}Uf(t){for(const e of this.sb)if(t===(0,i.p)(e.la))return e;return null}}var is=Object.defineProperty,ns=Object.getOwnPropertyDescriptor,as=(t,e,s,i)=>{for(var n,a=i>1?void 0:i?ns(e,s):e,r=t.length-1;r>=0;r--)(n=t[r])&&(a=(i?n(e,s,a):n(a))||a);return i&&a&&is(e,s,a),a};class rs extends i.C{static{this.props={value:""}}get values(){return this.d.xj}get value(){return this.d.value}set value(t){this.d.value=t}constructor(){super(),this.d=new ss,this.d.o=this.o.bind(this)}onSetup(){(0,i.g)(this.D.bind(this))}D(){this.d.value=this.$props.value()}o(t,e){const s=this.createEvent("change",{detail:t,trigger:e});this.dispatch(s)}}as([i.$],rs.prototype,"values",1),as([i.$],rs.prototype,"value",1);var os=Object.defineProperty,hs=Object.getOwnPropertyDescriptor;class cs extends i.C{constructor(){super(),this.Na=(0,i.f)(!1),this.d={la:this.$props.value,Xb:this.Xb.bind(this),Kc:null},new wt}static{this.props={value:""}}get checked(){return this.Na()}onSetup(){this.setAttributes({value:this.$props.value,"data-checked":this.Na,"aria-checked":te(this.Na)})}onAttach(t){const e=(0,i.a8)(Ne);(0,r.s)(t,"tabindex",e?"-1":"0"),(0,r.s)(t,"role",e?"menuitemradio":"radio"),(0,i.g)(this.D.bind(this))}onConnect(t){this.Bj(),(0,r.o)(t,this.v.bind(this)),(0,i.q)(this.ya.bind(this))}ya(){(0,i.e)((()=>{(0,i.u)(es).remove(this.d)}),this.connectScope)}Bj(){(0,i.u)(es).add(this.d)}D(){const{value:t}=this.$props,e=t();(0,i.p)(this.Na)&&this.d.Kc?.(e)}v(t){(0,i.p)(this.Na)||(this.B(!0,t),this.Cj(t),this.d.Kc?.((0,i.p)(this.$props.value),t))}Xb(t,e){(0,i.p)(this.Na)!==t&&this.B(t,e)}B(t,e){this.Na.set(t),this.dispatch("change",{detail:t,trigger:e})}Cj(t){this.dispatch("select",{trigger:t})}}((t,e,s,i)=>{for(var n,a=hs(e,s),r=t.length-1;r>=0;r--)(n=t[r])&&(a=n(e,s,a)||a);a&&os(e,s,a)})([i.$],cs.prototype,"checked");var ls=Object.defineProperty,us=Object.getOwnPropertyDescriptor,ds=(t,e,s,i)=>{for(var n,a=i>1?void 0:i?us(e,s):e,r=t.length-1;r>=0;r--)(n=t[r])&&(a=(i?n(e,s,a):n(a))||a);return i&&a&&ls(e,s,a),a};class ps extends i.C{constructor(){super(),this.z=(0,i.f)(null),this.J=(0,i.f)([]),this.d=new ss,this.d.o=this.o.bind(this)}static{this.props={thumbnails:null}}get value(){return this.d.value}get disabled(){return!this.J()?.length}onSetup(){this.a=(0,g.u)(),(0,i.a8)(Ne)&&(this.l=(0,i.u)(Ne));const{thumbnails:t}=this.$props;this.setAttributes({"data-thumbnails":()=>!!t()})}onAttach(t){this.l?.he({ke:this.ke.bind(this)})}getOptions(){const{clipStartTime:t,clipEndTime:e}=this.a.$state,s=t(),i=e()||1/0;return this.J().map(((t,e)=>({cue:t,value:e.toString(),label:t.text,startTime:Ht(Math.max(0,t.startTime-s)),duration:Qt(Math.min(i,t.endTime)-Math.max(s,t.startTime))})))}ke(){(0,i.p)((()=>this.jb()))}onConnect(t){(0,i.g)(this.jb.bind(this)),(0,i.g)(this.ma.bind(this)),(0,i.g)(this.tk.bind(this)),(0,o.w)(this.a.textTracks,"chapters",this.z.set)}tk(){const t=this.z();if(!t)return;const e=this.$i.bind(this,t);return e(),(0,i.l)(t,"add-cue",e),(0,i.l)(t,"remove-cue",e),()=>{this.J.set([])}}$i(t){const{clipStartTime:e,clipEndTime:s}=this.a.$state,i=e(),n=s()||1/0;this.J.set([...t.cues].filter((t=>t.startTime<=n&&t.endTime>=i)))}jb(){if(!this.l?.L())return;if(!this.z())return void(this.d.value="-1");const{realCurrentTime:t,clipStartTime:e,clipEndTime:s}=this.a.$state,n=e(),a=s()||1/0,h=t(),c=this.J().findIndex((t=>(0,o.b)(t,h)));this.d.value=c.toString(),c>=0&&(0,r.r)((()=>{if(!this.connectScope)return;const t=this.J()[c],e=this.el.querySelector("[aria-checked='true']"),s=Math.max(n,t.startTime),r=Math.min(a,t.endTime)-s,o=Math.max(0,h-s)/r*100;e&&(0,i.a)(e,"--progress",(0,y.r)(o,3)+"%")}))}ma(){this.l?.Ma(this.disabled)}o(t,e){if(this.disabled||!e)return;const s=+t,n=this.J(),{clipStartTime:a}=this.a.$state;(0,i.j)(s)&&n?.[s]&&(this.d.value=s.toString(),this.a.remote.seek(n[s].startTime-a(),e),this.dispatch("change",{detail:n[s],trigger:e}))}}ds([i.$],ps.prototype,"value",1),ds([i.$],ps.prototype,"disabled",1),ds([i.a5],ps.prototype,"getOptions",1);var gs=Object.defineProperty,fs=Object.getOwnPropertyDescriptor,ms=(t,e,s,i)=>{for(var n,a=i>1?void 0:i?fs(e,s):e,r=t.length-1;r>=0;r--)(n=t[r])&&(a=(i?n(e,s,a):n(a))||a);return i&&a&&gs(e,s,a),a};class bs extends i.C{static{this.props={emptyLabel:"Default"}}get value(){return this.d.value}get disabled(){const{audioTracks:t}=this.a.$state;return t().length<=1}constructor(){super(),this.d=new ss,this.d.o=this.o.bind(this)}onSetup(){this.a=(0,g.u)(),(0,i.a8)(Ne)&&(this.l=(0,i.u)(Ne))}onConnect(t){(0,i.g)(this.D.bind(this)),(0,i.g)(this.ma.bind(this)),(0,i.g)(this.Oa.bind(this))}getOptions(){const{audioTracks:t}=this.a.$state;return t().map((t=>({track:t,label:t.label,value:t.label.toLowerCase()})))}D(){this.d.value=this.na()}Oa(){const{emptyLabel:t}=this.$props,{audioTrack:e}=this.a.$state,s=e();this.l?.Wb.set(s?.label??t())}ma(){this.l?.Ma(this.disabled)}na(){const{audioTrack:t}=this.a.$state,e=t();return e?e.label.toLowerCase():""}o(t,e){if(this.disabled)return;const s=this.a.audioTracks.toArray().findIndex((e=>e.label.toLowerCase()===t));if(s>=0){const t=this.a.audioTracks[s];this.a.remote.changeAudioTrack(s,e),this.dispatch("change",{detail:t,trigger:e})}}}ms([i.$],bs.prototype,"value",1),ms([i.$],bs.prototype,"disabled",1),ms([i.a5],bs.prototype,"getOptions",1);var ys=Object.defineProperty,$s=Object.getOwnPropertyDescriptor,vs=(t,e,s,i)=>{for(var n,a=i>1?void 0:i?$s(e,s):e,r=t.length-1;r>=0;r--)(n=t[r])&&(a=(i?n(e,s,a):n(a))||a);return i&&a&&ys(e,s,a),a};const ws=[1,1.25,1.5,1.75,2,2.5,3,4];class ks extends i.C{static{this.props={normalLabel:"Disabled",gains:ws}}get value(){return this.d.value}get disabled(){const{gains:t}=this.$props,{canSetAudioGain:e}=this.a.$state;return!e()||0===t().length}constructor(){super(),this.d=new ss,this.d.o=this.o.bind(this)}onSetup(){this.a=(0,g.u)(),(0,i.a8)(Ne)&&(this.l=(0,i.u)(Ne))}onConnect(t){(0,i.g)(this.D.bind(this)),(0,i.g)(this.Oa.bind(this)),(0,i.g)(this.ma.bind(this))}getOptions(){const{gains:t,normalLabel:e}=this.$props;return t().map((t=>({label:1===t||null===t?e:String(100*t)+"%",value:t.toString()})))}D(){this.d.value=this.na()}Oa(){const{normalLabel:t}=this.$props,{audioGain:e}=this.a.$state,s=e();this.l?.Wb.set(1===s||null==s?t():String(100*s)+"%")}ma(){this.l?.Ma(this.disabled)}na(){const{audioGain:t}=this.a.$state;return t()?.toString()??"1"}o(t,e){if(this.disabled)return;const s=+t;this.a.remote.changeAudioGain(s,e),this.dispatch("change",{detail:s,trigger:e})}}vs([i.$],ks.prototype,"value",1),vs([i.$],ks.prototype,"disabled",1),vs([i.a5],ks.prototype,"getOptions",1);var Ts=Object.defineProperty,xs=Object.getOwnPropertyDescriptor,Ps=(t,e,s,i)=>{for(var n,a=i>1?void 0:i?xs(e,s):e,r=t.length-1;r>=0;r--)(n=t[r])&&(a=(i?n(e,s,a):n(a))||a);return i&&a&&Ts(e,s,a),a};class Ss extends i.C{static{this.props={offLabel:"Off"}}get value(){return this.d.value}get disabled(){const{hasCaptions:t}=this.a.$state;return!t()}constructor(){super(),this.d=new ss,this.d.o=this.o.bind(this)}onSetup(){this.a=(0,g.u)(),(0,i.a8)(Ne)&&(this.l=(0,i.u)(Ne))}onConnect(t){super.onConnect?.(t),(0,i.g)(this.D.bind(this)),(0,i.g)(this.ma.bind(this)),(0,i.g)(this.Oa.bind(this))}getOptions(){const{offLabel:t}=this.$props,{textTracks:e}=this.a.$state;return[{value:"off",label:t},...e().filter(o.i).map((t=>({track:t,label:t.label,value:this.xk(t)})))]}D(){this.d.value=this.na()}Oa(){const{offLabel:t}=this.$props,{textTrack:e}=this.a.$state,s=e();this.l?.Wb.set(s&&(0,o.i)(s)&&"showing"===s.mode?s.label:t())}ma(){this.l?.Ma(this.disabled)}na(){const{textTrack:t}=this.a.$state,e=t();return e&&(0,o.i)(e)&&"showing"===e.mode?this.xk(e):"off"}o(t,e){if(this.disabled)return;if("off"===t){const t=this.a.textTracks.selected;if(t){const s=this.a.textTracks.indexOf(t);this.a.remote.changeTextTrackMode(s,"disabled",e),this.dispatch("change",{detail:null,trigger:e})}return}const s=this.a.textTracks.toArray().findIndex((e=>this.xk(e)===t));if(s>=0){const t=this.a.textTracks[s];this.a.remote.changeTextTrackMode(s,"showing",e),this.dispatch("change",{detail:t,trigger:e})}}xk(t){return t.id+":"+t.kind+"-"+t.label.toLowerCase()}}Ps([i.$],Ss.prototype,"value",1),Ps([i.$],Ss.prototype,"disabled",1),Ps([i.a5],Ss.prototype,"getOptions",1);var Cs=Object.defineProperty,As=Object.getOwnPropertyDescriptor,Es=(t,e,s,i)=>{for(var n,a=i>1?void 0:i?As(e,s):e,r=t.length-1;r>=0;r--)(n=t[r])&&(a=(i?n(e,s,a):n(a))||a);return i&&a&&Cs(e,s,a),a};const qs=[.25,.5,.75,1,1.25,1.5,1.75,2];class js extends i.C{static{this.props={normalLabel:"Normal",rates:qs}}get value(){return this.d.value}get disabled(){const{rates:t}=this.$props,{canSetPlaybackRate:e}=this.a.$state;return!e()||0===t().length}constructor(){super(),this.d=new ss,this.d.o=this.o.bind(this)}onSetup(){this.a=(0,g.u)(),(0,i.a8)(Ne)&&(this.l=(0,i.u)(Ne))}onConnect(t){(0,i.g)(this.D.bind(this)),(0,i.g)(this.Oa.bind(this)),(0,i.g)(this.ma.bind(this))}getOptions(){const{rates:t,normalLabel:e}=this.$props;return t().map((t=>({label:1===t?e:t+"",value:t.toString()})))}D(){this.d.value=this.na()}Oa(){const{normalLabel:t}=this.$props,{playbackRate:e}=this.a.$state,s=e();this.l?.Wb.set(1===s?t():s+"")}ma(){this.l?.Ma(this.disabled)}na(){const{playbackRate:t}=this.a.$state;return t().toString()}o(t,e){if(this.disabled)return;const s=+t;this.a.remote.changePlaybackRate(s,e),this.dispatch("change",{detail:s,trigger:e})}}Es([i.$],js.prototype,"value",1),Es([i.$],js.prototype,"disabled",1),Es([i.a5],js.prototype,"getOptions",1);var Ls=Object.defineProperty,Os=Object.getOwnPropertyDescriptor,Ms=(t,e,s,i)=>{for(var n,a=i>1?void 0:i?Os(e,s):e,r=t.length-1;r>=0;r--)(n=t[r])&&(a=(i?n(e,s,a):n(a))||a);return i&&a&&Ls(e,s,a),a};class Ds extends i.C{constructor(){super(),this.Dj=(0,i.o)((()=>{const{sort:t}=this.$props,{qualities:e}=this.a.$state;return B(e(),"descending"===t())})),this.d=new ss,this.d.o=this.o.bind(this)}static{this.props={autoLabel:"Auto",hideBitrate:!1,sort:"descending"}}get value(){return this.d.value}get disabled(){const{canSetQuality:t,qualities:e}=this.a.$state;return!t()||e().length<=1}onSetup(){this.a=(0,g.u)(),(0,i.a8)(Ne)&&(this.l=(0,i.u)(Ne))}onConnect(t){(0,i.g)(this.D.bind(this)),(0,i.g)(this.ma.bind(this)),(0,i.g)(this.Oa.bind(this))}getOptions(){const{autoLabel:t,hideBitrate:e}=this.$props;return[{value:"auto",label:t},...this.Dj().map((t=>{const s=t.bitrate&&t.bitrate>=0?`${(0,y.r)(t.bitrate/1e6,2)} Mbps`:null;return{quality:t,label:t.height+"p",value:this.le(t),bitrate:()=>e()?null:s}}))]}D(){this.d.value=this.na()}Oa(){const{autoLabel:t}=this.$props,{autoQuality:e,quality:s}=this.a.$state,i=s()?s().height+"p":"";this.l?.Wb.set(e()?t()+(i?` (${i})`:""):i)}ma(){this.l?.Ma(this.disabled)}o(t,e){if(this.disabled)return;if("auto"===t)return this.a.remote.changeQuality(-1,e),void this.dispatch("change",{detail:"auto",trigger:e});const{qualities:s}=this.a.$state,n=(0,i.p)(s).findIndex((e=>this.le(e)===t));if(n>=0){const t=(0,i.p)(s)[n];this.a.remote.changeQuality(n,e),this.dispatch("change",{detail:t,trigger:e})}}na(){const{quality:t,autoQuality:e}=this.a.$state;if(e())return"auto";const s=t();return s?this.le(s):"auto"}le(t){return t.height+"_"+t.bitrate}}Ms([i.$],Ds.prototype,"value",1),Ms([i.$],Ds.prototype,"disabled",1),Ms([i.a5],Ds.prototype,"getOptions",1);class Is extends i.C{constructor(){super(...arguments),this.i=null,this.Pa=0,this.Vf=-1}static{this.props={disabled:!1,event:void 0,action:void 0}}onSetup(){this.a=(0,g.u)();const{event:t,action:e}=this.$props;this.setAttributes({event:t,action:e})}onAttach(t){t.setAttribute("data-media-gesture",""),t.style.setProperty("pointer-events","none")}onConnect(t){this.i=this.a.player.el?.querySelector("[data-media-provider]"),(0,i.g)(this.Ej.bind(this))}Ej(){let t=this.$props.event(),e=this.$props.disabled();this.i&&t&&!e&&(/^dbl/.test(t)&&(t=t.split(/^dbl/)[1]),("pointerup"===t||"pointerdown"===t)&&"coarse"===this.a.$state.pointer()&&(t="pointerup"===t?"touchend":"touchstart"),(0,i.l)(this.i,t,this.Fj.bind(this),{passive:!1}))}Fj(t){if(this.$props.disabled()||(0,i.O)(t)&&(0!==t.button||this.a.activeMenu)||(0,i.A)(t)&&this.a.activeMenu||(0,r.j)(t)||!this.Gj(t))return;t.MEDIA_GESTURE=!0,t.preventDefault();const e=(0,i.p)(this.$props.event),s=e?.startsWith("dbl");if(s){if(1===this.Pa)return queueMicrotask((()=>this.Wf(t))),clearTimeout(this.Vf),void(this.Pa=0)}else 0===this.Pa&&setTimeout((()=>{1===this.Pa&&this.Wf(t)}),250);0===this.Pa&&(this.Vf=window.setTimeout((()=>{this.Pa=0}),275)),this.Pa++}Wf(t){this.el.setAttribute("data-triggered",""),requestAnimationFrame((()=>{this.Hj()&&this.Ij((0,i.p)(this.$props.action),t),requestAnimationFrame((()=>{this.el.removeAttribute("data-triggered")}))}))}Gj(t){if(!this.el)return!1;if((0,i.O)(t)||(0,i.a9)(t)||(0,i.A)(t)){const e=(0,i.A)(t)?t.changedTouches[0]??t.touches[0]:void 0,s=e?.clientX??t.clientX,n=e?.clientY??t.clientY,a=this.el.getBoundingClientRect(),r=n>=a.top&&n<=a.bottom&&s>=a.left&&s<=a.right;return t.type.includes("leave")?!r:r}return!0}Hj(){const t=this.a.player.el.querySelectorAll("[data-media-gesture][data-triggered]");return Array.from(t).sort(((t,e)=>+getComputedStyle(e).zIndex-+getComputedStyle(t).zIndex))[0]===this.el}Ij(t,e){if(!t)return;const s=new i.D("will-trigger",{detail:t,cancelable:!0,trigger:e});if(this.dispatchEvent(s),s.defaultPrevented)return;const[n,a]=t.replace(/:([a-z])/,"-$1").split(":");t.includes(":fullscreen")?this.a.remote.toggleFullscreen("prefer-media",e):t.includes("seek:")?this.a.remote.seek((0,i.p)(this.a.$state.currentTime)+(+a||0),e):this.a.remote[(0,i.k)(n)](e),this.dispatch("trigger",{detail:t,trigger:e})}}class Fs{constructor(t){this.S=t,this.priority=10,this.z=null,this.sa=(0,i.c)()}attach(){}canRender(){return!0}detach(){this.sa.empty(),this.S.reset(),this.z=null}changeTrack(t){t&&this.z!==t&&(this.sa.empty(),t.readyState<2?(this.S.reset(),this.sa.add((0,i.l)(t,"load",(()=>this.Xf(t)),{once:!0}))):this.Xf(t),this.sa.add((0,i.l)(t,"add-cue",(t=>{this.S.addCue(t.detail)})),(0,i.l)(t,"remove-cue",(t=>{this.S.removeCue(t.detail)}))),this.z=t)}Xf(t){this.S.changeTrack({cues:[...t.cues],regions:[...t.regions]})}}class Rs extends i.C{constructor(){super(...arguments),this.Rn=-1}static{this.props={textDir:"ltr",exampleText:"Captions look like this."}}onSetup(){this.a=(0,g.u)(),this.setAttributes({"aria-hidden":te(this.lb.bind(this))})}onAttach(t){t.style.setProperty("pointer-events","none")}onConnect(t){const e=this.a.player;e&&(0,i.l)(e,"vds-font-change",this.Wn.bind(this)),this.S?(0,i.g)(this.Yf.bind(this)):s.e(3066).then(s.bind(s,3066)).then((e=>{this.connectScope&&(0,i.e)((()=>{this.W=e;const{CaptionsRenderer:s}=this.W;this.S=new s(t),this.Qa=new Fs(this.S),(0,i.g)(this.Yf.bind(this))}),this.connectScope)}))}onDestroy(){this.Qa&&(this.Qa.detach(),this.a.textRenderers.remove(this.Qa)),this.S?.destroy()}lb(){const{textTrack:t,remotePlaybackState:e}=this.a.$state,s=t();return this.a.$iosControls()||"connected"===e()||!s||!(0,o.i)(s)}Yf(){const{viewType:t}=this.a.$state;return"audio"===t()?this.Jj():this.Kj()}Jj(){return(0,i.g)(this._d.bind(this)),()=>{this.el.textContent=""}}_d(){if(this.lb())return;const{textTrack:t}=this.a.$state;this.Zf(),(0,i.l)(t(),"cue-change",this.Zf.bind(this)),(0,i.g)(this.Lj.bind(this))}Zf(){this.el.textContent="",this.Rn>=0&&this.Sn();const{realCurrentTime:t,textTrack:e}=this.a.$state,{renderVTTCueString:s}=this.W,n=(0,i.p)(t),a=(0,i.p)(e).activeCues;for(const t of a){const e=this.Tn(),i=this.Un();i.innerHTML=s(t,n),e.append(i),this.el.append(i)}}Lj(){const{realCurrentTime:t}=this.a.$state,{updateTimedVTTCueNodes:e}=this.W;e(this.el,t())}Kj(){return(0,i.g)(this.Mj.bind(this)),(0,i.g)(this.Nj.bind(this)),this.a.textRenderers.add(this.Qa),()=>{this.el.textContent="",this.Qa.detach(),this.a.textRenderers.remove(this.Qa)}}Mj(){this.S.dir=this.$props.textDir()}Nj(){if(this.lb())return;const{realCurrentTime:t,textTrack:e}=this.a.$state;this.S.currentTime=t(),this.Rn>=0&&e()?.activeCues[0]&&this.Sn()}Wn(){if(this.Rn>=0)return void this.Vn();const{textTrack:t}=this.a.$state;t()?.activeCues[0]?this.S?.update(!0):this.Xn()}Xn(){const t=this.Tn();(0,i.s)(t,"data-example","");const e=this.Un();(0,i.s)(e,"data-example",""),e.textContent=this.$props.exampleText(),t?.append(e),this.el?.append(t),this.el?.setAttribute("data-example",""),this.Vn()}Vn(){window.clearTimeout(this.Rn),this.Rn=window.setTimeout(this.Sn.bind(this),2500)}Sn(){this.el?.removeAttribute("data-example"),this.el?.querySelector("[data-example]")&&(this.el.textContent=""),this.Rn=-1}Tn(){const t=document.createElement("div");return(0,i.s)(t,"data-part","cue-display"),t}Un(){const t=document.createElement("div");return(0,i.s)(t,"data-part","cue"),t}}class Vs extends i.C{constructor(){super(...arguments),this.wn=""}static{this.props={src:null,alt:null,crossOrigin:null}}static{this.state=new i.U({img:null,src:null,alt:null,crossOrigin:null,loading:!0,error:null,hidden:!1})}onSetup(){this.a=(0,g.u)(),this.fd(),this.$k(),this.Hh(),this.ob()}onAttach(t){t.style.setProperty("pointer-events","none"),(0,i.g)(this.Ud.bind(this)),(0,i.g)(this.fd.bind(this)),(0,i.g)(this.$k.bind(this)),(0,i.g)(this.Hh.bind(this)),(0,i.g)(this.ob.bind(this));const{started:e}=this.a.$state;this.setAttributes({"data-visible":()=>!e()&&!this.$state.hidden(),"data-loading":this.Rb.bind(this),"data-error":this.wa.bind(this),"data-hidden":this.$state.hidden})}onConnect(t){(0,i.g)(this.Pk.bind(this)),(0,i.g)(this.Ea.bind(this))}wa(){const{error:t}=this.$state;return!(0,i.m)(t())}Pk(){const{canLoadPoster:t,poster:e}=this.a.$state;!t()&&e()&&(0,b.p)(e(),"preconnect")}ob(){const{src:t}=this.$props,{$iosControls:e}=this.a,{poster:s}=this.a.$state;this.el&&(0,i.s)(this.el,"display",e()?"none":null),this.$state.hidden.set(this.wa()||!(t()||s())||e())}Rb(){const{loading:t,hidden:e}=this.$state;return!e()&&t()}Ud(){const t=this.$state.img();t&&((0,i.l)(t,"load",this.lc.bind(this)),(0,i.l)(t,"error",this.U.bind(this)))}fd(){const{poster:t}=this.a.$props,{canLoadPoster:e,providedPoster:s,inferredPoster:i}=this.a.$state,n=this.$props.src()||"",a=n||t()||i();this.wn===s()&&s.set(n),this.$state.src.set(e()&&a.length?a:null),this.wn=n}$k(){const{src:t}=this.$props,{alt:e}=this.$state,{poster:s}=this.a.$state;e.set(t()||s()?this.$props.alt():null)}Hh(){const{crossOrigin:t}=this.$props,{crossOrigin:e}=this.$state,{crossOrigin:s,poster:i}=this.a.$state,n=null!==t()?t():s();e.set(/ytimg\.com|vimeo/.test(i()||"")?null:!0===n?"anonymous":n)}Ea(){const{loading:t,error:e}=this.$state,{canLoadPoster:s,poster:i}=this.a.$state;t.set(s()&&!!i()),e.set(null)}lc(){const{loading:t,error:e}=this.$state;t.set(!1),e.set(null)}U(t){const{loading:e,error:s}=this.$state;e.set(!1),s.set(t)}}class Ns extends i.C{constructor(){super(...arguments),this.cn=(0,i.f)(null),this.Co=(0,i.f)(!0),this.Do=(0,i.f)(!0)}static{this.props={type:"current",showHours:!1,padHours:null,padMinutes:null,remainder:!1,toggle:!1,hidden:!1}}static{this.state=new i.U({timeText:"",hidden:!1})}onSetup(){this.a=(0,g.u)(),this.ag();const{type:t}=this.$props;this.setAttributes({"data-type":t,"data-remainder":this.fn.bind(this)}),new de({callback:this.Eo.bind(this)}).attach(this)}onAttach(t){t.hasAttribute("role")||(0,i.g)(this.hn.bind(this)),(0,i.g)(this.ag.bind(this))}onConnect(t){(0,i.q)((0,r.p)(t,this.Co.set)),(0,i.g)(this.ob.bind(this)),(0,i.g)(this.Go.bind(this))}Eo(t){this.Do.set(t[0].isIntersecting)}ob(){const{hidden:t}=this.$props;this.$state.hidden.set(t()||!this.Co()||!this.Do())}Go(){this.$props.toggle()?this.el&&(0,r.o)(this.el,this.gn.bind(this)):this.cn.set(null)}ag(){const{hidden:t,timeText:e}=this.$state,{duration:s}=this.a.$state;if(t())return;const{type:i,padHours:n,padMinutes:a,showHours:r}=this.$props,o=this.Oj(i()),h=s(),c=this.fn();if(!Number.isFinite(o+h))return void e.set("LIVE");const l=Ht(c?Math.max(0,h-o):o,{padHrs:n(),padMins:a(),showHrs:r()});e.set((c?"-":"")+l)}hn(){if(!this.el)return;const{toggle:t}=this.$props;(0,i.s)(this.el,"role",t()?"timer":null),(0,i.s)(this.el,"tabindex",t()?0:null)}Oj(t){const{bufferedEnd:e,duration:s,currentTime:i}=this.a.$state;switch(t){case"buffered":return e();case"duration":return s();default:return i()}}fn(){return this.$props.remainder()&&!1!==this.cn()}gn(t){t.preventDefault(),null!==this.cn()?this.cn.set((t=>!t)):this.cn.set(!this.$props.remainder())}}},6450:(t,e,s)=>{s.d(e,{Q:()=>i});const i={Ya:Symbol(0),Za:Symbol(0)}},8327:(t,e,s)=>{s.d(e,{a:()=>a,b:()=>c,g:()=>l,l:()=>h,p:()=>r});var i=s(8080),n=s(4126);function a(t,e){const s=new URLSearchParams;for(const t of Object.keys(e))s.set(t,e[t]+"");return t+"?"+s.toString()}function r(t,e="preconnect"){const s=document.querySelector(`link[href="${t}"]`);if(!(0,i.m)(s))return!0;const n=document.createElement("link");return n.rel=e,n.href=t,n.crossOrigin="true",document.head.append(n),!0}const o={};function h(t){if(o[t])return o[t].promise;const e=(0,i.n)(),s=document.querySelector(`script[src="${t}"]`);if(!(0,i.m)(s))return e.resolve(),e.promise;const n=document.createElement("script");return n.src=t,n.onload=()=>{e.resolve(),delete o[t]},n.onerror=()=>{e.reject(),delete o[t]},setTimeout((()=>document.head.append(n)),0),e.promise}function c(t){return"use-credentials"===t?"include":(0,i.i)(t)?"same-origin":void 0}function l({title:t,src:e,download:s}){const a=(0,i.b)(s)||""===s?e.src:(0,i.i)(s)?s:s?.url;return function({url:t,src:e,download:s}){return(0,i.i)(t)&&(s&&!0!==s||(0,n.i)(e)||(0,n.a)(e))}({url:a,src:e,download:s})?{url:a,name:!(0,i.b)(s)&&!(0,i.i)(s)&&s?.filename||t.toLowerCase()||"media"}:null}},7651:(t,e,s)=>{s.d(e,{L:()=>i});const i={oa:Symbol(0),Yb:Symbol(0),H:Symbol(0),pa:Symbol(0),Zb:Symbol(0),Mc:Symbol(0),ne:Symbol(0),oe:Symbol(0),pe:Symbol(0)}},6817:(t,e,s)=>{s.d(e,{T:()=>d,a:()=>a,b:()=>r,c:()=>h,i:()=>g,w:()=>o});var i=s(8080),n=s(8327);const a={al:Symbol(0),M:Symbol(0),Ta:Symbol(0),P:Symbol(0),Ua:Symbol(0),T:Symbol(0),te:Symbol(0)};function r(t,e){return e>=t.startTime&&e<t.endTime}function o(t,e,s){let n=null,a=(0,i.B)();function r(){const r=(0,i.i)(e)?[e]:e,o=t.toArray().find((t=>r.includes(t.kind)&&"showing"===t.mode));if(o!==n){if(!o)return s(null),void(n=null);2==o.readyState?s(o):(s(null),(0,i.e)((()=>{const t=(0,i.l)(o,"load",(()=>{s(o),t()}),{once:!0})}),a)),n=o}}return r(),(0,i.l)(t,"mode-change",r)}function h(t,e,s){o(t,e,(t=>{if(!t)return void s("");const e=()=>{const e=t?.activeCues[0];s(e?.text||"")};e(),(0,i.l)(t,"cue-change",e)}))}var c,l,u;class d extends i.T{constructor(t){super(),this.id="",this.label="",this.language="",this.default=!1,this.P=!1,this.Va=0,this.I="disabled",this.ue={},this.ac=[],this.J=[],this.Wa=[],this[c]=0,this[l]=null,this[u]=null;for(const e of Object.keys(t))this[e]=t[e];this.type||(this.type="vtt"),t.content?this.ap(t):t.src||(this[a.M]=2)}static createId(t){return`vds-${t.type}-${t.kind}-${t.src??t.label??"?"}`}get metadata(){return this.ue}get regions(){return this.ac}get cues(){return this.J}get activeCues(){return this.Wa}get readyState(){return this[a.M]}get mode(){return this.I}set mode(t){this.setMode(t)}addCue(t,e){let s=0,n=this.J.length;for(s=0;s<n&&!(t.endTime<=this.J[s].startTime);s++);s===n?this.J.push(t):this.J.splice(s,0,t),t instanceof TextTrackCue||this[a.T]?.track.addCue(t),this.dispatchEvent(new i.D("add-cue",{detail:t,trigger:e})),r(t,this.Va)&&this[a.Ta](this.Va,e)}removeCue(t,e){const s=this.J.indexOf(t);if(s>=0){const n=this.Wa.includes(t);this.J.splice(s,1),this[a.T]?.track.removeCue(t),this.dispatchEvent(new i.D("remove-cue",{detail:t,trigger:e})),n&&this[a.Ta](this.Va,e)}}setMode(t,e){this.I!==t&&(this.I=t,"disabled"===t?(this.Wa=[],this.we()):2===this.readyState?this[a.Ta](this.Va,e):this.xe(),this.dispatchEvent(new i.D("mode-change",{detail:this,trigger:e})),this[a.Ua]?.())}[(c=a.M,l=a.Ua,u=a.T,a.Ta)](t,e){if(this.Va=t,"disabled"===this.mode||!this.J.length)return;const s=[];for(let e=0,i=this.J.length;e<i;e++){const i=this.J[e];r(i,t)&&s.push(i)}let i=s.length!==this.Wa.length;if(!i)for(let t=0;t<s.length;t++)if(!this.Wa.includes(s[t])){i=!0;break}this.Wa=s,i&&this.we(e)}[a.P](){this.P=!0,"disabled"!==this.I&&this.xe()}ap(t){s.e(3066).then(s.bind(s,3066)).then((({parseText:e,VTTCue:s,VTTRegion:n})=>{(0,i.i)(t.content)&&"json"!==t.type?e(t.content,{type:t.type}).then((({cues:t,regions:e})=>{this.J=t,this.ac=e,this.jc()})):(this.ve(t.content,s,n),3!==this.readyState&&this.jc())}))}async xe(){if(this.P&&!(this[a.M]>0))if(this[a.M]=1,this.dispatchEvent(new i.D("load-start")),this.src)try{const{parseResponse:t,VTTCue:e,VTTRegion:i}=await s.e(3066).then(s.bind(s,3066)),r=this[a.al]?.(),o=fetch(this.src,{headers:"json"===this.type?{"Content-Type":"application/json"}:void 0,credentials:(0,n.b)(r)});if("json"===this.type)this.ve(await(await o).text(),e,i);else{const{errors:e,metadata:s,regions:i,cues:n}=await t(o,{type:this.type,encoding:this.encoding});if(0===e[0]?.code)throw e[0];this.ue=s,this.ac=i,this.J=n}this.jc()}catch(t){this.$o(t)}else this.jc()}jc(){if(this[a.M]=2,!this.src||"vtt"!==this.type){const t=this[a.T];if(t&&!t.managed)for(const e of this.J)t.track.addCue(e)}const t=new i.D("load");this[a.Ta](this.Va,t),this.dispatchEvent(t)}$o(t){this[a.M]=3,this.dispatchEvent(new i.D("error",{detail:t}))}ve(t,e,s){try{const{regions:n,cues:a}=function(t,e,s){const n=(0,i.i)(t)?JSON.parse(t):t;let a=[],r=[];return n.regions&&s&&(a=n.regions.map((t=>Object.assign(new s,t)))),(n.cues||(0,i.v)(n))&&(r=((0,i.v)(n)?n:n.cues).filter((t=>(0,i.j)(t.startTime)&&(0,i.j)(t.endTime))).map((t=>Object.assign(new e(0,0,""),t)))),{regions:a,cues:r}}(t,e,s);this.ac=n,this.J=a}catch(t){this.$o(t)}}we(t){this.dispatchEvent(new i.D("cue-change",{trigger:t}))}}const p=/captions|subtitles/;function g(t){return p.test(t.kind)}},4126:(t,e,s)=>{s.d(e,{I:()=>o,a:()=>C,b:()=>a,c:()=>u,d:()=>q,e:()=>f,f:()=>c,g:()=>d,h:()=>p,i:()=>S,j:()=>g,p:()=>A,q:()=>E,r:()=>j,s:()=>m,t:()=>l,u:()=>b,v:()=>h,w:()=>r});var i=s(8080);const n=navigator?.userAgent.toLowerCase()||"",a=/iphone|ipad|ipod|ios|crios|fxios/i.test(n),r=/(iphone|ipod)/gi.test(navigator?.platform||""),o=!!window.chrome,h=!!window.safari||a;function c(){return!(0,i.h)(window.screen.orientation)&&!(0,i.h)(window.screen.orientation.lock)&&(0,i.w)(screen.orientation.unlock)}function l(t,e){return t||(t=document.createElement("audio")),t.canPlayType(e).length>0}function u(t,e){return t||(t=document.createElement("video")),t.canPlayType(e).length>0}function d(t){return t||(t=document.createElement("video")),t.canPlayType("application/vnd.apple.mpegurl").length>0}function p(t){return!!document.pictureInPictureEnabled&&!t?.disablePictureInPicture}function g(t){return(0,i.w)(t?.webkitSupportsPresentationMode)&&(0,i.w)(t?.webkitSetPresentationMode)}async function f(){const t=document.createElement("video");return t.volume=.5,await(0,i.x)(0),.5===t.volume}function m(){const t=window?.ManagedMediaSource??window?.MediaSource??window?.WebKitMediaSource;if((0,i.h)(t))return!1;const e=t&&(0,i.w)(t.isTypeSupported)&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),s=window?.SourceBuffer??window?.WebKitSourceBuffer,n=(0,i.h)(s)||!(0,i.h)(s.prototype)&&(0,i.w)(s.prototype.appendBuffer)&&(0,i.w)(s.prototype.remove);return!!e&&!!n}function b(){return m()}const y=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,$=new Set(["audio/mpeg","audio/ogg","audio/3gp","audio/mp4","audio/webm","audio/flac"]),v=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,w=new Set(["video/mp4","video/webm","video/3gp","video/ogg","video/avi","video/mpeg"]),k=/\.(m3u8)($|\?)/i,T=/\.(mpd)($|\?)/i,x=new Set(["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"]),P=new Set(["application/dash+xml"]);function S({src:t,type:e}){return(0,i.i)(t)?y.test(t)||$.has(e)||t.startsWith("blob:")&&"audio/object"===e:"audio/object"===e}function C(t){return(0,i.i)(t.src)?v.test(t.src)||w.has(t.type)||t.src.startsWith("blob:")&&"video/object"===t.type||A(t)&&d():"video/object"===t.type}function A({src:t,type:e}){return(0,i.i)(t)&&k.test(t)||x.has(e)}function E({src:t,type:e}){return(0,i.i)(t)&&T.test(t)||P.has(e)}function q(t){return(0,i.i)(t.src)&&(S(t)||C(t)||A(t))}function j(t){return void 0!==window.MediaStream&&t instanceof window.MediaStream}},4729:(t,e,s)=>{function i(t){return t instanceof Error?t:Error("string"==typeof t?t:JSON.stringify(t))}function n(t,e){if(!t)throw Error(e||"Assertion failed.")}s.d(e,{a:()=>n,c:()=>i})},8080:(t,e,s)=>{s.d(e,{$:()=>Dt,A:()=>lt,B:()=>k,C:()=>Mt,D:()=>at,E:()=>Ve,F:()=>Ne,G:()=>bt,H:()=>Ze,I:()=>Xt,J:()=>Rt,O:()=>ct,P:()=>dt,Q:()=>Vt,R:()=>v,S:()=>zt,T:()=>ot,U:()=>Ft,V:()=>w,W:()=>kt,X:()=>Tt,Y:()=>Bt,Z:()=>X,_:()=>We,a:()=>mt,a0:()=>Ht,a1:()=>z,a2:()=>Qt,a3:()=>Ot,a4:()=>_t,a5:()=>It,a6:()=>Kt,a7:()=>vt,a8:()=>Pt,a9:()=>ut,b:()=>Z,c:()=>Wt,d:()=>is,e:()=>T,f:()=>yt,g:()=>wt,h:()=>U,i:()=>Y,j:()=>_,k:()=>Nt,l:()=>ht,m:()=>G,n:()=>Gt,o:()=>$t,p:()=>$,q:()=>P,r:()=>I,s:()=>ft,t:()=>J,u:()=>xt,v:()=>et,w:()=>tt,x:()=>Ut,y:()=>gt,z:()=>pt});const i=Symbol(0);let n=!1,a=!1,r=null,o=null,h=null,c=0,l=[],u={};const d=()=>{},p=0,g=1,f=2,m=3;function b(){if(l.length){a=!0;for(let t=0;t<l.length;t++)l[t].$st!==p&&y(l[t]);l=[],n=!1,a=!1}else n=!1}function y(t){let e=[t];for(;t=t[i];)t.$e&&t.$st!==p&&e.push(t);for(let t=e.length-1;t>=0;t--)H(e[t])}function $(t){return E(r,t,null)}function v(t){return E(null,t,null)}function w(){a||b()}function k(){return r}function T(t,e){try{return E(e,t,null)}catch(t){return void q(e,t)}}function x(t,e=r){return e?.$cx[t]}function P(t){if(!t||!r)return t||d;const e=r;return e.$d?Array.isArray(e.$d)?e.$d.push(t):e.$d=[e.$d,t]:e.$d=t,function(){e.$st!==m&&(t.call(null),N(e.$d)?e.$d=null:Array.isArray(e.$d)&&e.$d.splice(e.$d.indexOf(t),1))}}function S(t=!0){if(this.$st===m)return;let e=t?this.$ps||this[i]:this,s=this.$ns,n=null;for(;s&&s[i]===this;)S.call(s,!0),C(s),n=s.$ns,s.$ns=null,s=n;t&&C(this),s&&(s.$ps=t?this.$ps:this),e&&(e.$ns=s)}function C(t){t.$st=m,t.$d&&A(t),t.$s&&B(t,0),t.$ps&&(t.$ps.$ns=null),t[i]=null,t.$s=null,t.$o=null,t.$ps=null,t.$cx=u,t.$eh=null}function A(t){try{if(Array.isArray(t.$d))for(let e=t.$d.length-1;e>=0;e--){const s=t.$d[e];s.call(s)}else t.$d.call(t.$d);t.$d=null}catch(e){q(t,e)}}function E(t,e,s){const i=r,n=o;r=t,o=s;try{return e.call(t)}finally{r=i,o=n}}function q(t,e){if(!t||!t.$eh)throw e;let s=0,i=t.$eh.length,n=j(e);for(s=0;s<i;s++)try{t.$eh[s](n);break}catch(t){n=j(t)}if(s===i)throw n}function j(t){return t instanceof Error?t:Error(JSON.stringify(t))}function L(){return this.$st===m||(o&&!this.$e&&(!h&&o.$s&&o.$s[c]==this?c++:h?h.push(this):h=[this]),this.$c&&H(this)),this.$v}function O(t){const e=N(t)?t(this.$v):t;if(this.$ch(this.$v,e)&&(this.$v=e,this.$o))for(let t=0;t<this.$o.length;t++)W(this.$o[t],f);return this.$v}const M=function(){this[i]=null,this.$ns=null,this.$ps=null,r&&r.append(this)},D=M.prototype;function I(){return new M}D.$cx=u,D.$eh=null,D.$c=null,D.$d=null,D.append=function(t){if(t[i]=this,t.$ps=this,this.$ns)if(t.$ns){let e=t.$ns;for(;e.$ns;)e=e.$ns;e.$ns=this.$ns,this.$ns.$ps=e}else t.$ns=this.$ns,this.$ns.$ps=t;this.$ns=t,t.$cx=t.$cx===u?this.$cx:{...this.$cx,...t.$cx},this.$eh&&(t.$eh=t.$eh?[...t.$eh,...this.$eh]:this.$eh)},D.dispose=function(){S.call(this)};const F=function(t,e,s){M.call(this),this.$st=e?f:p,this.$i=!1,this.$e=!1,this.$s=null,this.$o=null,this.$v=t,e&&(this.$c=e),s&&s.dirty&&(this.$ch=s.dirty)},R=F.prototype;function V(t,e,s){return new F(t,e,s)}function N(t){return"function"==typeof t}function H(t){if(t.$st===g)for(let e=0;e<t.$s.length&&(H(t.$s[e]),t.$st!==f);e++);t.$st===f?K(t):t.$st=p}function Q(t){t.$ns&&t.$ns[i]===t&&S.call(t,!1),t.$d&&A(t),t.$eh=t[i]?t[i].$eh:null}function K(t){let e=h,s=c;h=null,c=0;try{Q(t);const e=E(t,t.$c,t);if(h){if(t.$s&&B(t,c),t.$s&&c>0){t.$s.length=c+h.length;for(let e=0;e<h.length;e++)t.$s[c+e]=h[e]}else t.$s=h;let e;for(let s=c;s<t.$s.length;s++)e=t.$s[s],e.$o?e.$o.push(t):e.$o=[t]}else t.$s&&c<t.$s.length&&(B(t,c),t.$s.length=c);!t.$e&&t.$i?O.call(t,e):(t.$v=e,t.$i=!0)}catch(e){return q(t,e),void(t.$st===f&&(Q(t),t.$s&&B(t,0)))}h=e,c=s,t.$st=p}function W(t,e){if(!(t.$st>=e)&&(t.$e&&t.$st===p&&(l.push(t),n||(n=!0,queueMicrotask(b))),t.$st=e,t.$o))for(let e=0;e<t.$o.length;e++)W(t.$o[e],g)}function B(t,e){let s,i;for(let n=e;n<t.$s.length;n++)s=t.$s[n],s.$o&&(i=s.$o.indexOf(t),s.$o[i]=s.$o[s.$o.length-1],s.$o.pop())}function z(...t){}function G(t){return null===t}function U(t){return void 0===t}function X(t){return G(t)||U(t)}function J(t){return t?.constructor===Object}function _(t){return"number"==typeof t&&!Number.isNaN(t)}function Y(t){return"string"==typeof t}function Z(t){return"boolean"==typeof t}function tt(t){return"function"==typeof t}function et(t){return Array.isArray(t)}var st;Object.setPrototypeOf(R,D),R.$ch=function(t,e){return t!==e},R.call=L;const it=Event,nt=Symbol("DOM_EVENT");class at extends it{constructor(t,...e){super(t,e[0]),this[st]=!0,this.triggers=new rt,this.detail=e[0]?.detail;const s=e[0]?.trigger;s&&this.triggers.add(s)}static{st=nt}get trigger(){return this.triggers.source}get originEvent(){return this.triggers.origin}get isOriginTrusted(){return this.triggers.origin?.isTrusted??!1}}class rt{constructor(){this.chain=[]}get source(){return this.chain[0]}get origin(){return this.chain[this.chain.length-1]}add(t){this.chain.push(t),function(t){return!!t?.[nt]}(t)&&this.chain.push(...t.triggers)}remove(t){return this.chain.splice(this.chain.indexOf(t),1)[0]}has(t){return this.chain.some((e=>e===t))}hasType(t){return!!this.findType(t)}findType(t){return this.chain.find((e=>e.type===t))}walk(t){for(const e of this.chain){const s=t(e);if(s)return[e,s]}}[Symbol.iterator](){return this.chain.values()}}class ot extends EventTarget{addEventListener(t,e,s){return super.addEventListener(t,e,s)}removeEventListener(t,e,s){return super.removeEventListener(t,e,s)}}function ht(t,e,s,i){return t.addEventListener(e,s,i),P((()=>t.removeEventListener(e,s,i)))}function ct(t){return!!t?.type.startsWith("pointer")}function lt(t){return!!t?.type.startsWith("touch")}function ut(t){return/^(click|mouse)/.test(t?.type??"")}function dt(t){return!!t?.type.startsWith("key")}function pt(t){return dt(t)&&("Enter"===t.key||" "===t.key)}function gt(t){return t instanceof Node}function ft(t,e,s){if(t)if(s||""===s||0===s){const i=!0===s?"":s+"";t.getAttribute(e)!==i&&t.setAttribute(e,i)}else t.removeAttribute(e)}function mt(t,e,s){t&&(s||0===s?t.style.setProperty(e,s+""):t.style.removeProperty(e))}function bt(t,e,s){t.classList[s?"add":"remove"](e)}function yt(t,e){const s=V(t,null,e),n=L.bind(s);return n[i]=!0,n.set=O.bind(s),n}function $t(t,e){const s=V(e?.initial,t,e),n=L.bind(s);return n[i]=!0,n}function vt(t){return function(t){return N(t)&&i in t}(t)&&"set"in t}const wt=function(t,e){const s=V(null,(function(){let e=t();return N(e)&&P(e),null}),void 0);return s.$e=!0,K(s),S.bind(s,!0)};function kt(t){return{id:Symbol(),provide:t}}function Tt(t,e,s=k()){const i=!U(e);!function(t,e,s=r){s&&(s.$cx={...s.$cx,[t]:e})}(t.id,i?e:t.provide?.(),s)}function xt(t){return x(t.id)}function Pt(t){return!U(x(t.id))}const St=Symbol(0),Ct=Symbol(0),At=Symbol(0);var Et;const qt={};class jt{constructor(t,e,s){this[Et]=null,this.$el=yt(null),this.a=null,this.d=null,this.f=null,this.g=null,this.e=null,this.o=!1,this.i=qt,this.b=null,this.c=null,this.l=[],this.m=[],this.j=[],this.n=[],this.d=e,s?.scope&&s.scope.append(e);let i=t.state,n=t.props;if(i&&(this.h=i.create(),this.k=new Proxy(this.h,{get:(t,e)=>this.h[e]()}),Tt(i,this.h)),n&&(this.i=function(t){const e={};for(const s of Object.keys(t)){const i=t[s];e[s]=yt(i,i)}return e}(n),s?.props))for(const t of Object.keys(s.props))this.i[t]?.set(s.props[t]);P(this.p.bind(this))}static{Et=At}w(){T((()=>{for(const t of this.l)t()}),this.d)}x(t){this.a||(this.a=t,this.$el.set(t),T((()=>{this.f=I(),T((()=>{for(const t of this.m)t(this.a);this.q(),this.r()}),this.f)}),this.d),t.dispatchEvent(new Event("attached")))}s(){this.f?.dispose(),this.f=null,this.g=null,this.a=null,this.$el.set(null)}y(){this.a&&this.f&&this.j.length&&T((()=>{this.g=I(),T((()=>{for(const t of this.j)t(this.a)}),this.g)}),this.f)}z(){this.g?.dispose(),this.g=null}p(){if(this.o)return;this.o=!0,T((()=>{for(const t of this.n)t(this.a)}),this.d);const t=this.a;this.s(),this.d.dispose(),this.l.length=0,this.m.length=0,this.j.length=0,this.n.length=0,this.e=null,this.b=null,this.c=null,this.i=qt,this.d=null,this.k=qt,this.h=null,t&&delete t.$}t(t){t.onSetup&&this.l.push(t.onSetup.bind(t)),t.onAttach&&this.m.push(t.onAttach.bind(t)),t.onConnect&&this.j.push(t.onConnect.bind(t)),t.onDestroy&&this.n.push(t.onDestroy.bind(t))}q(){if(this.b)for(const t of Object.keys(this.b))tt(this.b[t])?wt(this.u.bind(this,t)):ft(this.a,t,this.b[t])}r(){if(this.c)for(const t of Object.keys(this.c))tt(this.c[t])?wt(this.v.bind(this,t)):mt(this.a,t,this.c[t])}u(t){ft(this.a,t,this.b[t].call(this.e))}v(t){mt(this.a,t,this.c[t].call(this.e))}}let Lt={$$:null};class Ot extends EventTarget{constructor(){super(),Lt.$$&&this.attach(Lt)}get el(){return this.$$.a}get $el(){return this.$$.$el()}get scope(){return this.$$.d}get attachScope(){return this.$$.f}get connectScope(){return this.$$.g}get $props(){return this.$$.i}get $state(){return this.$$.h}get state(){return this.$$.k}attach({$$:t}){return this.$$=t,t.t(this),this}addEventListener(t,e,s){this.listen(t,e,s)}removeEventListener(t,e,s){this.el?.removeEventListener(t,e,s)}setAttributes(t){this.$$.b||(this.$$.b={}),Object.assign(this.$$.b,t)}setStyles(t){this.$$.c||(this.$$.c={}),Object.assign(this.$$.c,t)}setCSSVars(t){this.setStyles(t)}createEvent(t,...e){return new at(t,e[0])}dispatch(t,...e){if(!this.el)return!1;const s=t instanceof Event?t:new at(t,e[0]);return Object.defineProperty(s,"target",{get:()=>this.$$.e}),v((()=>(this.$$[At]?.(s),this.el.dispatchEvent(s))))}dispatchEvent(t){return this.dispatch(t)}listen(t,e,s){return this.el?ht(this.el,t,e,s):z}}class Mt extends Ot{subscribe(t){return T((()=>wt((()=>t(this.state)))),this.$$.d)}destroy(){this.$$.p()}}function Dt(t,e,s){t[St]||(t[St]=new Set),t[St].add(e)}function It(t,e,s){t[Ct]||(t[Ct]=new Set),t[Ct].add(e)}class Ft{constructor(t){this.id=Symbol(0),this.record=t,this.A=Object.getOwnPropertyDescriptors(t)}create(){const t={},e=new Proxy(t,{get:(e,s)=>t[s]()});for(const s of Object.keys(this.record)){const i=this.A[s].get;t[s]=i?$t(i.bind(e)):yt(this.record[s])}return t}reset(t,e){for(const s of Object.keys(t))this.A[s].get||e&&!e(s)||t[s].set(this.record[s])}}function Rt(t){return xt(t)}function Vt(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Nt(t){return t.replace(/-./g,(t=>t[1].toUpperCase()))}function Ht(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Qt(t){return tt(t)?t():t}function Kt(t){return t?"true":"false"}function Wt(){const t=new Set;return{add(...e){for(const s of e)t.add(s)},empty(){for(const e of t)e();t.clear()}}}function Bt(){const t=Wt();return P(t.empty),t}function zt(t){return Object.keys(t)}function Gt(){let t,e;return{promise:new Promise(((s,i)=>{t=s,e=i})),resolve:t,reject:e}}function Ut(t){return new Promise((e=>setTimeout(e,t)))}function Xt(t){let e,s=-1;return function(...i){e=i,s>=0||(s=window.requestAnimationFrame((()=>{t.apply(this,e),s=-1,e=void 0})))}}const Jt="undefined"!=typeof window?"requestIdleCallback"in window?window.requestIdleCallback:t=>window.setTimeout(t,1):z;function _t(t,e){return new Promise((s=>{Jt((e=>{t?.(e),s()}),e)}))}const Yt=Math.min,Zt=Math.max,te=Math.round,ee=Math.floor,se=t=>({x:t,y:t});function ie(t){return t.split("-")[0]}function ne(t){return["top","bottom"].includes(ie(t))?"y":"x"}function ae(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function re(t,e,s){let{reference:i,floating:n}=t;const a=ne(e),r=function(t){return"x"===ne(t)?"y":"x"}(e),o="y"===r?"height":"width",h=ie(e),c="y"===a,l=i.x+i.width/2-n.width/2,u=i.y+i.height/2-n.height/2,d=i[o]/2-n[o]/2;let p;switch(h){case"top":p={x:l,y:i.y-n.height};break;case"bottom":p={x:l,y:i.y+i.height};break;case"right":p={x:i.x+i.width,y:u};break;case"left":p={x:i.x-n.width,y:u};break;default:p={x:i.x,y:i.y}}switch(function(t){return t.split("-")[1]}(e)){case"start":p[r]-=d*(s&&c?-1:1);break;case"end":p[r]+=d*(s&&c?-1:1)}return p}function oe(t){return le(t)?(t.nodeName||"").toLowerCase():"#document"}function he(t){var e;return(null==t||null==(e=t.ownerDocument)?void 0:e.defaultView)||window}function ce(t){var e;return null==(e=(le(t)?t.ownerDocument:t.document)||window.document)?void 0:e.documentElement}function le(t){return t instanceof Node||t instanceof he(t).Node}function ue(t){return t instanceof Element||t instanceof he(t).Element}function de(t){return t instanceof HTMLElement||t instanceof he(t).HTMLElement}function pe(t){return"undefined"!=typeof ShadowRoot&&(t instanceof ShadowRoot||t instanceof he(t).ShadowRoot)}function ge(t){const{overflow:e,overflowX:s,overflowY:i,display:n}=$e(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+s)&&!["inline","contents"].includes(n)}function fe(t){return["table","td","th"].includes(oe(t))}function me(t){const e=be(),s=$e(t);return"none"!==s.transform||"none"!==s.perspective||!!s.containerType&&"normal"!==s.containerType||!e&&!!s.backdropFilter&&"none"!==s.backdropFilter||!e&&!!s.filter&&"none"!==s.filter||["transform","perspective","filter"].some((t=>(s.willChange||"").includes(t)))||["paint","layout","strict","content"].some((t=>(s.contain||"").includes(t)))}function be(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function ye(t){return["html","body","#document"].includes(oe(t))}function $e(t){return he(t).getComputedStyle(t)}function ve(t){return ue(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function we(t){if("html"===oe(t))return t;const e=t.assignedSlot||t.parentNode||pe(t)&&t.host||ce(t);return pe(e)?e.host:e}function ke(t){const e=we(t);return ye(e)?t.ownerDocument?t.ownerDocument.body:t.body:de(e)&&ge(e)?e:ke(e)}function Te(t,e,s){var i;void 0===e&&(e=[]),void 0===s&&(s=!0);const n=ke(t),a=n===(null==(i=t.ownerDocument)?void 0:i.body),r=he(n);return a?e.concat(r,r.visualViewport||[],ge(n)?n:[],r.frameElement&&s?Te(r.frameElement):[]):e.concat(n,Te(n,[],s))}function xe(t){const e=$e(t);let s=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const n=de(t),a=n?t.offsetWidth:s,r=n?t.offsetHeight:i,o=te(s)!==a||te(i)!==r;return o&&(s=a,i=r),{width:s,height:i,$:o}}function Pe(t){return ue(t)?t:t.contextElement}function Se(t){const e=Pe(t);if(!de(e))return se(1);const s=e.getBoundingClientRect(),{width:i,height:n,$:a}=xe(e);let r=(a?te(s.width):s.width)/i,o=(a?te(s.height):s.height)/n;return r&&Number.isFinite(r)||(r=1),o&&Number.isFinite(o)||(o=1),{x:r,y:o}}const Ce=se(0);function Ae(t){const e=he(t);return be()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:Ce}function Ee(t,e,s,i){void 0===e&&(e=!1),void 0===s&&(s=!1);const n=t.getBoundingClientRect(),a=Pe(t);let r=se(1);e&&(i?ue(i)&&(r=Se(i)):r=Se(t));const o=function(t,e,s){return void 0===e&&(e=!1),!(!s||e&&s!==he(t))&&e}(a,s,i)?Ae(a):se(0);let h=(n.left+o.x)/r.x,c=(n.top+o.y)/r.y,l=n.width/r.x,u=n.height/r.y;if(a){const t=he(a),e=i&&ue(i)?he(i):i;let s=t,n=s.frameElement;for(;n&&i&&e!==s;){const t=Se(n),e=n.getBoundingClientRect(),i=$e(n),a=e.left+(n.clientLeft+parseFloat(i.paddingLeft))*t.x,r=e.top+(n.clientTop+parseFloat(i.paddingTop))*t.y;h*=t.x,c*=t.y,l*=t.x,u*=t.y,h+=a,c+=r,s=he(n),n=s.frameElement}}return ae({width:l,height:u,x:h,y:c})}const qe=[":popover-open",":modal"];function je(t){return qe.some((e=>{try{return t.matches(e)}catch(t){return!1}}))}function Le(t){return Ee(ce(t)).left+ve(t).scrollLeft}function Oe(t,e,s){let i;if("viewport"===e)i=function(t,e){const s=he(t),i=ce(t),n=s.visualViewport;let a=i.clientWidth,r=i.clientHeight,o=0,h=0;if(n){a=n.width,r=n.height;const t=be();(!t||t&&"fixed"===e)&&(o=n.offsetLeft,h=n.offsetTop)}return{width:a,height:r,x:o,y:h}}(t,s);else if("document"===e)i=function(t){const e=ce(t),s=ve(t),i=t.ownerDocument.body,n=Zt(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),a=Zt(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let r=-s.scrollLeft+Le(t);const o=-s.scrollTop;return"rtl"===$e(i).direction&&(r+=Zt(e.clientWidth,i.clientWidth)-n),{width:n,height:a,x:r,y:o}}(ce(t));else if(ue(e))i=function(t,e){const s=Ee(t,!0,"fixed"===e),i=s.top+t.clientTop,n=s.left+t.clientLeft,a=de(t)?Se(t):se(1);return{width:t.clientWidth*a.x,height:t.clientHeight*a.y,x:n*a.x,y:i*a.y}}(e,s);else{const s=Ae(t);i={...e,x:e.x-s.x,y:e.y-s.y}}return ae(i)}function Me(t,e){const s=we(t);return!(s===e||!ue(s)||ye(s))&&("fixed"===$e(s).position||Me(s,e))}function De(t,e,s){const i=de(e),n=ce(e),a="fixed"===s,r=Ee(t,!0,a,e);let o={scrollLeft:0,scrollTop:0};const h=se(0);if(i||!i&&!a)if(("body"!==oe(e)||ge(n))&&(o=ve(e)),i){const t=Ee(e,!0,a,e);h.x=t.x+e.clientLeft,h.y=t.y+e.clientTop}else n&&(h.x=Le(n));return{x:r.left+o.scrollLeft-h.x,y:r.top+o.scrollTop-h.y,width:r.width,height:r.height}}function Ie(t,e){return de(t)&&"fixed"!==$e(t).position?e?e(t):t.offsetParent:null}function Fe(t,e){const s=he(t);if(!de(t)||je(t))return s;let i=Ie(t,e);for(;i&&fe(i)&&"static"===$e(i).position;)i=Ie(i,e);return i&&("html"===oe(i)||"body"===oe(i)&&"static"===$e(i).position&&!me(i))?s:i||function(t){let e=we(t);for(;de(e)&&!ye(e);){if(me(e))return e;e=we(e)}return null}(t)||s}const Re={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{elements:e,rect:s,offsetParent:i,strategy:n}=t;const a="fixed"===n,r=ce(i),o=!!e&&je(e.floating);if(i===r||o&&a)return s;let h={scrollLeft:0,scrollTop:0},c=se(1);const l=se(0),u=de(i);if((u||!u&&!a)&&(("body"!==oe(i)||ge(r))&&(h=ve(i)),de(i))){const t=Ee(i);c=Se(i),l.x=t.x+i.clientLeft,l.y=t.y+i.clientTop}return{width:s.width*c.x,height:s.height*c.y,x:s.x*c.x-h.scrollLeft*c.x+l.x,y:s.y*c.y-h.scrollTop*c.y+l.y}},getDocumentElement:ce,getClippingRect:function(t){let{element:e,boundary:s,rootBoundary:i,strategy:n}=t;const a=[..."clippingAncestors"===s?function(t,e){const s=e.get(t);if(s)return s;let i=Te(t,[],!1).filter((t=>ue(t)&&"body"!==oe(t))),n=null;const a="fixed"===$e(t).position;let r=a?we(t):t;for(;ue(r)&&!ye(r);){const e=$e(r),s=me(r);s||"fixed"!==e.position||(n=null),(a?!s&&!n:!s&&"static"===e.position&&n&&["absolute","fixed"].includes(n.position)||ge(r)&&!s&&Me(t,r))?i=i.filter((t=>t!==r)):n=e,r=we(r)}return e.set(t,i),i}(e,this._c):[].concat(s),i],r=a[0],o=a.reduce(((t,s)=>{const i=Oe(e,s,n);return t.top=Zt(i.top,t.top),t.right=Yt(i.right,t.right),t.bottom=Yt(i.bottom,t.bottom),t.left=Zt(i.left,t.left),t}),Oe(e,r,n));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}},getOffsetParent:Fe,getElementRects:async function(t){const e=this.getOffsetParent||Fe,s=this.getDimensions;return{reference:De(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,...await s(t.floating)}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){const{width:e,height:s}=xe(t);return{width:e,height:s}},getScale:Se,isElement:ue,isRTL:function(t){return"rtl"===$e(t).direction}};function Ve(t,e,s,i){void 0===i&&(i={});const{ancestorScroll:n=!0,ancestorResize:a=!0,elementResize:r="function"==typeof ResizeObserver,layoutShift:o="function"==typeof IntersectionObserver,animationFrame:h=!1}=i,c=Pe(t),l=n||a?[...c?Te(c):[],...Te(e)]:[];l.forEach((t=>{n&&t.addEventListener("scroll",s,{passive:!0}),a&&t.addEventListener("resize",s)}));const u=c&&o?function(t,e){let s,i=null;const n=ce(t);function a(){var t;clearTimeout(s),null==(t=i)||t.disconnect(),i=null}return function r(o,h){void 0===o&&(o=!1),void 0===h&&(h=1),a();const{left:c,top:l,width:u,height:d}=t.getBoundingClientRect();if(o||e(),!u||!d)return;const p={rootMargin:-ee(l)+"px "+-ee(n.clientWidth-(c+u))+"px "+-ee(n.clientHeight-(l+d))+"px "+-ee(c)+"px",threshold:Zt(0,Yt(1,h))||1};let g=!0;function f(t){const e=t[0].intersectionRatio;if(e!==h){if(!g)return r();e?r(!1,e):s=setTimeout((()=>{r(!1,1e-7)}),100)}g=!1}try{i=new IntersectionObserver(f,{...p,root:n.ownerDocument})}catch(t){i=new IntersectionObserver(f,p)}i.observe(t)}(!0),a}(c,s):null;let d,p=-1,g=null;r&&(g=new ResizeObserver((t=>{let[i]=t;i&&i.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame((()=>{var t;null==(t=g)||t.observe(e)}))),s()})),c&&!h&&g.observe(c),g.observe(e));let f=h?Ee(t):null;return h&&function e(){const i=Ee(t);!f||i.x===f.x&&i.y===f.y&&i.width===f.width&&i.height===f.height||s(),f=i,d=requestAnimationFrame(e)}(),s(),()=>{var t;l.forEach((t=>{n&&t.removeEventListener("scroll",s),a&&t.removeEventListener("resize",s)})),null==u||u(),null==(t=g)||t.disconnect(),g=null,h&&cancelAnimationFrame(d)}}const Ne=(t,e,s)=>{const i=new Map,n={platform:Re,...s},a={...n.platform,_c:i};return(async(t,e,s)=>{const{placement:i="bottom",strategy:n="absolute",middleware:a=[],platform:r}=s,o=a.filter(Boolean),h=await(null==r.isRTL?void 0:r.isRTL(e));let c=await r.getElementRects({reference:t,floating:e,strategy:n}),{x:l,y:u}=re(c,i,h),d=i,p={},g=0;for(let s=0;s<o.length;s++){const{name:a,fn:f}=o[s],{x:m,y:b,data:y,reset:$}=await f({x:l,y:u,initialPlacement:i,placement:d,strategy:n,middlewareData:p,rects:c,platform:r,elements:{reference:t,floating:e}});l=null!=m?m:l,u=null!=b?b:u,p={...p,[a]:{...p[a],...y}},$&&g<=50&&(g++,"object"==typeof $&&($.placement&&(d=$.placement),$.rects&&(c=!0===$.rects?await r.getElementRects({reference:t,floating:e,strategy:n}):$.rects),({x:l,y:u}=re(c,d,h))),s=-1)}return{x:l,y:u,placement:d,strategy:n,middlewareData:p}})(t,e,{...n,platform:a})},He=t=>null===t?"":t+"",Qe=t=>null===t?null:t+"",Ke=t=>null===t?0:Number(t),We=t=>null!==t,Be=()=>null,ze=t=>null===t?[]:JSON.parse(t),Ge=t=>null===t?{}:JSON.parse(t);function Ue(t){if(null===t)return Qe;switch(typeof t){case"undefined":case"string":default:return He;case"boolean":return We;case"number":return Ke;case"function":return Be;case"object":return et(t)?ze:Ge}}const Xe=Symbol(0),Je=Symbol(0),_e=Symbol(0),Ye=Symbol(0);function Ze(t,e){var s,i,n;class a extends t{constructor(...t){if(super(...t),this[i]=0,this[n]=null,this.keepAlive=!1,this.forwardKeepAlive=!0,this.$=T((()=>function(t,e){return function(t){const e=I();return E(e,t.length?t.bind(null,S.bind(e)):t,null)}((()=>{Lt.$$=new jt(t,k(),e);const s=new t;return Lt.$$.e=s,Lt.$$=null,s}))}(e)),null),this.$.$$.t(this),e.props){const t=this.$props,s=Object.getOwnPropertyDescriptors(this);for(const i of Object.keys(s))i in e.props&&(t[i].set(this[i]),delete this[i])}}static{this[s]=null}static get observedAttributes(){if(!this[Xe]&&e.props){const t=new Map;for(const s of Object.keys(e.props)){let i=this.attrs?.[s],n=Y(i)?i:i?i?.attr:i;!1!==n&&(n||(n=Vt(s)),t.set(n,{C:s,B:i&&!Y(i)&&i?.converter||Ue(e.props[s])}))}this[Xe]=t}return this[Xe]?Array.from(this[Xe].keys()):[]}get scope(){return this.$.$$.d}get attachScope(){return this.$.$$.f}get connectScope(){return this.$.$$.g}get $props(){return this.$.$$.i}get $state(){return this.$.$$.h}get state(){return this.$.state}attributeChangedCallback(t,e,s){const i=this.constructor;if(!i[Xe])return void super.attributeChangedCallback?.(t,e,s);const n=i[Xe].get(t);n&&(this[n.C]=n.B(s))}connectedCallback(){const t=this.$?.$$;if(!t||t.o)return;if(2!==this[_e])return void ts.call(this);if(!this.isConnected)return;this.hasAttribute("keep-alive")&&(this.keepAlive=!0),t.y(),et(this[Ye])&&function(t,e){for(const s of t)s(e)}(this[Ye],this),this[Ye]=null;const e=super.connectedCallback;e&&T((()=>e.call(this)),this.connectScope)}disconnectedCallback(){const t=this.$?.$$;if(!t||t.o)return;t.z();const e=super.disconnectedCallback;e&&e.call(this),this.keepAlive||this.hasAttribute("keep-alive")||setTimeout((()=>{requestAnimationFrame((()=>{this.isConnected||t.p()}))}),0)}[(s=Xe,i=_e,n=Ye,Je)](){const t=this.$.$$,e=this.constructor;if(t.o)return;const s=e[Xe];if(s)for(const e of this.attributes){let i=s.get(e.name);i&&i.B&&t.i[i.C].set(i.B(this.getAttribute(e.name)))}t.w(),t.x(this),this[_e]=2,this.connectedCallback()}subscribe(t){return this.$.subscribe(t)}destroy(){this.disconnectedCallback(),this.$.destroy()}}return function(t,e){const s=t.prototype,i=e.prototype;if(e.props)for(const t of Object.keys(e.props))Object.defineProperty(s,t,{enumerable:!0,configurable:!0,get(){return this.$props[t]()},set(e){this.$props[t].set(e)}});if(i[St])for(const t of i[St])Object.defineProperty(s,t,{enumerable:!0,configurable:!0,get(){return this.$[t]},set(e){this.$[t]=e}});if(i[Ct])for(const t of i[Ct])s[t]=function(...e){return this.$[t](...e)}}(a,e),a}function ts(){if(0!==this[_e])return;this[_e]=1;const t=function(t){let e=t.parentNode,s=t.localName.split("-",1)[0]+"-";for(;e;){if(1===e.nodeType&&e.localName.startsWith(s))return e;e=e.parentNode}return null}(this),e=t&&window.customElements.get(t.localName),s=t&&2===t[_e];!t||e&&s?ss.call(this,t):es.call(this,t)}async function es(t){await window.customElements.whenDefined(t.localName),2!==t[_e]&&await new Promise((e=>(t[Ye]??=[]).push(e))),ss.call(this,t)}function ss(t){if(this.isConnected){if(t){t.keepAlive&&t.forwardKeepAlive&&(this.keepAlive=!0,this.setAttribute("keep-alive",""));const e=this.$.$$.d;e&&t.$.$$.f.append(e)}this[Je]()}}function is(t,e=!1){!e&&window.customElements.get(t.tagName)||window.customElements.define(t.tagName,t)}},4309:(t,e,s)=>{s.d(e,{P:()=>l,a:()=>u,b:()=>r,c:()=>h,m:()=>n,u:()=>a});var i=s(8080);const n=(0,i.W)();function a(){return(0,i.u)(n)}function r(){return a().$state}const o=(0,i.W)();function h(){return(0,i.u)(o)}const c={clickToPlay:!0,clickToFullscreen:!0,controls:["play-large","play","progress","current-time","mute+volume","captions","settings","pip","airplay","fullscreen"],customIcons:!1,displayDuration:!1,download:null,markers:null,invertTime:!0,thumbnails:null,toggleTime:!0,translations:null,seekTime:10,speed:[.5,.75,1,1.25,1.5,1.75,2,4]};class l extends i.C{static{this.props=c}onSetup(){this.a=a(),(0,i.X)(o,{...this.$props,previewTime:(0,i.f)(0)})}}function u(t,e){const{canAirPlay:s,canFullscreen:n,canPictureInPicture:a,controlsHidden:r,currentTime:o,fullscreen:h,hasCaptions:c,isAirPlayConnected:l,paused:u,pictureInPicture:d,playing:p,pointer:g,poster:f,textTrack:m,viewType:b,waiting:y}=e.$state;t.classList.add("plyr"),t.classList.add("plyr--full-ui");const $={"plyr--airplay-active":l,"plyr--airplay-supported":s,"plyr--fullscreen-active":h,"plyr--fullscreen-enabled":n,"plyr--hide-controls":r,"plyr--is-touch":()=>"coarse"===g(),"plyr--loading":y,"plyr--paused":u,"plyr--pip-active":d,"plyr--pip-enabled":a,"plyr--playing":p,"plyr__poster-enabled":f,"plyr--stopped":()=>u()&&0===o(),"plyr--captions-active":m,"plyr--captions-enabled":c},v=(0,i.c)();for(const e of Object.keys($))v.add((0,i.g)((()=>{t.classList.toggle(e,!!$[e]())})));return v.add((0,i.g)((()=>{const e=`plyr--${b()}`;return t.classList.add(e),()=>t.classList.remove(e)})),(0,i.g)((()=>{const{$provider:s}=e,i=s()?.type,n=`plyr--${function(t){return"audio"===t||"video"===t}(i)?"html5":i}`;return t.classList.toggle(n,!!i),()=>t.classList.remove(n)}))),()=>v.empty()}},7927:(t,e,s)=>{s.d(e,{T:()=>n,a:()=>$,b:()=>r,c:()=>v,d:()=>P,e:()=>T,f:()=>y,g:()=>a,h:()=>S,i:()=>C,j:()=>m,k:()=>k,l:()=>o,m:()=>w,n:()=>u,o:()=>f,p:()=>p,q:()=>g,r:()=>b,s:()=>l,t:()=>h,u:()=>x,v:()=>d,w:()=>A});var i=s(8080);class n{get length(){return this.$.length}constructor(t,e){(0,i.v)(t)?this.$=t:(0,i.h)(t)||(0,i.h)(e)?this.$=[]:this.$=[[t,e]]}start(t){return this.$[t][0]??1/0}end(t){return this.$[t][1]??1/0}}function a(t){if(!t.length)return null;let e=t.start(0);for(let s=1;s<t.length;s++){const i=t.start(s);i<e&&(e=i)}return e}function r(t){if(!t.length)return null;let e=t.end(0);for(let s=1;s<t.length;s++){const i=t.end(s);i>e&&(e=i)}return e}function o(t,e,s){if(t)return(0,i.l)(t,e,s)}function h(t,e){return(0,i.y)(e.target)&&t.contains(e.target)}const c=new Set;function l(t,e,s){t.hasAttribute(e)||t.setAttribute(e,s)}function u(t,e){t.hasAttribute("aria-label")||t.hasAttribute("data-no-label")||((0,i.w)(e)?(0,i.g)((function(){(0,i.s)(t,"aria-label",e())})):(0,i.s)(t,"aria-label",e))}function d(t){const e=getComputedStyle(t);return"none"!==e.display&&parseInt(e.opacity)>0}function p(t,e){return s=()=>e(function(t){return!!t&&("checkVisibility"in t?t.checkVisibility({checkOpacity:!0,checkVisibilityCSS:!0}):d(t))}(t)),c.add(s),()=>c.delete(s);var s}function g(t,e,s){for(;e;){if(e===t)return!0;if(s?.(e))break;e=e.parentElement}return!1}function f(t,e){(0,i.l)(t,"pointerup",(t=>{0===t.button&&e(t)})),(0,i.l)(t,"keydown",(t=>{(0,i.z)(t)&&e(t)}))}function m(t){return(0,i.A)(t)&&(t.touches.length>1||t.changedTouches.length>1)}function b(t){let e=(0,i.B)(),s=window.requestAnimationFrame((()=>{(0,i.e)(t,e),s=-1}));return()=>{window.cancelAnimationFrame(s)}}function y(t,e,s){let n,a=t,r=t.parentElement,o=t.content.firstElementChild,h=[];!o&&t.firstElementChild&&(t.innerHTML=t.firstElementChild.outerHTML,t.firstElementChild.remove(),o=t.content.firstElementChild);for(let t=0;t<e;t++)n=document.importNode(o,!0),s?.(n,t),r.insertBefore(n,a.nextSibling),h.push(n),a=n;return(0,i.q)((()=>{for(let t=0;t<h.length;t++)h[t].remove()})),h}function $(t){const e=document.createElement("template");return e.innerHTML=t,e.content}function v(t){return t.cloneNode(!0).firstElementChild}function w(t,e,s,{offsetVarName:n,xOffset:a,yOffset:r,...o}){if(!t)return;const h=s.replace(" ","-").replace("-center","");if((0,i.a)(t,"visibility",e?null:"hidden"),!e)return;const c=t=>s.includes("left")?`calc(-1 * ${t})`:t,l=t=>s.includes("top")?`calc(-1 * ${t})`:t;return(0,i.E)(e,t,(()=>{(0,i.F)(e,t,{placement:h,...o}).then((({x:e,y:s})=>{Object.assign(t.style,{top:`calc(${s+"px"} + ${l(r?r+"px":`var(--${n}-y-offset, 0px)`)})`,left:`calc(${e+"px"} + ${c(a?a+"px":`var(--${n}-x-offset, 0px)`)})`})}))}))}function k(t){return"none"!==getComputedStyle(t).animationName}function T(t){const e=document.createElement("slot");return e.name=t,e}function x(t){const e=(0,i.f)(!1);return(0,i.g)((()=>{const s=t();s&&((0,i.l)(s,"transitionstart",(()=>e.set(!0))),(0,i.l)(s,"transitionend",(()=>e.set(!1))))})),e}function P(t,e){(0,i.g)((function(){const s=t();if(!s)return;e();const n=new ResizeObserver((0,i.I)(e));return n.observe(s),()=>n.disconnect()}))}function S(t){const e=function(t){const e=(0,i.f)(!1);return(0,i.g)((()=>{const s=t();s?((0,i.l)(s,"mouseenter",(()=>e.set(!0))),(0,i.l)(s,"mouseleave",(()=>e.set(!1)))):e.set(!1)})),e}(t),s=function(t){const e=(0,i.f)(!1);return(0,i.g)((()=>{const s=t();s?((0,i.l)(s,"focusin",(()=>e.set(!0))),(0,i.l)(s,"focusout",(()=>e.set(!1)))):e.set(!1)})),e}(t);let n=!1;return(0,i.o)((()=>{const t=e();return!(n&&!t)&&(n=t,t||s())}))}function C(t){return t instanceof HTMLElement}function A(t,e){function s(e){(0,i.G)(t,"light","light"===e),(0,i.G)(t,"dark","dark"===e)}(0,i.g)((()=>{const t=e();if("system"!==t)s(t);else{const t=function(){const t=(0,i.f)("dark"),e=window.matchMedia("(prefers-color-scheme: light)");function s(){t.set(e.matches?"light":"dark")}return s(),(0,i.l)(e,"change",s),t}();(0,i.g)((()=>s(t())))}}))}window.setInterval((()=>{for(const t of c)t()}),1e3)},6665:(t,e,s)=>{function i(t,e=2){return Number(t.toFixed(e))}function n(t){return String(t).split(".")[1]?.length??0}function a(t,e,s){return Math.max(t,Math.min(s,e))}s.d(e,{c:()=>a,g:()=>n,r:()=>i})}}]);