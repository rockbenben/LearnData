"use strict";(self.webpackChunklearn_data=self.webpackChunklearn_data||[]).push([[6214],{99770:(n,s,a)=>{a.r(s),a.d(s,{default:()=>v});var e=a(64304);const t={href:"https://github.com/nextcloud/docker",target:"_blank",rel:"noopener noreferrer"},o=(0,e.uE)('<p>虽然 Nextcloud 内置了 Office 功能，但对中文支持有限，建议使用 Onlyoffice。Onlyoffice 是一个基于 Web 的办公套件，可以帮助你创建和编辑文字、电子表格和幻灯片等文档，实现文档的在线协作、版本控制和在线编辑等功能。这种集成方式将大大提高你的工作效率和协作能力。</p><h2 id="公网访问-nextcloud" tabindex="-1"><a class="header-anchor" href="#公网访问-nextcloud"><span>公网访问 Nextcloud</span></a></h2><p>若在公网中使用 Nextcloud，需在 <code>docker/nextcloud/data/config/config.php</code> 文件中的 <code>trusted_domains</code> 部分添加你的公网域名，例如 <code>1 =&gt; &#39;xxx.newzone.top&#39;</code>。</p><p>即使你的反向代理域名带有端口，也请勿在 <code>trusted_domains</code> 中包含端口信息，否则可能会出现「通过不被信任的域名访问」的提示。在使用带有端口的公网域名时，站点在未登录和成功登录时可能会在跳转时省略端口信息。这时，手动添加端口信息即可正常使用。</p><h2 id="onlyoffice" tabindex="-1"><a class="header-anchor" href="#onlyoffice"><span>ONLYOFFICE</span></a></h2>',5),l={href:"https://helpcenter.onlyoffice.com/installation/docs-community-install-docker.aspx",target:"_blank",rel:"noopener noreferrer"},c=(0,e._)("p",null,"完成部署后，ONLYOFFICE 会生成一段代码，将其输入到服务器即可获取秘钥。将秘钥填写到「管理设置」>「ONLYOFFICE」中。请注意，重新启动 NAS 和 Docker 容器可能会导致秘钥更换。",-1),p=(0,e._)("figure",null,[(0,e._)("img",{src:"https://img.newzone.top/2023-11-11-13-51-31.png?imageMogr2/format/webp",alt:"",tabindex:"0",loading:"lazy"}),(0,e._)("figcaption")],-1),i=(0,e._)("h2",{id:"nextcloud-office-中文乱码",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#nextcloud-office-中文乱码"},[(0,e._)("span",null,"Nextcloud Office 中文乱码")])],-1),u={href:"https://blog.csdn.net/skydust1979/article/details/106280811",target:"_blank",rel:"noopener noreferrer"},r=(0,e._)("code",null,"/volume1/docker/nextcloud/data/lib/public/AppFramework/Http/FileDisplayResponse.php",-1),d=(0,e.uE)('<div class="language-php line-numbers-mode" data-ext="php" data-title="php"><pre class="language-php"><code><span class="token comment">//$output-&gt;setOutput($this-&gt;file-&gt;getContent());</span>\n<span class="token variable">$fileContents</span><span class="token operator">=</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">file</span><span class="token operator">-&gt;</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token variable">$encoding</span> <span class="token operator">=</span> <span class="token function">mb_detect_encoding</span><span class="token punctuation">(</span><span class="token variable">$fileContents</span> <span class="token operator">.</span> <span class="token string double-quoted-string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;UTF-8,GB2312, GBK, WINDOWS-1252, ISO-8859-15, ISO-8859-1, ASCII&quot;</span><span class="token punctuation">,</span> <span class="token constant boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$encoding</span> <span class="token operator">===</span> <span class="token string double-quoted-string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token variable">$encoding</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;ISO-8859-15&quot;</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token variable">$fileContents</span> <span class="token operator">=</span> <span class="token function">iconv</span><span class="token punctuation">(</span><span class="token variable">$encoding</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;UTF-8&quot;</span><span class="token punctuation">,</span> <span class="token variable">$fileContents</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token variable">$output</span><span class="token operator">-&gt;</span><span class="token function">setOutput</span><span class="token punctuation">(</span><span class="token variable">$fileContents</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="部署命令" tabindex="-1"><a class="header-anchor" href="#部署命令"><span>部署命令</span></a></h2><p>以下是集成了 ONLYOFFICE 的 Nextcloud 部署命令：</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&quot;2&quot;</span>\n\n<span class="token key atrule">services</span><span class="token punctuation">:</span>\n  <span class="token key atrule">nextcloud_db</span><span class="token punctuation">:</span>\n    <span class="token key atrule">image</span><span class="token punctuation">:</span> mariadb<span class="token punctuation">:</span><span class="token number">10.6</span>\n    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> nextcloud_db\n    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always\n    <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>transaction<span class="token punctuation">-</span>isolation=READ<span class="token punctuation">-</span>COMMITTED <span class="token punctuation">-</span><span class="token punctuation">-</span>log<span class="token punctuation">-</span>bin=binlog <span class="token punctuation">-</span><span class="token punctuation">-</span>binlog<span class="token punctuation">-</span>format=ROW\n    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>\n      <span class="token punctuation">-</span> /volume1/docker/nextcloud/mysql<span class="token punctuation">:</span>/var/lib/mysql\n    <span class="token key atrule">environment</span><span class="token punctuation">:</span>\n      <span class="token punctuation">-</span> MYSQL_ROOT_PASSWORD=nextcloud\n      <span class="token punctuation">-</span> MYSQL_PASSWORD=nextcloud\n      <span class="token punctuation">-</span> MYSQL_DATABASE=nextcloud\n      <span class="token punctuation">-</span> MYSQL_USER=nextcloud\n\n  <span class="token key atrule">nextcloud_app</span><span class="token punctuation">:</span>\n    <span class="token key atrule">image</span><span class="token punctuation">:</span> nextcloud\n    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> nextcloud\n    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always\n    <span class="token key atrule">ports</span><span class="token punctuation">:</span>\n      <span class="token punctuation">-</span> 9030<span class="token punctuation">:</span><span class="token number">80</span>\n    <span class="token key atrule">links</span><span class="token punctuation">:</span>\n      <span class="token punctuation">-</span> nextcloud_db\n    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>\n      <span class="token punctuation">-</span> /volume1/docker/nextcloud/data<span class="token punctuation">:</span>/var/www/html\n      <span class="token punctuation">-</span> /volume1/sync<span class="token punctuation">:</span>/sync <span class="token comment">#外部存储目录</span>\n    <span class="token key atrule">environment</span><span class="token punctuation">:</span>\n      <span class="token punctuation">-</span> MYSQL_PASSWORD=nextcloud\n      <span class="token punctuation">-</span> MYSQL_DATABASE=nextcloud\n      <span class="token punctuation">-</span> MYSQL_USER=nextcloud\n      <span class="token punctuation">-</span> MYSQL_HOST=nextcloud_db\n\n  <span class="token key atrule">onlyoffice</span><span class="token punctuation">:</span>\n    <span class="token key atrule">image</span><span class="token punctuation">:</span> onlyoffice/documentserver\n    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> onlyoffice\n    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always\n    <span class="token key atrule">ports</span><span class="token punctuation">:</span>\n      <span class="token punctuation">-</span> 9031<span class="token punctuation">:</span><span class="token number">80</span>\n    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>\n      <span class="token punctuation">-</span> /volume1/docker/nextcloud/onlyoffice/data<span class="token punctuation">:</span>/var/www/onlyoffice/Data\n      <span class="token punctuation">-</span> /volume1/docker/nextcloud/onlyoffice/logs<span class="token punctuation">:</span>/var/log/onlyoffice\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="外部存储" tabindex="-1"><a class="header-anchor" href="#外部存储"><span>外部存储</span></a></h2><p>有时你的文档在其他位置，可以在应用中添加插件 External storage support，这样可以直接编辑 FTP、WebDAV、Nextcloud、SFTP、Amazone S3 或其他对象存储等外部文件。</p><p>安装插件后，进入「管理」&gt;「外部存储」设置目录。</p>',7),k={},v=(0,a(86683).Z)(k,[["render",function(n,s){const a=(0,e.up)("ExternalLinkIcon");return(0,e.wg)(),(0,e.iD)("div",null,[(0,e._)("p",null,[(0,e._)("a",t,[(0,e.Uk)("Nextcloud"),(0,e.Wm)(a)]),(0,e.Uk)(" 是一款开源的云存储和协作平台。Nextcloud 不仅可以让你创建文件共享、在线编辑和备份等功能，还支持多用户协作、通讯录、日历等功能，可以完全替代你的 Google Drive 或 Dropbox 等云存储服务。")]),o,(0,e._)("p",null,[(0,e._)("a",l,[(0,e.Uk)("ONLYOFFICE"),(0,e.Wm)(a)]),(0,e.Uk)(" Document Server 是一套提供在线编辑 Office 文档服务的套件。通过使用该套件及相应的 Nextcloud 插件，你可以在 Nextcloud 上进行在线编辑 Office 文档的操作，并正确识别中文内容。")]),c,p,i,(0,e._)("p",null,[(0,e.Uk)("Nextcloud Office 无法正常显示文档中的中文，而只显示方格子。关于此问题的解决方案可在"),(0,e._)("a",u,[(0,e.Uk)("这篇教程"),(0,e.Wm)(a)]),(0,e.Uk)("中找到。教程建议修改 "),r,(0,e.Uk)(" 文件，注释掉第 67 行，并添加以下内容。然而，我测试后发现此方法并不起作用。")]),d])}]])},86683:(n,s)=>{s.Z=(n,s)=>{const a=n.__vccOpts||n;for(const[n,e]of s)a[n]=e;return a}},70637:(n,s,a)=>{a.r(s),a.d(s,{data:()=>e});const e=JSON.parse('{"key":"v-dbc9767c","path":"/services/dockers-on-nas/nextcloud.html","title":"Nextcloud：私有云盘","lang":"zh-CN","frontmatter":{"article":false,"title":"Nextcloud：私有云盘","order":22,"description":"Nextcloud 是一款开源的云存储和协作平台。Nextcloud 不仅可以让你创建文件共享、在线编辑和备份等功能，还支持多用户协作、通讯录、日历等功能，可以完全替代你的 Google Drive 或 Dropbox 等云存储服务。 虽然 Nextcloud 内置了 Office 功能，但对中文支持有限，建议使用 Onlyoffice。Onlyoffice 是一个基于 Web 的办公套件，可以帮助你创建和编辑文字、电子表格和幻灯片等文档，实现文档的在线协作、版本控制和在线编辑等功能。这种集成方式将大大提高你的工作效率和协作能力。","head":[["meta",{"property":"og:url","content":"https://newzone.top/services/dockers-on-nas/nextcloud.html"}],["meta",{"property":"og:site_name","content":"LearnData-开源笔记"}],["meta",{"property":"og:title","content":"Nextcloud：私有云盘"}],["meta",{"property":"og:description","content":"Nextcloud 是一款开源的云存储和协作平台。Nextcloud 不仅可以让你创建文件共享、在线编辑和备份等功能，还支持多用户协作、通讯录、日历等功能，可以完全替代你的 Google Drive 或 Dropbox 等云存储服务。 虽然 Nextcloud 内置了 Office 功能，但对中文支持有限，建议使用 Onlyoffice。Onlyoffice 是一个基于 Web 的办公套件，可以帮助你创建和编辑文字、电子表格和幻灯片等文档，实现文档的在线协作、版本控制和在线编辑等功能。这种集成方式将大大提高你的工作效率和协作能力。"}],["meta",{"property":"og:type","content":"website"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-01-15T19:15:29.000Z"}],["meta",{"property":"article:author","content":"清顺"}],["meta",{"property":"article:modified_time","content":"2024-01-15T19:15:29.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"WebPage\\",\\"name\\":\\"Nextcloud：私有云盘\\",\\"description\\":\\"Nextcloud 是一款开源的云存储和协作平台。Nextcloud 不仅可以让你创建文件共享、在线编辑和备份等功能，还支持多用户协作、通讯录、日历等功能，可以完全替代你的 Google Drive 或 Dropbox 等云存储服务。 虽然 Nextcloud 内置了 Office 功能，但对中文支持有限，建议使用 Onlyoffice。Onlyoffice 是一个基于 Web 的办公套件，可以帮助你创建和编辑文字、电子表格和幻灯片等文档，实现文档的在线协作、版本控制和在线编辑等功能。这种集成方式将大大提高你的工作效率和协作能力。\\"}"]]},"headers":[{"level":2,"title":"公网访问 Nextcloud","slug":"公网访问-nextcloud","link":"#公网访问-nextcloud","children":[]},{"level":2,"title":"ONLYOFFICE","slug":"onlyoffice","link":"#onlyoffice","children":[]},{"level":2,"title":"Nextcloud Office 中文乱码","slug":"nextcloud-office-中文乱码","link":"#nextcloud-office-中文乱码","children":[]},{"level":2,"title":"部署命令","slug":"部署命令","link":"#部署命令","children":[]},{"level":2,"title":"外部存储","slug":"外部存储","link":"#外部存储","children":[]}],"git":{"createdTime":1701779050000,"updatedTime":1705346129000,"contributors":[{"name":"rockbenben","email":"qingwhat@gmail.com","commits":3}]},"readingTime":{"minutes":2.52,"words":756},"filePathRelative":"services/dockers-on-nas/nextcloud.md","localizedDate":"2023年12月5日","excerpt":"<p><a href=\\"https://github.com/nextcloud/docker\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Nextcloud</a> 是一款开源的云存储和协作平台。Nextcloud 不仅可以让你创建文件共享、在线编辑和备份等功能，还支持多用户协作、通讯录、日历等功能，可以完全替代你的 Google Drive 或 Dropbox 等云存储服务。</p>\\n<p>虽然 Nextcloud 内置了 Office 功能，但对中文支持有限，建议使用 Onlyoffice。Onlyoffice 是一个基于 Web 的办公套件，可以帮助你创建和编辑文字、电子表格和幻灯片等文档，实现文档的在线协作、版本控制和在线编辑等功能。这种集成方式将大大提高你的工作效率和协作能力。</p>","autoDesc":true}')}}]);